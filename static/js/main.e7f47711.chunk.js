(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(27)},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(8),o=n(5),i=n.n(o),u=n(9),l=n(1);function s(e){var t=e.autoStart,n=e.duration,a=(new Date).getTime(),c=Object(r.useState)(a),o=Object(l.a)(c,2),i=o[0],u=o[1],s=Object(r.useRef)(),f=50;var d=Object(r.useRef)(),b=Object(r.useRef)(f),g=Object(r.useRef)();function m(){d.current||(console.log("will start with step: "+b.current),d.current=setInterval(function(){return function(e){s.current+=e,u(s.current)}(b.current)},f)),g.current=setTimeout(function(){j()},n)}function j(){console.log("toggle"),g.current&&clearTimeout(g.current),d.current?(clearInterval(d.current),d.current=void 0):m()}return Object(r.useEffect)(function(){u((new Date).getTime()),console.log("date after setting: "+i),s.current=i,console.log("init date to: "+s.current),t&&(console.log("starting Timer... ("+n/1e3+" sec)"),m())},[]),Object(r.useEffect)(function(){},[s.current]),{date:i,togglePause:j,reset:function(){console.log("reset"),d.current&&(clearInterval(d.current),d.current=void 0);var e=(new Date).getTime();b.current=f,u(e),s.current=e},increaseSpeed:function(){b.current=b.current>0?b.current*=2:b.current/=2,Math.abs(b.current)<f&&(b.current=f)},decreaseSpeed:function(){b.current=b.current>0?b.current/=2:b.current*=2,Math.abs(b.current)<f&&(b.current=-1*f)},forceDate:function(e){s.current=e}}}var f=n(3),d=n(4);var b=function(e){var t=s({autoStart:!1,duration:e.duration}),n=t.date,c=t.togglePause,o=t.reset,i=t.increaseSpeed,u=t.decreaseSpeed,b=t.forceDate,g=Object(f.useGlobal)("appdate"),m=Object(l.a)(g,2),j=m[0],p=m[1];return Object(d.a)("t",c),Object(d.a)("r",o),Object(d.a)(".",i),Object(d.a)(",",u),Object(r.useEffect)(function(){console.log("useEffect (date) in ClockController"),p(n)},[n]),Object(r.useEffect)(function(){b(j)},[j]),Object(r.useEffect)(function(){b(j)},[]),a.a.createElement("div",{onClick:c},"start")},g=n(2),m=n.n(g);function j(e){var t=Object(f.useGlobal)("appdate"),n=Object(l.a)(t,2),c=n[0],o=(n[1],Object(r.useRef)(null));Object(d.a)("p",function(){u(function(e){console.log("prevProjection: "+e);var t=["3D","Equirectangular","Mercator"],n=(t.indexOf(e)+1)%t.length;switch(console.log("newProjection: "+t[n]),t[n]){case"3D":o.current.globe.projection=new m.a.ProjectionWgs84;break;case"Equirectangular":o.current.globe.projection=new m.a.ProjectionEquirectangular;break;case"Mercator":o.current.globe.projection=new m.a.ProjectionMercator;break;case"North Polar":o.current.globe.projection=new m.a.ProjectionPolarEquidistant("North");break;case"South Polar":o.current.globe.projection=new m.a.ProjectionPolarEquidistant("South");break;default:o.current.globe.projection=new m.a.ProjectionWgs84}return o.current.redraw(),t[n]})});var i=Object(r.useState)("3D"),u=Object(l.a)(i,2)[1];Object(d.a)("a",function(){o.current.layers[2].enabled=!o.current.layers[2].enabled,o.current.redraw()}),Object(d.a)("s",function(){o.current.layers[1].enabled=!o.current.layers[1].enabled,o.current.redraw()}),Object(r.useEffect)(function(){console.log("useEffect (mount) in Map");var t=new m.a.EarthElevationModel;o.current=new m.a.WorldWindow(e.id,t);for(var n={service:"https://tiles.maps.eox.at/wms",layerNames:"s2cloudless-2018",numLevels:19,format:"image/png",size:256,sector:m.a.Sector.FULL_SPHERE,levelZeroDelta:new m.a.Location(90,90)},r=new m.a.StarFieldLayer,a=new m.a.AtmosphereLayer,i=[{layer:new m.a.WmsLayer(n,""),enabled:!0},{layer:r,enabled:e.starfield},{layer:a,enabled:!0}],u=0;u<i.length;u++)i[u].layer.enabled=i[u].enabled,o.current.addLayer(i[u].layer);r.time=new Date(c),a.time=new Date(c),o.current.redraw()},[]),Object(r.useEffect)(function(){o.current.layers[1].time=o.current.layers[2].time=new Date(c),o.current.redraw()},[c]);return a.a.createElement("canvas",{id:e.id,style:{background:"inherit",position:"fixed",width:"inherit",height:"inherit"}})}var p=n(10),O=n.n(p),v=(n(25),n(6)),w=n(11);n(26);var h=function(e){var t=e.min,n=t+(e.max-e.min)/1e5,c="vertical"==e.direction,o=n-t;console.log("min: "+t+" / wid: "+o);var i=Object(r.useState)(0),u=Object(l.a)(i,2),s=u[0],d=u[1],b=Object(r.useState)(0),g=Object(l.a)(b,2),m=g[0],j=g[1],p=Object(f.useGlobal)("appdate"),O=Object(l.a)(p,2),h=O[0],E=O[1],y=Object(v.b)(function(){return{xy:[0,0],pos:0}}),S=Object(l.a)(y,2),x=S[0],C=x.xy,D=(x.pos,S[1]),P=Object(r.useState)(!1),T=Object(l.a)(P,2),R=T[0],k=T[1],N=Object(w.a)(function(e){var r=e.down,a=e.delta,o=(e.velocity,e.target),i=e.temp,u=void 0===i?C.getValue():i,l=function(){k(!0)};if(c){var s=o.getBoundingClientRect().top,f=o.parentNode.getBoundingClientRect().top,b=o.parentNode.getBoundingClientRect().height,g=o.getBoundingClientRect().height,m=s+a[1]+u[1]>=f+b?Math.min(b/2,a[1]+u[1]):a[1]+u[1];m=s+a[1]+u[1]<-g+b?Math.max(-1*(n-t-b/2),a[1]+u[1]):m,D({xy:r?[0,a[1]+u[1]]:[0,m],pos:s,config:{mass:1,tension:120,friction:14,precision:1},onRest:function(){d(t+1e5*(b/2-m)),k(!1)},onFrame:function(e){var n=e.xy;j(t+1e5*(-n[1]+b/2))},onStart:l})}else{var p=o.getBoundingClientRect().left,O=o.parentNode.getBoundingClientRect().left,v=o.parentNode.getBoundingClientRect().width,w=o.getBoundingClientRect().width,h=p+a[0]+u[0]>=O+v?Math.min(v/2,a[0]+u[0]):a[0]+u[0];h=p+a[0]+u[0]<-w-v/2?Math.max(-1*(n-t-v/2),a[0]+u[0]):h,D({xy:r?[a[0]+u[0],0]:[h,0],pos:p,config:{mass:1,tension:120,friction:14,precision:1},onRest:function(){d(t+1e5*(v/2-h)),k(!1)},onFrame:function(e){var n=e.xy;j(t+1e5*(-n[0]+v/2))},onStart:l})}return u});return Object(r.useEffect)(function(){console.log("useEffect (livePosition) in TimeSelector: "+m),R&&E(m)},[m]),Object(r.useEffect)(function(){if(!R){var e=(t-h)/1e5+250;D({xy:c?[0,e]:[e,0],config:{tension:1200,friction:40},onFrame:null})}},[h]),Object(r.useEffect)(function(){E(s)},[s]),Object(r.useEffect)(function(){console.log("Active changed to: "+R)},[R]),a.a.createElement("div",{className:"TimeContainer"},a.a.createElement(v.a.div,Object.assign({className:"TimeScale"},N(),{style:{width:o,height:o,transform:C.interpolate(function(e,t){return"translate3d(".concat(e,"px,").concat(t,"px,0)")})}}),function(e,t){for(var n="",r=e;r<=t;r++)n+=r+"   ";return n}(2e3,2200)))};var E=function(){var e=Object(f.useGlobal)("appdate"),t=Object(l.a)(e,2),n=t[0];return t[1],a.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"}},new Date(n).toUTCString())},y=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(new Date("2019-04-10").getTime()),s=Object(l.a)(o,2),f=s[0],g=(s[1],Object(r.useState)((new Date).getTime())),m=Object(l.a)(g,2),p=m[0];m[1];Object(r.useEffect)(function(){var e=function(){return new Promise(function(e){setTimeout(function(){var t=Math.ceil(10*Math.random());console.log("mockApi done"),e(t)},1e4)})};function t(){return(t=Object(u.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=5;break}return t.next=3,e();case 3:t.sent,c(!0);case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}console.log("useEffect (mount) in App"),function(){t.apply(this,arguments)}()},[]);var v=Object(r.useState)(!1),w=Object(l.a)(v,2),y=w[0],S=w[1];return Object(d.a)("f",function(){S(!0)}),a.a.createElement("div",{className:"App"},a.a.createElement(O.a,{enabled:y,onChange:function(e){return S({isFull:e})}},a.a.createElement("div",{className:"TimeLabel"},a.a.createElement(E,null)),a.a.createElement("div",{className:"ClockController"},a.a.createElement(b,{duration:"600000"})),a.a.createElement("div",{className:"Globe"},a.a.createElement(j,{id:"globe",starfield:"true"})),a.a.createElement("div",{className:"TimeSelectorh"},a.a.createElement(h,{min:f,max:p,direction:"horizontal"}))))};console.log("init global: "+(new Date).getTime()),Object(f.setGlobal)({appdate:(new Date).getTime()}),Object(c.render)(a.a.createElement(y,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.e7f47711.chunk.js.map