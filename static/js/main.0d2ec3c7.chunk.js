(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,a){e.exports=a(284)},110:function(e,t,a){},111:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},283:function(e,t,a){},284:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(98),c=a(13),i=a.n(c),l=a(23),s=a(1);function u(e){var t=e.autoStart,a=e.duration,r=e.startdate,o=Object(n.useState)(r),c=Object(s.a)(o,2),i=c[0],l=c[1],u=Object(n.useState)(!1),f=Object(s.a)(u,2),d=f[0],b=f[1],g=Object(n.useRef)(),m=50;var p=Object(n.useRef)(),O=Object(n.useRef)(m),j=Object(n.useRef)();function v(){console.log("starting Timer... (will stop in "+a/1e3+" sec)"),p.current||(p.current=setInterval(function(){return function(e){g.current+=e,l(g.current)}(O.current)},m),b(!0)),j.current=setTimeout(function(){h()},a)}function h(){console.log("toggle clock"),j.current&&clearTimeout(j.current),p.current?(b(!1),clearInterval(p.current),p.current=void 0):v()}return Object(n.useEffect)(function(){l((new Date).getTime()),g.current=i,t&&v()},[]),{date:i,playing:d,togglePause:h,reset:function(){console.log("reset"),p.current&&(clearInterval(p.current),p.current=void 0,b(!1));var e=(new Date).getTime();O.current=m,l(e),g.current=e},increaseSpeed:function(){O.current=O.current>0?O.current*=2:O.current/=2,Math.abs(O.current)<m&&(O.current=m)},decreaseSpeed:function(){O.current=O.current>0?O.current/=2:O.current*=2,Math.abs(O.current)<m&&(O.current=-1*m)},forceDate:function(e){g.current=e}}}var f=a(2),d=a.n(f),b=a(5);var g=function(e){var t=e.duration,a=Object(f.useGlobal)("appdate"),o=Object(s.a)(a,2),c=o[0],i=o[1],l=u({autoStart:!1,duration:t,startdate:c}),d=l.date,g=(l.playing,l.togglePause),m=l.reset,p=l.increaseSpeed,O=l.decreaseSpeed,j=l.forceDate;Object(b.a)("t",g),Object(b.a)("r",m),Object(b.a)(".",p),Object(b.a)(",",O),Object(n.useEffect)(function(){i(d)},[d]),Object(n.useEffect)(function(){j(c)},[c]),Object(n.useEffect)(function(){j(c)},[]);var v=Object(n.useState)(),h=Object(s.a)(v,2),y=h[0],w=h[1];return r.a.createElement("div",{className:"ClockController",onClick:function(){console.log("pressed");var e=Date.now();y&&e-y<300?m():(w(e),g())}})},m=a(42),p=a(14),O=a(4),j=a.n(O);function v(e){var t=e.id,a=e.clon,r=e.clat,o=e.alt,c=e.starfield,i=e.atmosphere,l=e.names,u=Object(n.useRef)(null),f=Object(n.useState)("3D"),d=Object(s.a)(f,2),b=(d[0],d[1]),g=Object(n.useState)(""),O=Object(s.a)(g,2),v=(O[0],O[1],Object(n.useState)([])),h=Object(s.a)(v,2),y=h[0],w=h[1],E=Object(n.useState)({latitude:r,longitude:a,altitude:o,aoi:""}),S=Object(s.a)(E,2),N=S[0],T=S[1];var D=function(){var e=u.current.navigator.lookAtLocation.longitude,t=u.current.navigator.lookAtLocation.latitude,a=u.current.navigator.range,n=a<2e6?function(){var e,t,a=u.current.viewport,n="";try{(e=u.current.pickTerrain(u.current.canvasCoordinates(a.x,a.y+a.height)).terrainObject().position).latitude=Math.round(1e4*e.latitude)/1e4,e.longitude=Math.round(1e4*e.longitude)/1e4}catch(r){e=null}try{(t=u.current.pickTerrain(u.current.canvasCoordinates(a.x+a.width,a.y)).terrainObject().position).latitude=Math.round(1e4*t.latitude)/1e4,t.longitude=Math.round(1e4*t.longitude)/1e4}catch(r){t=null}return null==e||null==t?n="":(e.longitude,e.latitude,t.longitude,t.latitude,n="POLYGON(("+e.longitude+" "+e.latitude+","+t.longitude+" "+e.latitude+","+t.longitude+" "+t.latitude+","+e.longitude+" "+t.latitude+","+e.longitude+" "+e.latitude+"))"),n}():"";T(function(r){return Object(m.a)({},r,{longitude:e,latitude:t,altitude:a,viewpolygon:n})})},k=function(e){console.log("click");var t=e.clientX,a=e.clientY,n=u.current.pick(u.current.canvasCoordinates(t,a));if(console.log(n),n.terrainObject()){for(var r=[],o=0;o<n.objects.length;o++)n.objects[o].userObject instanceof j.a.SurfaceShape&&(r.push(n.objects[o].userObject.userProperties.name),n.objects[o].userObject.highlighted=!n.objects[o].userObject.highlighted);console.log(r),u.current.redraw()}else console.log("No position !")},x=function(e){console.log("double click");var t,a=e.clientX,n=e.clientY,r=u.current.pick(u.current.canvasCoordinates(a,n));if(r.terrainObject()){var o="POINT("+(t=r.terrainObject().position).longitude+" "+t.latitude+")";T(function(e){return Object(m.a)({},e,{aoi:o})})}else console.log("No position !"),T(function(e){return Object(m.a)({},e,{aoi:""})})};return Object(n.useEffect)(function(){console.log("useEffect (mount) in Eww  star/atmo: "+c+"/"+i),u.current=new j.a.WorldWindow(t),u.current.redrawCallbacks.push(D),j.a.BasicWorldWindowController.prototype.applyLimits=function(){u.current.navigator.range=j.a.WWMath.clamp(u.current.navigator.range,2e3,3e8)};var e=new j.a.ClickRecognizer(u.current,k);e.numberOfClicks=1;var n=new j.a.ClickRecognizer(u.current,x);n.numberOfClicks=2,n.recognizeSimultaneouslyWith(e),n.maxClickInterval=200;var s={service:"https://tiles.maps.eox.at/wms",layerNames:"s2cloudless-2018",numLevels:19,format:"image/png",size:256,sector:j.a.Sector.FULL_SPHERE,levelZeroDelta:new j.a.Location(90,90)},f={service:"https://tiles.maps.eox.at/wms",layerNames:"overlay_bright",numLevels:19,format:"image/png",size:256,sector:j.a.Sector.FULL_SPHERE,levelZeroDelta:new j.a.Location(90,90)};j.a.configuration.baseUrl=j.a.configuration.baseUrl.slice(0,-3);for(var d=new j.a.StarFieldLayer,b=new j.a.AtmosphereLayer("images/BlackMarble_2016_01deg.jpg"),g=[{layer:new j.a.WmsLayer(s,""),enabled:!0},{layer:new j.a.WmsLayer(f,""),enabled:l},{layer:d,enabled:c},{layer:b,enabled:i}],m=0;m<g.length;m++)g[m].layer.enabled=g[m].enabled,u.current.addLayer(g[m].layer);d.time=new Date,b.time=new Date,setTimeout(function(){u.current.goToAnimator.travelTime=1e3,u.current.goTo(new j.a.Position(r,a,o)),u.current.redraw()},2e3),u.current.redraw(),u.current.deepPicking=!0},[]),{ewwstate:N,removeGeojson:function(){for(var e=0;e<y.length;e++)u.current.removeLayer(y[e]);w([]),u.current.redraw()},addGeojson:function(e,t){console.log("replace: "+t);var a=new j.a.RenderableLayer(e.properties.updated+Math.ceil(1e4*Math.random()));u.current.addLayer(a),new j.a.GeoJSONParser(e).load(function(){console.log(a),w(function(e){return[].concat(Object(p.a)(e),[a])}),u.current.redraw()},function(e,t){var a={};a.userProperties=t;var n=new j.a.PlacemarkAttributes(null);return n.imageScale=10,n.imageColor=new j.a.Color(0,1,1,.2),n.labelAttributes.offset=new j.a.Offset(j.a.OFFSET_FRACTION,5,j.a.OFFSET_FRACTION,5),e.isPointType()||e.isMultiPointType()?a.attributes=new j.a.PlacemarkAttributes(n):e.isLineStringType()||e.isMultiLineStringType()?(a.attributes.drawOutline=!0,a.attributes.outlineColor=new j.a.Color(.1*a.attributes.interiorColor.red,.3*a.attributes.interiorColor.green,.7*a.attributes.interiorColor.blue,1),a.attributes.outlineWidth=1):(e.isPolygonType()||e.isMultiPolygonType())&&(a.attributes=new j.a.ShapeAttributes(null),a.attributes.interiorColor=new j.a.Color(1,0,0,.2),a.attributes.outlineColor=new j.a.Color(1,0,0,.3),a.highlightAttributes=new j.a.ShapeAttributes(a.attributes),a.highlightAttributes.outlineColor=new j.a.Color(1,0,0,.4),a.highlightAttributes.interiorColor=new j.a.Color(1,0,0,.6),a.attributes.applyLighting=!0),a},a)},addWMS:function(e){new j.a.WmsLayer(e,"")},toggleStarfield:function(){console.log("toggleStarfield"),u.current.layers[2].enabled=!u.current.layers[2].enabled,u.current.redraw()},toggleAtmosphere:function(){console.log("toggleAtmosphere"),u.current.layers[3].enabled=!u.current.layers[3].enabled,u.current.redraw()},setTime:function(e){u.current.layers[2].time=u.current.layers[3].time=new Date(e),u.current.redraw()},toggleProjection:function(){b(function(e){console.log("prevProjection: "+e);var t=["3D","Equirectangular","Mercator"],a=(t.indexOf(e)+1)%t.length;switch(console.log("newProjection: "+t[a]),t[a]){case"3D":u.current.globe.projection=new j.a.ProjectionWgs84;break;case"Equirectangular":u.current.globe.projection=new j.a.ProjectionEquirectangular;break;case"Mercator":u.current.globe.projection=new j.a.ProjectionMercator;break;case"North Polar":u.current.globe.projection=new j.a.ProjectionPolarEquidistant("North");break;case"South Polar":u.current.globe.projection=new j.a.ProjectionPolarEquidistant("South");break;default:u.current.globe.projection=new j.a.ProjectionWgs84}return u.current.redraw(),t[a]})},toggleNames:function(){console.log("toggleNames"),u.current.layers[1].enabled=!u.current.layers[1].enabled,u.current.redraw()}}}var h=a(99),y=a.n(h);function w(e){function t(e){function t(e){for(var t={},a=0;a<e.length;a++)t[e[a].name]=e[a].content;return t}try{var a={};e.date&&Object.assign(a,t(e.date)),e.int&&Object.assign(a,t(e.int)),e.double&&Object.assign(a,t(e.double)),e.str&&Object.assign(a,t(e.str));var n,r=a.size.split(" ");switch(r[1]){case"B":n=Math.round(parseFloat(r[0]));break;case"MB":n=Math.round(1024*parseFloat(r[0]));break;case"GB":n=Math.round(1024*parseFloat(r[0])*1024);break;case"TB":n=Math.round(1024*parseFloat(r[0])*1024*1024);break;default:n=Math.round(parseFloat(r[0]))}return{id:e.title,geometry:y()(a.footprint),type:"Feature",properties:{updated:new Date(a.ingestiondate),title:e.title,name:e.title,date:a.beginposition+"/"+a.endposition,links:{data:[{href:e.link[0].href}]},earthObservation:{parentIdentifier:"",status:"ARCHIVED",acquisitionInformation:[{platform:{platformShortName:a.platformname,platformSerialIdentifier:a.platformserialidentifier},sensor:{instrument:a.instrumentshortname,operationalMode:a.sensoroperationalmode},acquisitionParameter:{acquisitionStartTime:new Date(a.beginposition),acquisitionStopTime:new Date(a.endposition),relativePassNumber:parseInt(a.relativeorbitnumber),orbitNumber:parseInt(a.orbitnumber),startTimeFromAscendingNode:null,stopTimeFromAscendingNode:null,orbitDirection:a.orbitdirection}}],productInformation:{productType:a.producttype,size:n}}}}}catch(o){return console.log("error parsing item from dhus: "+o.message),{}}}var a=[];try{e.feed.entry?Array.isArray(e.feed.entry)?(console.log("entry is an  array"),a=e.feed.entry.map(function(e){return t(e)}).filter(function(e){return e!=={}})):a=[t(e.feed.entry)]:a=[]}catch(n){console.log(e),console.log("Error: "),console.log(n),a=[]}return{type:"FeatureCollection",id:"search",properties:{totalResults:e.feed["opensearch:totalResults"],startIndex:e.feed["opensearch:startIndex"]?e.feed["opensearch:startIndex"]:1,itemsPerPage:e.feed["opensearch:itemsPerPage"],title:"DHuS search response",updated:new Date},features:a}}var E=a(19),S=a.n(E);function N(e){var t=e.id,a=e.clat,r=e.clon,o=e.alt,c=e.starfield,u=e.atmosphere,g=e.names,m=v({id:t,clat:a,clon:r,alt:o,starfield:c,atmosphere:u,names:g}),p=m.ewwstate,O=m.addGeojson,j=m.removeGeojson,h=(m.addWMS,m.toggleProjection),y=m.toggleAtmosphere,E=m.toggleStarfield,N=m.toggleNames,T=m.setTime;Object(b.a)("p",h),Object(b.a)("a",y),Object(b.a)("s",E),Object(b.a)("n",N),Object(b.a)("c",j);var D=function(){var e=function(e){var t=e.code,a=e.polygon,n=e.date,r=e.startindex;console.log("Search param: "+t+","+a+","+n+","+r);var o,c,i,l,s=(o=t,[{code:"S1",templateUrl:'https://131.176.236.55/dhus/search?q=( footprint:"Intersects({polygon})" AND beginposition:[{start} TO {end}] AND platformname:Sentinel-1 AND producttype:GRD)&start={startindex}&rows=100&sortedby=beginposition&order=desc&format=json',name:"Sentinel-1 A/B GRD",dateOff:" beginposition:[{start} TO {end}] AND",areaOff:' footprint:"Intersects({polygon})" AND'},{code:"S2",templateUrl:'https://131.176.236.55/dhus/search?q=( footprint:"Intersects({polygon})" AND beginposition:[{start} TO {end}] AND platformname:Sentinel-2 AND producttype:S2MSI1C)&start={startindex}&rows=100&sortedby=beginposition&order=desc&format=json',name:"Sentinel-2 A/B Level 1C",dateOff:" beginposition:[{start} TO {end}] AND",areaOff:' footprint:"Intersects({polygon})" AND'},{code:"S3",templateUrl:'https://131.176.236.55/dhus/search?q=( footprint:"Intersects({polygon})" AND beginposition:[{start} TO {end}] AND platformname:Sentinel-3 AND (producttype:OL_1_ERR___ OR producttype:SL_1_RBT___ OR producttype:SR_1_SRA___))&start={startindex}&rows=100&sortedby=beginposition&order=desc&format=json',name:"Sentinel-3 A/B, OLCI/SLSTR/SRAL",dateOff:" beginposition:[{start} TO {end}] AND",areaOff:' footprint:"Intersects({polygon})" AND'},{code:"S5P",templateUrl:'https://131.176.236.55/dhus/search?q=( footprint:"Intersects({polygon})" AND beginposition:[{start} TO {end}] AND platformname:Sentinel-5 precursor AND (producttype:L1B_RA_BD1 OR (producttype:L2__NO2___ AND processingmode:Near real time)))&start={startindex}&rows=100&sortedby=beginposition&order=desc&format=json',name:"Sentinel-1 A/B",dateOff:" beginposition:[{start} TO {end}] AND",areaOff:' footprint:"Intersects({polygon})" AND'},{code:"ENVISAT",templateUrl:"https://eocat.esa.int/ngeo/catalogue/FEDEO-ENVISAT.ASA.IMP_1P/search?start={start}&stop={end}&format=json&count=50&startIndex={startindex}",name:"Sentinel-1 A/B",dateOff:" beginposition:[{start} TO {end}]",areaOff:' footprint:"Intersects({polygon})"'}].find(function(e){return e.code==o})),u=s.templateUrl;return a.length>0?(l=2592e6,c=S()(new Date(n-l/2),"isoUtcDateTime"),i=S()(new Date(n+l/2),"isoUtcDateTime"),console.log("|"+a.length+"|"),u=(u=(u=u.replace("{polygon}",a)).replace("{start}",c)).replace("{end}",i)):(l=108e5,c=S()(new Date(n-l/2),"isoUtcDateTime"),i=S()(new Date(n+l/2),"isoUtcDateTime"),u=(u=(u=u.replace(s.areaOff,"")).replace("{start}",c)).replace("{end}",i)),u=u.replace("{startindex}",r)},t=Object(n.useState)(null),a=Object(s.a)(t,2),r=a[0],o=a[1],c=Object(n.useState)(!1),u=Object(s.a)(c,2),d=u[0],b=u[1],g=Object(n.useState)(!0),m=Object(s.a)(g,2),p=m[0],O=m[1],j=Object(f.useGlobal)("searchdate"),v=Object(s.a)(j,1)[0],h=Object(f.useGlobal)("mission"),y=Object(s.a)(h,1)[0],E=Object(f.useGlobal)("apppolygon"),N=Object(s.a)(E,1)[0],T=Object(n.useState)(null),D=Object(s.a)(T,2),k=D[0],x=D[1],C=Object(n.useState)(null),A=Object(s.a)(C,2),M=A[0],L=A[1];return Object(n.useEffect)(function(){k&&function(){var e=Object(l.a)(i.a.mark(function e(t){var a,n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Search: "+t),e.prev=1,e.next=4,fetch(t,{mode:"cors",credentials:"include"});case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,r="ENVISAT"===y?n:w(n),console.log(r.properties),L({totalresults:Number(r.properties.totalResults),startindex:Number(r.properties.startIndex),itemsperpage:Number(r.properties.itemsPerPage)}),Number(r.properties.totalResults>0)&&o(r),O(M.startindex+M.itemsperpage<M.totalresults),console.log("true"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.log("Didn't recieve a json !"),b(!1);case 20:case"end":return e.stop()}},e,null,[[1,16]])}));return function(t){return e.apply(this,arguments)}}()(k)},[k]),Object(n.useEffect)(function(){if(M)if(M.startindex+M.itemsperpage<Math.min(M.totalresults,2200)){console.log("There's More...");try{var t=e({code:y,polygon:N,date:v,startindex:M.startindex+M.itemsperpage});x(t)}catch(a){console.log("Not a JULIAN date !"),b(!1)}}else b(!1)},[M]),Object(n.useEffect)(function(){console.log("DataHub ready. "+y)},[]),Object(n.useEffect)(function(){console.log("apppolygon: "+N)},[N]),Object(n.useEffect)(function(){if(console.log("mission "+y),console.log("searchdate "+v),y&&v)try{var t=e({code:y,polygon:N,date:v,startindex:0});b(!0),x(t)}catch(a){console.log("Not a JULIAN date !")}},[v,y,N]),{geojsonResults:r,loading:d,isfirstpage:p}}(),k=D.geojsonResults,x=D.loading,C=Object(f.useGlobal)("searchdate"),A=Object(s.a)(C,1)[0],M=Object(f.useGlobal)("mission"),L=Object(s.a)(M,1)[0],P=Object(f.useGlobal)("appdate"),G=Object(s.a)(P,1)[0],I=Object(f.useGlobal)("appstarfield"),R=Object(s.a)(I,2),_=R[0],F=R[1],U=Object(f.useGlobal)("appatmosphere"),W=Object(s.a)(U,2),B=W[0],H=W[1],q=Object(f.useGlobal)("appnames"),z=Object(s.a)(q,2),V=z[0],Y=z[1],J=Object(f.useGlobal)("searching"),K=Object(s.a)(J,2)[1],X=Object(f.useGlobal)("appaltitude"),Z=Object(s.a)(X,2)[1],$=Object(f.useGlobal)("applatitude"),Q=Object(s.a)($,2)[1],ee=Object(f.useGlobal)("applongitude"),te=Object(s.a)(ee,2)[1],ae=Object(f.useGlobal)("apppolygon"),ne=Object(s.a)(ae,2),re=ne[0],oe=ne[1],ce=Object(f.useState)(!0),ie=Object(s.a)(ce,2),le=ie[0],se=ie[1];Object(b.a)("z",function(){return se(function(e){return!e})}),Object(f.useEffect)(function(){if(k){console.log("datahub in use"),console.log(k);try{O(k,le)}catch(e){console.log("error on geojson parsing"),console.log(e)}}},[k]),Object(f.useEffect)(function(){console.log("reacting to searchdate or mission"),le&&j()},[A,L,re]),Object(f.useEffect)(function(){console.log("atmosphere"),y(B)},[B]),Object(f.useEffect)(function(){E(_)},[_]),Object(f.useEffect)(function(){N(V)},[V]),Object(f.useEffect)(function(){K(x)},[x]),Object(f.useEffect)(function(){Z(p.altitude),te(p.longitude),Q(p.latitude)},[p.longitude,p.latitude,p.altitude]),Object(f.useEffect)(function(){},[p.viewpolygon]),Object(f.useEffect)(function(){oe(p.aoi)},[p.aoi]),Object(f.useEffect)(function(){T(G)},[G]),Object(f.useEffect)(function(){H(u),F(c),Y(g)},[]);return d.a.createElement("canvas",{id:t,style:{background:"inherit",position:"fixed",width:"inherit",height:"inherit"}})}a(110);var T=function(){var e=Object(f.useGlobal)("mission"),t=Object(s.a)(e,2),a=(t[0],t[1]);return Object(b.a)("1",function(){a("S1")}),Object(b.a)("2",function(){a("S2")}),Object(b.a)("3",function(){a("S3")}),Object(b.a)("5",function(){a("S5P")}),Object(b.a)("6",function(){a("ENVISAT")}),r.a.createElement("div",{className:"MissionSelector"},r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s1_black.png",alt:"",onClick:function(){return a("S1")}})),r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s2_black.png",alt:"",onClick:function(){return a("S2")}})),r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s3_black.png",alt:"",onClick:function(){return a("S3")}})),r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s5p_black.png",alt:"",onClick:function(){return a("S5P")}})))};a(111);var D=function(){var e=Object(f.useGlobal)("appatmosphere"),t=Object(s.a)(e,2),a=t[0],n=t[1],r=Object(f.useGlobal)("appstarfield"),o=Object(s.a)(r,2),c=o[0],i=o[1],l=Object(f.useGlobal)("appnames"),u=Object(s.a)(l,2),b=u[0],g=u[1];return d.a.createElement("div",{className:"MapSelector"},d.a.createElement("div",{className:"CircleButton"},d.a.createElement("img",{className:"MapIcon",draggable:"false",src:"./images/atmosphere.png",alt:"",onClick:function(){return n(!a)}})),d.a.createElement("div",{className:"CircleButton"},d.a.createElement("img",{className:"MapIcon",draggable:"false",src:"./images/starfield.png",alt:"",onClick:function(){return i(!c)}})),d.a.createElement("div",{className:"CircleButton"},d.a.createElement("img",{className:"MapIcon",draggable:"false",src:"./images/names.png",alt:"",onClick:function(){return g(!b)}})))},k=a(100),x=a.n(k),C=a(101),A=(a(114),a(25)),M=a(41),L=(a(115),a(17));a(116);var P=function(){var e=Object(f.useGlobal)("highlight"),t=Object(s.a)(e,1)[0],a=Object(n.useState)(!1),o=Object(s.a)(a,2),c=o[0],i=o[1];return Object(b.a)("m",function(){i(function(e){return!e})}),Object(n.useEffect)(function(){console.log("Mask Overlay: press m "),console.log("active (use): "+c)},[]),Object(n.useEffect)(function(){i("none"!==t)},[t]),console.log("active rendered"),r.a.createElement("div",{className:"StepMask",style:{display:c?"inline":"none"}},r.a.createElement("div",{className:"DayMask",style:{display:c?"inline":"none"}}),r.a.createElement("div",{className:"MonthMask",style:{display:c?"inline":"none"}}),r.a.createElement("div",{className:"YearMask",style:{display:c?"inline":"none"}}))};var G=function(e){var t,a=Object(f.useGlobal)("debug"),o=Object(s.a)(a,2)[1],c=(e.max-e.min)/(40*(e.max-e.min)/864e5),i=e.min,l=i+(e.max-e.min)/c,u=0;e.vertical?(u=l-i,t=100):(t=l-i,u=100);var d=Object(f.useGlobal)("appdate"),b=Object(s.a)(d,2),g=b[0],m=b[1],p=Object(f.useGlobal)("searchdate"),O=Object(s.a)(p,2)[1],j=Object(f.useGlobal)("highlight"),v=Object(s.a)(j,2)[1],h=Object(n.useState)(new Date),y=Object(s.a)(h,2),w=y[0],E=y[1],S=Object(n.useState)(!1),N=Object(s.a)(S,2),T=N[0],D=N[1],k=Object(n.useState)("continuous"),x=Object(s.a)(k,2),C=x[0],P=x[1],G=Object(n.useRef)();G.current=e.vertical;var I=Object(n.useRef)(),R=Object(A.b)(function(){return{xy:[0,0]}}),_=Object(s.a)(R,2),F=_[0].xy,U=_[1],W=Object(M.a)({onDrag:function(e){var t=e.down,a=e.delta,n=(e.distance,e.velocity),r=e.active,l=e.direction,s=(e.wheeling,e.time),u=e.first,f=(e.last,e.temp),d=void 0===f?{xy:F.getValue(),deltaOffset:[0,0],deltaCumul:[0,0],lastNewxy:[0,0],lastStep:1,lastIncrement:0,lastDown:!1,lastTime:s}:f;if(Object(L.scale)(l,n),n=n<.15?0:n,t||P(1),u&&D(!0),d.lastDown=t,G.current){var b=I.current.parentElement.offsetHeight,g=1,m=1;console.log(d.xy[0]),a[0]<-30&&(g=864e5/c,m=10),a[0]<-80&&(g=2592e6/c,m=15),a[0]<-160&&(g=31536e6/c,m=30),g!==d.lastStep&&(o(["Step changed from: "+d.lastStep+" to: "+g,0]),P(g),d.deltaOffset=a,d.xy=d.lastNewxy),a=Object(L.sub)(a,d.deltaOffset);var p=[Math.round(a[0]/m)*g,Math.round(a[1]/m)*g];t&&(n=0);var j=Object(L.add)(Object(L.scale)(p,Math.pow(n+1,2)),d.xy);g!==d.lastStep&&(d.xy=j,d.lastStep=g),d.lastNewxy=j;var v=I.current.parentElement.offsetTop+I.current.parentElement.offsetHeight/2,h=-I.current.offsetHeight+I.current.parentElement.offsetHeight/2;j[1]=j[1]>v?v:j[1],j[1]=j[1]<h?h:j[1],U({xy:j,config:t?{mass:1,tension:1200,friction:40,precision:.01}:{mass:1,tension:200,friction:40,precision:1},immediate:t,onRest:function(e){var a=e.xy;t||r||D(!1),t||O(i+(-a[1]+b/2)*c)},onFrame:function(e){var t=e.xy;E(i+(-t[1]+b/2)*c)}})}return d},onWheel:function(e){e.down;var t=e.delta,a=e.wheeling,n=e.local,r=e.temp,l=void 0===r?{xy:F.getValue()}:r;console.log(n),o([F.getValue()[0]+"/"+F.getValue()[1],1]),D(!0);var s=I.current.parentElement.offsetHeight,u=Object(L.scale)(Object(L.add)(t,l.xy),.1);return U({xy:u,config:{tension:1200,friction:40,precision:.01},immediate:a,onRest:function(e){var t=e.xy;D(!1),a||O(i+(-t[1]+s/2)*c)},onFrame:function(e){var t=e.xy;E(i+(-t[1]+s/2)*c)}}),l}}),B=Object(n.useState)(""),H=Object(s.a)(B,2),q=H[0],z=H[1];return Object(n.useLayoutEffect)(function(){z(function(){for(var t,a,n,o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=0,l=0,s=[],u=e.vertical?"DayTic-v":"DayTic",f=e.vertical?"MonthTic-v":"MonthTic",d=e.vertical?"YearTic-v":"YearTic",b=e.min;b<=e.max;b+=36e5)t=new Date(b).getUTCDate(),a=o[new Date(b).getUTCMonth()],new Date(b).getUTCHours(),i=new Date(b).getUTCFullYear(),t!==n&&s.push({class:u,pos:(b-e.min)/c,label:t}),a!==l&&(s.push({class:f,pos:(b-e.min)/c,label:a}),s.push({class:d,pos:(b-e.min)/c,label:i})),n=t,l=a;return s.map(function(t){return r.a.createElement("div",{className:t.class,key:t.class+t.pos,style:e.vertical?{top:t.pos}:{left:t.pos}},t.label)})}(e.vertical))},[e.vertical]),Object(n.useLayoutEffect)(function(){var t=0;T||(e.vertical?(t=(i-g)/c+I.current.parentElement.offsetHeight/2,U({xy:[0,t],config:{tension:1200,friction:40},onFrame:null,onRest:null})):(t=(i-g)/c+I.current.parentElement.offsetWidth/2,U({xy:[t,0],config:{tension:1200,friction:40},onFrame:null,onRest:null})))},[g,q]),Object(n.useEffect)(function(){m(w)},[w]),Object(n.useEffect)(function(){switch(C){case 40:v("day");break;case 1200:v("month");break;case 14600:v("year");break;default:v("none")}},[C]),Object(n.useLayoutEffect)(function(){console.log("zoom changed to: "+e.zoom)},[e.zoom]),r.a.createElement("div",{className:e.vertical?"Mask-v":"Mask"},r.a.createElement("div",{className:"TriangleContainer"},r.a.createElement("svg",{height:"40",width:"20",className:"Triangle"},r.a.createElement("polygon",{points:"20,5 20,35 12,20"}))),r.a.createElement("div",{className:"TimeContainer",ref:I},r.a.createElement(A.a.div,Object.assign({className:"TimeScale"},W(),{style:{width:t,height:u,transform:F.interpolate(function(e,t){return"translate3d(0px,".concat(t,"px,0)")})}}),q)))};a(117);var I=function(){var e=Object(f.useGlobal)("appdate"),t=Object(s.a)(e,1)[0],a=Object(f.useGlobal)("highlight"),o=Object(s.a)(a,1)[0],c=Object(f.useGlobal)("searching"),i=Object(s.a)(c,1)[0],l=Object(n.useState)(""),u=Object(s.a)(l,2),d=u[0],b=u[1],g=Object(n.useState)(""),m=Object(s.a)(g,2),p=m[0],O=m[1],j=Object(n.useState)(""),v=Object(s.a)(j,2),h=v[0],y=v[1],w=Object(n.useState)(""),E=Object(s.a)(w,2),N=E[0],T=E[1];return Object(n.useLayoutEffect)(function(){var e=new Date(t);b(e.getUTCFullYear()),O(S()(e,"UTC:mmm")),y(S()(e,"UTC:dd")),T(S()(e,"UTC:HH:MM:ss"))},[t]),Object(n.useLayoutEffect)(function(){console.log("Searching: "+i)},[i]),r.a.createElement("div",{className:"LabelCountainer"},r.a.createElement("div",{className:!0===i?"Line  Line-active":"Line",key:"line"},"____"),r.a.createElement("div",{className:"day"===o?"DayLabel  Highlighted":"DayLabel",key:"day"},h),r.a.createElement("div",{className:"year"===o?"YearLabel  Highlighted":"YearLabel",key:"year"},d),r.a.createElement("div",{className:"month"===o?"MonthLabel  Highlighted":"MonthLabel",key:"month"},p),r.a.createElement("div",{className:"TimeLabel",key:"time"},N))};a(118);var R=function(){var e=Object(f.useGlobal)("appaltitude"),t=Object(s.a)(e,1)[0];return r.a.createElement("div",{className:"MapStateLabel"},r.a.createElement("div",null,Math.ceil(t/1e3)+" Km"))};a(119);var _=function(){var e=Object(f.useGlobal)("debug"),t=Object(s.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),i=Object(s.a)(c,2),l=i[0],u=i[1],d=Object(n.useState)([]),g=Object(s.a)(d,2),m=g[0],p=g[1];return Object(b.a)("d",function(){u(function(e){return!e})}),Object(n.useEffect)(function(){console.log("Debug Overlay Key: d")},[]),Object(n.useEffect)(function(){if(l){console.log("debug txt: "),console.log(a);var e=m;e[a[1]]=a[0],p(e),console.log(e)}},[a]),Object(n.useEffect)(function(){o(["Hi",0])},[]),r.a.createElement("div",{className:"Debug",style:{display:l?"inline":"none",width:"100%",height:"100%"}},r.a.createElement("div",{className:"DebugBox1"},r.a.createElement("ul",null,m.map(function(e){return r.a.createElement("li",{key:e?e[1]:""},e||"free")}))))};a(120);function F(e){var t=Object(f.useGlobal)("debug"),a=Object(s.a)(t,2)[1],o=Object(n.useState)(!0),c=Object(s.a)(o,2),i=c[0],l=c[1],u=Object(A.b)(function(){return{xy:[0,0]}}),d=Object(s.a)(u,2),b=d[0].xy,g=d[1],m=Object(n.useRef)(),p=function(){a(["toggle from: "+i+" "+m.current.offsetWidth,2]),g({xy:i?[m.current.offsetWidth,0]:[0,0],immediate:!1}),l(function(e){return!e})};Object(n.useEffect)(function(){a(["visible: "+i,1])},[i]),Object(n.useEffect)(function(){setTimeout(p,1e3)},[]);var O=Object(M.a)({onDrag:function(e){var t=e.first,n=e.event,r=e.direction,o=e.velocity,c=e.down,s=e.delta,u=e.vxvy,f=e.temp,d=void 0===f?{initTarget:"",xy:b.getValue()}:f;if(t&&(d.initTarget=n.target.getAttribute("class")),"ControlPanel"==d.initTarget){if(c)g({xy:Object(L.add)(d.xy,s),immediate:!0});else if(u[0]>.2){Object(L.scale)(r,o);a(["visible: "+i,1]),g({xy:[m.current.offsetWidth,0],immediate:!1}),l(!1)}else g({xy:d.xy,immediate:!1});return d}}},{event:{passive:!1}});return r.a.createElement("div",null,r.a.createElement("img",{className:"Logo",draggable:"false",src:e.imageSrc,alt:"",onClick:p}),r.a.createElement(A.a.div,Object.assign({},O(),{ref:m,className:"ControlPanel",style:{transform:b.interpolate(function(e,t){return"translate3d(".concat(e,"px,0,0)")})}}),e.children))}a(61),a(283);var U=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],o=t[1],c=Object(f.useGlobal)("mission"),u=Object(s.a)(c,2),d=u[0];u[1];Object(n.useEffect)(function(){console.log("Mission changed to: "+d)},[d]);var m=Object(n.useState)(new Date("2014-04-10").getTime()),p=Object(s.a)(m,2),O=p[0],j=(p[1],Object(n.useState)(new Date("2019-12-31").getTime())),v=Object(s.a)(j,2),h=v[0],y=(v[1],Object(n.useState)(!0)),w=Object(s.a)(y,2),E=w[0],S=w[1];Object(b.a)("h",function(){S(function(e){return!e})}),Object(n.useEffect)(function(){var e=function(){return new Promise(function(e){setTimeout(function(){var t=Math.ceil(10*Math.random());console.log("mockApi done"),e(t)},2e3)})};function t(){return(t=Object(l.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=5;break}return t.next=3,e();case 3:t.sent,o(!0);case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){t.apply(this,arguments)}()},[]);var k=Object(n.useState)(!1),A=Object(s.a)(k,2),M=A[0],L=A[1],U=Object(C.a)(window.document.body),W=(U.isFullscreen,U.toggleFullscreen);return Object(b.a)("f",W),console.log("app renders"),r.a.createElement("div",{className:"App"},r.a.createElement(x.a,{enabled:M,onChange:function(){M||L(!1)}},r.a.createElement("div",{className:"DateTimeLabel"},r.a.createElement(I,{vertical:E})),r.a.createElement("div",{className:"ClockController"},r.a.createElement(g,{duration:"600000"})),r.a.createElement("div",{className:"Globe"},r.a.createElement(N,{id:"globe",starfield:"true",atmosphere:"true",clon:"0.5",clat:"40",names:"true"})),r.a.createElement("div",{className:E?"TimeSelectorv":"TimeSelectorh"},r.a.createElement(G,{min:O,max:h,vertical:E})),r.a.createElement("div",{className:"MissionLabel"},d),r.a.createElement(R,null),r.a.createElement(F,{active:"false",imageSrc:"./images/EOi_logo.png"},r.a.createElement(T,null),r.a.createElement(D,null)),r.a.createElement(_,{action:"Bonjour"}),r.a.createElement(P,null)))};var W=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function B(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}console.log("init global: "+(new Date).getTime()),Object(f.setGlobal)({appdate:(new Date).getTime()}),Object(f.setGlobal)({searchdate:(new Date).getTime()}),Object(f.setGlobal)({mission:"S1"}),Object(f.setGlobal)({searching:!1}),Object(f.setGlobal)({apppolygon:""}),Object(o.render)(r.a.createElement(U,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/reactwww",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/reactwww","/service-worker.js");W?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):B(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):B(e)})}}()}},[[102,1,2]]]);
//# sourceMappingURL=main.0d2ec3c7.chunk.js.map