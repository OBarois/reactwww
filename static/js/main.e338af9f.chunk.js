(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,a){e.exports=a(294)},118:function(e,t,a){},119:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},293:function(e,t,a){},294:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(107),c=a(17),i=a.n(c),s=a(26),l=a(1);var u=a(2),d=a.n(u),b=a(6);var f=a(39),p=a(15),m=a(4),g=a.n(m),O=a(7),j=a(13),h=a(10),v=a(9),y=a(11),E=g.a.PickedObject,w=g.a.SurfacePolygon;g.a.SurfaceShape,g.a.SurfacePolygon;function S(e){var t=e.id,a=e.clon,r=e.clat,o=e.alt,c=e.starfield,u=e.atmosphere,d=e.names,b=Object(n.useRef)(null),m=Object(n.useState)("3D"),O=Object(l.a)(m,2),j=(O[0],O[1]),h=Object(n.useState)(""),v=Object(l.a)(h,2),y=(v[0],v[1],Object(n.useState)([])),E=Object(l.a)(y,2),w=E[0],S=E[1],N=Object(n.useState)([]),T=Object(l.a)(N,2),D=(T[0],T[1],Object(n.useState)({latitude:r,longitude:a,altitude:o,aoi:"",pickedItems:[]})),k=Object(l.a)(D,2),C=k[0],A=k[1];function P(e){console.log(e.computeSectors(b.current.drawContext)),console.log(g.a.Sector.FULL_SPHERE);var t={service:"https://view.onda-dias.eu/instance00/ows",layerNames:"S1_IW_GRDH_FullResolution",title:"quicklook",numLevels:19,format:"image/png",size:256,sector:e.computeSectors(b.current.drawContext)[0],levelZeroDelta:new g.a.Location(90,90)},a=new g.a.WmsLayer(t,e.userProperties.date);b.current.addLayer(a),b.current.redraw(),console.log(b.current.layers)}function M(e){for(var t=0;t<b.current.layers.length;t++)if(b.current.layers[t].displayName===e)return b.current.layers[t];return null}function I(e){return x.apply(this,arguments)}function x(){return(x=Object(s.a)(i.a.mark(function e(t){var a,n,r,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(108e5,a=0;a<b.current.layers.length;a++){if(b.current.layers[a].displayName.includes("Products:"))for(n=0;n<b.current.layers[a].renderables.length;n++)r=b.current.layers[a].renderables[n],console.log("enabling"),0!=t?(o=new Date(r.userProperties.earthObservation.acquisitionInformation[0].acquisitionParameter.acquisitionStartTime).getTime(),c=new Date(r.userProperties.earthObservation.acquisitionInformation[0].acquisitionParameter.acquisitionStopTime).getTime(),r.enabled=o<=t+54e5&&c>=t-54e5):r.enabled=!1;b.current.layers[a].displayName}case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(){M("Quicklooks").removeAllRenderables(),b.current.redraw()}var G=function(){var e=b.current.navigator.lookAtLocation.longitude,t=b.current.navigator.lookAtLocation.latitude,a=b.current.navigator.range,n=a<2e6?function(){var e,t,a=b.current.viewport,n="";try{(e=b.current.pickTerrain(b.current.canvasCoordinates(a.x,a.y+a.height)).terrainObject().position).latitude=Math.round(1e4*e.latitude)/1e4,e.longitude=Math.round(1e4*e.longitude)/1e4}catch(r){e=null}try{(t=b.current.pickTerrain(b.current.canvasCoordinates(a.x+a.width,a.y)).terrainObject().position).latitude=Math.round(1e4*t.latitude)/1e4,t.longitude=Math.round(1e4*t.longitude)/1e4}catch(r){t=null}return null==e||null==t?n="":(e.longitude,e.latitude,t.longitude,t.latitude,n="POLYGON(("+e.longitude+" "+e.latitude+","+t.longitude+" "+e.latitude+","+t.longitude+" "+t.latitude+","+e.longitude+" "+t.latitude+","+e.longitude+" "+e.latitude+"))"),n}():"";A(function(r){return Object(f.a)({},r,{longitude:e,latitude:t,altitude:a,viewpolygon:n})})},R=function(e){var t=e.clientX,a=e.clientY,n=b.current.pick(b.current.canvasCoordinates(t,a));if(console.log(n),!n.terrainObject())return console.log("No position !"),void L();for(var r=0;r<b.current.layers.length;r++)if(b.current.layers[r].displayName.includes("Products:"))for(var o=0;o<b.current.layers[r].renderables.length;o++){b.current.layers[r].renderables[o].highlighted=!1}for(var c=[],i=0;i<n.objects.length;i++)n.objects[i].userObject instanceof g.a.SurfaceShape&&(c.push(n.objects[i].userObject),n.objects[i].userObject.highlighted=!n.objects[i].userObject.highlighted,L(),P(n.objects[i].userObject));console.log(c),A(function(e){return Object(f.a)({},e,{pickedItems:c})}),b.current.redraw()},_=function(e){console.log("double click");var t,a=e.clientX,n=e.clientY,r=b.current.pick(b.current.canvasCoordinates(a,n));if(r.terrainObject()){var o="POINT("+(t=r.terrainObject().position).longitude+" "+t.latitude+")";A(function(e){return Object(f.a)({},e,{aoi:o})})}else console.log("No position !"),A(function(e){return Object(f.a)({},e,{aoi:""})})};return Object(n.useEffect)(function(){console.log("useEffect (mount) in Eww  star/atmo: "+c+"/"+u),b.current=new g.a.WorldWindow(t),b.current.redrawCallbacks.push(G),g.a.BasicWorldWindowController.prototype.applyLimits=function(){b.current.navigator.range=g.a.WWMath.clamp(b.current.navigator.range,2e3,3e8)};var e=new g.a.ClickRecognizer(b.current,R);e.numberOfClicks=1;var n=new g.a.ClickRecognizer(b.current,_);n.numberOfClicks=2,n.recognizeSimultaneouslyWith(e),n.maxClickInterval=200;var i=new g.a.TapRecognizer(b.current,R);i.numberOfTaps=1;var s=new g.a.TapRecognizer(b.current,_);s.numberOfTaps=2,s.recognizeSimultaneouslyWith(i),s.maxTapInterval=200;var l={service:"https://tiles.maps.eox.at/wms",layerNames:"s2cloudless-2018",title:"s2cloudless-2018",numLevels:19,format:"image/png",size:256,sector:g.a.Sector.FULL_SPHERE,levelZeroDelta:new g.a.Location(90,90)},f={service:"https://tiles.maps.eox.at/wms",layerNames:"overlay_bright",title:"overlay_bright",numLevels:19,format:"image/png",size:256,sector:g.a.Sector.FULL_SPHERE,levelZeroDelta:new g.a.Location(90,90)};g.a.configuration.baseUrl=g.a.configuration.baseUrl.slice(0,-3);for(var p=new g.a.StarFieldLayer,m=new g.a.AtmosphereLayer("images/BlackMarble_2016_01deg.jpg"),O=new g.a.RenderableLayer("Quicklooks"),j=[{layer:new g.a.WmsLayer(l,""),enabled:!0},{layer:new g.a.WmsLayer(f,"Names"),enabled:d},{layer:p,enabled:c},{layer:m,enabled:u},{layer:O,enabled:!0}],h=0;h<j.length;h++)j[h].layer.enabled=j[h].enabled,b.current.addLayer(j[h].layer);p.time=new Date,m.time=new Date,setTimeout(function(){b.current.goToAnimator.travelTime=1e3,b.current.goTo(new g.a.Position(r,a,o)),b.current.redraw()},2e3),b.current.redraw(),b.current.deepPicking=!0},[]),{ewwstate:C,removeGeojson:function(){for(var e=0;e<w.length;e++)b.current.removeLayer(w[e]);S(function(e){return[]}),b.current.redraw()},addGeojson:function(e,t){var a=new g.a.RenderableLayer("Products: "+e.properties.updated+Math.ceil(1e4*Math.random()));b.current.addLayer(a),new g.a.GeoJSONParser(e).load(function(){console.log(a),S(function(e){return[].concat(Object(p.a)(e),[a])}),I(t),b.current.redraw()},function(e,t){var a={};a.userProperties=t;var n=t.name||t.Name||t.NAME;n&&(a.name=n);var r=new g.a.PlacemarkAttributes(null);return r.imageScale=10,r.imageColor=new g.a.Color(0,1,1,.2),r.labelAttributes.offset=new g.a.Offset(g.a.OFFSET_FRACTION,5,g.a.OFFSET_FRACTION,5),e.isPointType()||e.isMultiPointType()?a.attributes=new g.a.PlacemarkAttributes(r):e.isLineStringType()||e.isMultiLineStringType()?(a.attributes.drawOutline=!0,a.attributes.outlineColor=new g.a.Color(.1*a.attributes.interiorColor.red,.3*a.attributes.interiorColor.green,.7*a.attributes.interiorColor.blue,1),a.attributes.outlineWidth=1):(e.isPolygonType()||e.isMultiPolygonType())&&(a.attributes=new g.a.ShapeAttributes(null),a.attributes.interiorColor=new g.a.Color(1,0,0,.2),a.attributes.outlineColor=new g.a.Color(1,0,0,.3),a.highlightAttributes=new g.a.ShapeAttributes(a.attributes),a.highlightAttributes.outlineColor=new g.a.Color(1,0,0,.4),a.highlightAttributes.interiorColor=new g.a.Color(1,0,0,0)),a},a)},addWMS:function(){},toggleStarfield:function(){console.log("toggleStarfield");var e=M("StarField");e.enabled=!e.enabled,b.current.redraw()},toggleAtmosphere:function(){console.log("toggleAtmosphere");var e=M("Atmosphere");e.enabled=!e.enabled,b.current.redraw()},setTime:function(e){M("StarField").time=new Date(e),M("Atmosphere").time=new Date(e),I(e),b.current.redraw()},toggleProjection:function(){j(function(e){console.log("prevProjection: "+e);var t=["3D","Equirectangular","Mercator"],a=(t.indexOf(e)+1)%t.length;switch(console.log("newProjection: "+t[a]),t[a]){case"3D":b.current.globe.projection=new g.a.ProjectionWgs84;break;case"Equirectangular":b.current.globe.projection=new g.a.ProjectionEquirectangular;break;case"Mercator":b.current.globe.projection=new g.a.ProjectionMercator;break;case"North Polar":b.current.globe.projection=new g.a.ProjectionPolarEquidistant("North");break;case"South Polar":b.current.globe.projection=new g.a.ProjectionPolarEquidistant("South");break;default:b.current.globe.projection=new g.a.ProjectionWgs84}return b.current.redraw(),t[a]})},toggleNames:function(){console.log("toggleNames");var e=M("overlay_bright");e.enabled=!e.enabled,b.current.redraw()}}}var N=a(69),T=a.n(N);function D(e){function t(e){function t(e){for(var t={},a=0;a<e.length;a++)t[e[a].name]=e[a].content;return t}try{var a={};e.date&&Object.assign(a,t(e.date)),e.int&&Object.assign(a,t(e.int)),e.double&&Object.assign(a,t(e.double)),e.str&&Object.assign(a,t(e.str));var n,r=a.size.split(" ");switch(r[1]){case"B":n=Math.round(parseFloat(r[0]));break;case"MB":n=Math.round(1024*parseFloat(r[0]));break;case"GB":n=Math.round(1024*parseFloat(r[0])*1024);break;case"TB":n=Math.round(1024*parseFloat(r[0])*1024*1024);break;default:n=Math.round(parseFloat(r[0]))}return{id:e.title,geometry:T()(a.footprint),type:"Feature",properties:{updated:new Date(a.ingestiondate),title:e.title,name:e.title,uuid:e.id,date:a.beginposition+"/"+a.endposition,downloadUrl:e.link[0].href,quicklookUrl:e.link.length>=2?e.link[2].href:null,earthObservation:{parentIdentifier:"",status:"ARCHIVED",acquisitionInformation:[{platform:{platformShortName:a.platformname,platformSerialIdentifier:a.platformserialidentifier},sensor:{instrument:a.instrumentshortname,operationalMode:a.sensoroperationalmode},acquisitionParameter:{acquisitionStartTime:new Date(a.beginposition),acquisitionStopTime:new Date(a.endposition),relativePassNumber:parseInt(a.relativeorbitnumber),orbitNumber:parseInt(a.orbitnumber),startTimeFromAscendingNode:null,stopTimeFromAscendingNode:null,orbitDirection:a.orbitdirection}}],productInformation:{productType:a.producttype,size:n}}}}}catch(o){return console.log("error parsing item from dhus: "+o.message),{}}}var a=[];try{e.feed.entry?Array.isArray(e.feed.entry)?(console.log("entry is an  array"),a=e.feed.entry.map(function(e){return t(e)}).filter(function(e){return e!=={}})):a=[t(e.feed.entry)]:a=[]}catch(n){console.log(e),console.log("Error: "),console.log(n),a=[]}return{type:"FeatureCollection",id:"search",properties:{totalResults:e.feed["opensearch:totalResults"],startIndex:e.feed["opensearch:startIndex"]?e.feed["opensearch:startIndex"]:1,itemsPerPage:e.feed["opensearch:itemsPerPage"],title:"DHuS search response",updated:new Date},features:a}}function k(e){var t=[];try{e.features?Array.isArray(e.features)&&(console.log("features is an  array"),t=e.features.map(function(e){return function(e){try{return{id:e.id,geometry:e.geometry,type:"Feature",properties:{updated:e.properties.updated,title:e.properties.title,name:e.title,uuid:e.properties.identifier,date:e.properties.date,downloadUrl:null,quicklookUrl:null,earthObservation:{parentIdentifier:e.properties.EarthObservation.metaDataProperty.EarthObservationMetaData.parentIdentifier,status:"ARCHIVED",acquisitionInformation:[{platform:{platformShortName:e.properties.EarthObservation.procedure.EarthObservationEquipment.platform.Platform.shortName,platformSerialIdentifier:null},sensor:{instrument:e.properties.EarthObservation.procedure.EarthObservationEquipment.instrument.Instrument.shortName,operationalMode:e.properties.EarthObservation.procedure.EarthObservationEquipment.sensor.Sensor.operationalMode},acquisitionParameter:{acquisitionStartTime:new Date(e.properties.EarthObservation.phenomenonTime.TimePeriod.beginPosition),acquisitionStopTime:new Date(e.properties.EarthObservation.phenomenonTime.TimePeriod.endPosition),relativePassNumber:null,orbitNumber:e.properties.EarthObservation.procedure.EarthObservationEquipment.acquisitionParameters.Acquisition.orbitNumber,startTimeFromAscendingNode:null,stopTimeFromAscendingNode:null,orbitDirection:e.properties.EarthObservation.procedure.EarthObservationEquipment.acquisitionParameters.Acquisition.orbitDirection}}],productInformation:{productType:e.properties.EarthObservation.metaDataProperty.EarthObservationMetaData.productType,size:null}}}}}catch(t){return console.log("error parsing item from dhus: "+t.message),{}}}(e)}).filter(function(e){return e!=={}})):t=[]}catch(a){console.log(e),console.log("Error: "),console.log(a),t=[]}return{type:"FeatureCollection",id:"search",properties:{totalResults:e.properties.totalResults,startIndex:e.properties.startIndex,itemsPerPage:e.properties.itemsPerPage,title:e.properties.title,updated:e.properties.updated},features:t}}var C=a(28),A=a.n(C);function P(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(null),c=Object(l.a)(o,2),d=c[0],f=c[1],p=Object(n.useState)(!1),m=Object(l.a)(p,2),g=m[0],O=m[1],j=Object(u.useGlobal)("searchepoch"),h=Object(l.a)(j,1)[0],v=Object(u.useGlobal)("startend"),y=Object(l.a)(v,1)[0],E=Object(u.useGlobal)("mission"),w=Object(l.a)(E,1)[0],S=Object(u.useGlobal)("apppolygon"),N=Object(l.a)(S,1)[0],T=Object(u.useGlobal)("gosearch"),C=Object(l.a)(T,2),A=C[0],P=(C[1],function(){var e=Object(u.useGlobal)("searchepoch"),t=Object(l.a)(e,1)[0],a=Object(u.useGlobal)("startend"),r=Object(l.a)(a,2),o=r[0],c=r[1],i=Object(u.useGlobal)("apppolygon"),s=Object(l.a)(i,1)[0],d=Object(u.useGlobal)("mission"),f=Object(l.a)(d,1)[0],p=Object(u.useGlobal)("replace"),m=Object(l.a)(p,2),g=(m[0],m[1]),O=Object(u.useGlobal)("gosearch"),j=Object(l.a)(O,2),h=(j[0],j[1]),v=Object(n.useState)(864e5),y=Object(l.a)(v,2),E=y[0],w=(y[1],Object(n.useState)([])),S=Object(l.a)(w,2),N=S[0],T=S[1],D=Object(n.useState)(0),k=Object(l.a)(D,2),C=k[0],A=k[1];return Object(b.a)("z",function(){return A(function(e){return e+1})}),Object(n.useEffect)(function(){console.log("apppolygon: "+s),A(function(e){return e+1})},[s,f]),Object(n.useEffect)(function(){console.log("cleaning searches: "+C),C&&(g(function(e){return e+1}),T([]),h(Math.random))},[C]),Object(n.useEffect)(function(){var e=new Date(t);console.log("searchepoch: "+e.toJSON());var a=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())),n=new Date(a.getTime()).toJSON(),r=new Date(a.getTime()+E-1e3).toJSON();console.log("new start/end: "+n+"/ "+r);var o=N;o.indexOf(n)<0?(o.push(n),o.length>5&&console.log("should now remove geojson layer"),T(o),c({start:n,end:r}),h(Math.random)):console.log("Search already done !")},[t]),[o]}()),M=(Object(l.a)(P,1)[0],Object(n.useState)(null)),I=Object(l.a)(M,2),x=I[0],L=I[1];return Object(n.useEffect)(function(){var e=function(){var t=Object(s.a)(i.a.mark(function t(a,n){var r,o,c,s,l;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return O(!0),r=(r=a).replace("{startindex}",n),console.log("Search: "+r),o={totalresults:0,startindex:0,itemsperpage:0},t.prev=5,t.next=8,fetch(r,{mode:"cors",credentials:"include"});case 8:return c=t.sent,t.prev=9,t.next=12,c.json();case 12:s=t.sent,l="ENVISAT"===w?k(s):D(s),o={totalresults:null==l.properties.totalResults?0:Number(l.properties.totalResults),startindex:Number(l.properties.startIndex),itemsperpage:Number(l.properties.itemsPerPage)},console.log(o),o.totalresults>0&&f(l),o.startindex+o.itemsperpage<Math.min(o.totalresults,13e3)?(console.log("There's More..."),e(a,o.startindex+o.itemsperpage)):O(!1),t.next=25;break;case 20:t.prev=20,t.t0=t.catch(9),console.log("Didn't recieve a json !"),console.log(t.t0),O(!1);case 25:t.next=32;break;case 27:t.prev=27,t.t1=t.catch(5),console.log("Error contacting server..."),console.log(t.t1),O(!1);case 32:case"end":return t.stop()}},t,null,[[5,27],[9,20]])}));return function(e,a){return t.apply(this,arguments)}}();x&&e(x,a[w].startIndexOrigin)},[x]),Object(n.useEffect)(function(){console.log("DataHub ready. "+w);var e=[];[{code:"S1",templateUrl:'https://131.176.236.55/dhus/search?q=( footprint:"Intersects({polygon})" AND beginposition:[{start} TO {end}] AND platformname:Sentinel-1 AND producttype:GRD)&start={startindex}&rows=100&sortedby=beginposition&order=desc&format=json',name:"Sentinel-1 A/B GRD",startIndexOrigin:0,dateOff:" beginposition:[{start} TO {end}] AND",areaOff:' footprint:"Intersects({polygon})" AND'},{code:"S2A",templateUrl:'https://131.176.236.55/dhus/search?q=( footprint:"Intersects({polygon})" AND beginposition:[{start} TO {end}] AND platformname:Sentinel-2 AND filename:S2A_MSIL1C*)&start={startindex}&rows=100&sortedby=beginposition&order=desc&format=json',name:"Sentinel-2 A/B Level 1C",startIndexOrigin:0,dateOff:" beginposition:[{start} TO {end}] AND",areaOff:' footprint:"Intersects({polygon})" AND'},{code:"S2B",templateUrl:'https://131.176.236.55/dhus/search?q=( footprint:"Intersects({polygon})" AND beginposition:[{start} TO {end}] AND platformname:Sentinel-2 AND filename:S2B_MSIL1C*)&start={startindex}&rows=100&sortedby=beginposition&order=desc&format=json',name:"Sentinel-2 A/B Level 1C",startIndexOrigin:0,dateOff:" beginposition:[{start} TO {end}] AND",areaOff:' footprint:"Intersects({polygon})" AND'},{code:"S3",templateUrl:'https://131.176.236.55/dhus/search?q=( footprint:"Intersects({polygon})" AND beginposition:[{start} TO {end}] AND platformname:Sentinel-3 AND (producttype:OL_1_ERR___ OR producttype:SL_1_RBT___ OR producttype:SR_1_SRA___))&start={startindex}&rows=100&sortedby=beginposition&order=desc&format=json',name:"Sentinel-3 A/B, OLCI/SLSTR/SRAL",startIndexOrigin:0,dateOff:" beginposition:[{start} TO {end}] AND",areaOff:' footprint:"Intersects({polygon})" AND'},{code:"S5P",templateUrl:'https://s5phub.copernicus.eu/dhus/search?q=( footprint:"Intersects({polygon})" AND beginposition:[{start} TO {end}] AND platformname:Sentinel-5 precursor AND (producttype:L1B_RA_BD1 OR (producttype:L2__NO2___ AND processingmode:Near real time)))&start={startindex}&rows=100&sortedby=beginposition&order=desc&format=json',name:"Sentinel-1 A/B",startIndexOrigin:0,dateOff:" beginposition:[{start} TO {end}] AND",areaOff:' footprint:"Intersects({polygon})" AND'},{code:"ENVISAT",templateUrl:"https://eocat.esa.int/api/catalogue/EOCAT-ENVISAT.ASA.IMP_1P/search?start={start}&stop={end}&format=json&count=50&startIndex={startindex}",startIndexOrigin:1,name:"Sentinel-1 A/B",dateOff:" beginposition:[{start} TO {end}]",areaOff:' footprint:"Intersects({polygon})"'}].map(function(t){e[t.code]=t}),r(e)},[]),Object(n.useEffect)(function(){if(console.log("mission: "+w),console.log("mission: "+w+" start/end: "+y.start+"/"+y.end+" apppolygon: "+N),w&&h)try{var e=function(e){var t=e.code,n=e.polygon,r=e.start,o=e.end,c=(e.startindex,a[t]),i=c.templateUrl;return i=n.length>0?(i=i.replace("{polygon}",n)).replace(c.dateOff,""):(i=(i=i.replace(c.areaOff,"")).replace("{start}",r)).replace("{end}",o)}({code:w,polygon:N,start:y.start,end:y.end});L(e)}catch(t){console.log("Not a JULIAN date !"),console.log(t)}},[A,w,N,y.start]),{geojsonResults:d,loading:g}}function M(e){var t=e.id,a=e.clat,n=e.clon,r=e.alt,o=e.starfield,c=e.atmosphere,i=e.names,s=S({id:t,clat:a,clon:n,alt:r,starfield:o,atmosphere:c,names:i}),f=s.ewwstate,p=s.addGeojson,m=s.removeGeojson,g=(s.addWMS,s.toggleProjection),O=s.toggleAtmosphere,j=s.toggleStarfield,h=s.toggleNames,v=s.setTime;Object(b.a)("p",g),Object(b.a)("a",O),Object(b.a)("s",j),Object(b.a)("n",h),Object(b.a)("c",m);var y=P(),E=y.geojsonResults,w=y.loading,N=Object(u.useGlobal)("searchepoch"),T=(Object(l.a)(N,1)[0],Object(u.useGlobal)("startend")),D=(Object(l.a)(T,1)[0],Object(u.useGlobal)("replace")),k=Object(l.a)(D,1)[0],C=Object(u.useGlobal)("mission"),A=(Object(l.a)(C,1)[0],Object(u.useGlobal)("appdate")),M=Object(l.a)(A,1)[0],I=Object(u.useGlobal)("appstarfield"),x=Object(l.a)(I,2),L=x[0],G=x[1],R=Object(u.useGlobal)("appatmosphere"),_=Object(l.a)(R,2),F=_[0],q=_[1],U=Object(u.useGlobal)("appnames"),W=Object(l.a)(U,2),B=W[0],z=W[1],H=Object(u.useGlobal)("searching"),Y=Object(l.a)(H,2)[1],J=Object(u.useGlobal)("appaltitude"),V=Object(l.a)(J,2)[1],X=Object(u.useGlobal)("applatitude"),Q=Object(l.a)(X,2)[1],Z=Object(u.useGlobal)("applongitude"),K=Object(l.a)(Z,2)[1],$=Object(u.useGlobal)("apppolygon"),ee=Object(l.a)($,2),te=(ee[0],ee[1]),ae=Object(u.useGlobal)("apppickeditems"),ne=Object(l.a)(ae,2),re=(ne[0],ne[1]);Object(u.useEffect)(function(){if(E){console.log("datahub in use"),console.log(E);try{p(E,M)}catch(e){console.log("error on geojson parsing"),console.log(e)}}},[E]),Object(u.useEffect)(function(){console.log("replace: "+k),m()},[k]),Object(u.useEffect)(function(){O(F)},[F]),Object(u.useEffect)(function(){j(L)},[L]),Object(u.useEffect)(function(){h(B)},[B]),Object(u.useEffect)(function(){Y(w)},[w]),Object(u.useEffect)(function(){V(f.altitude),K(f.longitude),Q(f.latitude)},[f.longitude,f.latitude,f.altitude]),Object(u.useEffect)(function(){te(f.aoi)},[f.aoi]),Object(u.useEffect)(function(){re(f.pickedItems)},[f.pickedItems]),Object(u.useEffect)(function(){v(M)},[M]),Object(u.useEffect)(function(){q(c),G(o),z(i)},[]);return d.a.createElement("canvas",{id:t,style:{background:"inherit",position:"fixed",width:"inherit",height:"inherit"}})}a(118);var I=function(){var e=Object(u.useGlobal)("mission"),t=Object(l.a)(e,2),a=(t[0],t[1]);return Object(b.a)("1",function(){a("S1")}),Object(b.a)("2",function(){a("S2A")}),Object(b.a)("3",function(){a("S3")}),Object(b.a)("5",function(){a("S5P")}),Object(b.a)("6",function(){a("ENVISAT")}),r.a.createElement("div",{className:"MissionSelector"},r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s1_black.png",alt:"",onClick:function(){return a("S1")}})),r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s2_black.png",alt:"",onClick:function(){return a("S2A")}})),r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s2_black.png",alt:"",onClick:function(){return a("S2B")}})),r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s3_black.png",alt:"",onClick:function(){return a("S3")}})),r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s5p_black.png",alt:"",onClick:function(){return a("S5P")}})),r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s5p_black.png",alt:"",onClick:function(){return a("ENVISAT")}})))};a(119);var x=function(){var e=Object(u.useGlobal)("appatmosphere"),t=Object(l.a)(e,2),a=t[0],n=t[1],r=Object(u.useGlobal)("appstarfield"),o=Object(l.a)(r,2),c=o[0],i=o[1],s=Object(u.useGlobal)("appnames"),b=Object(l.a)(s,2),f=b[0],p=b[1];return d.a.createElement("div",{className:"MapSelector"},d.a.createElement("div",{className:"CircleButton"},d.a.createElement("img",{className:"MapIcon",draggable:"false",src:"./images/atmosphere.png",alt:"",onClick:function(){return n(!a)}})),d.a.createElement("div",{className:"CircleButton"},d.a.createElement("img",{className:"MapIcon",draggable:"false",src:"./images/starfield.png",alt:"",onClick:function(){return i(!c)}})),d.a.createElement("div",{className:"CircleButton"},d.a.createElement("img",{className:"MapIcon",draggable:"false",src:"./images/names.png",alt:"",onClick:function(){return p(!f)}})))},L=a(108),G=a.n(L),R=a(109),_=(a(122),a(21)),F=a(34),q=(a(123),a(14));a(124);a(125);a(126);var U=function(){var e=Object(u.useGlobal)("appaltitude"),t=Object(l.a)(e,1)[0],a=Object(u.useGlobal)("apppickeditems"),n=Object(l.a)(a,2),r=n[0],o=(n[1],Object(u.useState)([])),c=Object(l.a)(o,2),i=c[0],s=c[1],f=Object(u.useState)(!1),p=Object(l.a)(f,2),m=p[0],g=p[1];return Object(b.a)("q",function(){g(function(e){return!e})}),Object(u.useEffect)(function(){s(r)},[r]),d.a.createElement("div",{className:"MapStateLabel"},d.a.createElement("div",{style:{fontSize:10}},i.map(function(e){return d.a.createElement("div",{className:"metadata",key:e.userProperties.name},e.userProperties.name,d.a.createElement("img",{className:"Quicklook",style:{display:m?"inline":"none"},src:e.userProperties.quicklookUrl,alt:""}))})),d.a.createElement("div",null,Math.ceil(t/1e3)+" Km"))};a(127);var W=function(e){var t=e.date,a=e.highlight,n=e.animated;return r.a.createElement("div",{className:"LabelContainer"},r.a.createElement("div",{className:"Date"},r.a.createElement("div",{className:"day"===a||"none"===a?"DayLabel":"DayLabel Greyedout",key:"day"},A()(t,"UTC:dd")),r.a.createElement("div",{className:"YearMonth"},r.a.createElement("div",{className:"month"===a||"none"===a?"MonthLabel ":"MonthLabel  Greyedout",key:"month"},A()(t,"UTC:mmm").toUpperCase()),r.a.createElement("div",{className:"year"===a||"none"===a?"YearLabel ":"YearLabel Greyedout",key:"year"},t.getUTCFullYear()))),r.a.createElement("div",{className:n?"Line  Line-active":"Line",key:"line"}),r.a.createElement("div",{className:"time"===a||"none"===a?"TimeLabel ":"TimeLabel Greyedout",key:"time"},A()(t,"UTC:HH:MM:ss")))};a(128);var B=function(e){var t=e.startdate,a=e.onDateChange,o=function(e){var t=e.autoStart,a=(e.duration,e.initdate),r=Object(n.useState)(a),o=Object(l.a)(r,2),c=o[0],i=o[1],s=Object(n.useState)(!1),u=Object(l.a)(s,2),d=u[0],b=u[1],f=Object(n.useRef)(),p=Object(n.useRef)();p.current=200;var m=Object(n.useRef)(),g=Object(n.useRef)(),O=Object(n.useRef)();function j(){console.log("start clock"),f.current||(f.current=36e5),g.current=setInterval(function(){m.current+=f.current,i(new Date(m.current))},p.current),b(!0)}function h(){console.log("stop clock"),O.current&&clearTimeout(O.current),g.current&&clearInterval(g.current),b(!1)}return Object(n.useEffect)(function(){console.log("init start useclock "+a.toJSON()),d?(h(),m.current=a.getTime(),j()):m.current=a.getTime()},[a]),Object(n.useEffect)(function(){console.log("render useclock"),m.current=(new Date).getTime(),t&&j()},[]),{date:c,playing:d,togglePause:function(){d?h():j()},reset:function(){h(),m.current=(new Date).getTime(),i(new Date(m.current))},increaseSpeed:function(){f.current=f.current>0?f.current*=2:f.current/=2,Math.abs(f.current)<p.current&&(f.current=p.current),console.log("step: "+f.current)},decreaseSpeed:function(){f.current=f.current>0?f.current/=2:f.current*=2,Math.abs(f.current)<p.current&&(f.current=-1*p.current)},forceDate:function(e){console.log("forcedate useclock: "+e.toJSON()),d?(h(),m.current=e.getTime(),j()):m.current=e.getTime()}}}({autoStart:!1,duration:6e5,initdate:t}),c=o.date,i=o.togglePause,s=o.reset,u=o.increaseSpeed,d=o.decreaseSpeed;Object(b.a)("t",i),Object(b.a)("r",function(){s()}),Object(b.a)(".",u),Object(b.a)(",",d),Object(n.useEffect)(function(){a(c)},[c]),Object(n.useEffect)(function(){},[t]);var f=Object(n.useState)(),p=Object(l.a)(f,2),m=p[0],g=p[1];return r.a.createElement("div",{className:"DateController",onClick:function(){var e=Date.now();m&&e-m<300?s():(g(e),i())}})};a(72);var z=function(e){var t=e.date,a=e.zoomfactor,o=e.immediate,c=Object(n.useRef)(),i=Object(n.useState)(t),s=Object(l.a)(i,2),u=(s[0],s[1],Object(n.useState)(!1)),d=Object(l.a)(u,2),b=(d[0],d[1],Object(n.useState)("")),f=Object(l.a)(b,2),p=f[0],m=f[1],g=function(e,t){if(c.current){for(var a,n,o,i=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],s=0,l=0,u=0,d=0,b=0,f=[],p=t<2592e7,m=t<432e6,g=t<72e5,O=t<12e5,j=t<48e4,h=0;h<c.current.offsetHeight;h+=1){var v=new Date((h-c.current.offsetHeight/2)*t+e.getTime());a=v.getUTCDate(),n=i[v.getUTCMonth()],o=v.getUTCHours(),s=v.getUTCFullYear(),O?o!=b&&(0==o||o%2!=0&&!j?0==o&&(f.push({class:"DayTic",pos:h,label:a}),f.push({class:"MonthTic",pos:h,label:n}),f.push({class:"YearTic",pos:h,label:s})):f.push({class:"HourTic",pos:h,label:o})):g?a!==l&&(1!=a?f.push({class:"DayTic",pos:h,label:a}):(f.push({class:"DayTic",pos:h,label:a}),f.push({class:"MonthTic",pos:h,label:n}),f.push({class:"YearTic",pos:h,label:s}))):m?n!==u&&0!=l&&m&&("JAN"!==n?f.push({class:"MonthTic",pos:h,label:n}):(f.push({class:"MonthTic",pos:h,label:n}),f.push({class:"YearTic",pos:h,label:s}))):p&&s!==d&&0!==u&&("JAN"!==n?f.push({class:"MonthTic",pos:h,label:n}):f.push({class:"YearTic",pos:h,label:s})),l=a,d=s,u=n,b=o}return f.map(function(e){return r.a.createElement("div",{className:e.class,key:e.class+e.pos,style:{top:e.pos}},e.label)})}},O=Object(_.b)(function(){return{dater:t.getTime(),zoomer:a}}),j=Object(l.a)(O,2),h=j[0],v=h.dater,y=h.zoomer,E=j[1];return Object(n.useLayoutEffect)(function(){E({to:{zoomer:a,dater:t.getTime()},config:{duration:400},immediate:!1,onFrame:function(){m(g(new Date(v.value),y.value))}})},[a]),Object(n.useLayoutEffect)(function(){E({to:{zoomer:a,dater:t.getTime()},config:{duration:400},immediate:o,onFrame:function(){m(g(new Date(v.value),y.value))}})},[t]),r.a.createElement(_.a.div,{ref:c,className:"DateSelectorScale"},p)};var H=function(e){var t=e.startdate,a=e.onDateChange,o=e.onFinalDateChange,c=[36e5,864e5,1296e6],i=[36e5,6e5,108e3,27e3,864e5],s=Object(n.useRef)(),u=Object(n.useRef)();u.current||(u.current=[0,0]),Object(n.useRef)();var d=Object(n.useRef)(),b=Object(n.useState)(t),f=Object(l.a)(b,2),p=f[0],m=f[1],g=Object(n.useState)(t),O=Object(l.a)(g,2),j=O[0],h=O[1],v=Object(n.useState)(t),y=Object(l.a)(v,2),E=y[0],w=y[1],S=Object(n.useState)(!1),N=Object(l.a)(S,2),T=N[0],D=N[1],k=Object(n.useState)(c[0]),C=Object(l.a)(k,2),A=C[0],P=C[1],M=Object(n.useState)(A),I=Object(l.a)(M,2),x=(I[0],I[1],Object(n.useState)(!1)),L=Object(l.a)(x,2),G=(L[0],L[1],Object(_.b)(function(){return{xy:[0,0]}})),R=Object(l.a)(G,2),U=R[0].xy,W=R[1];d.current||(d.current=t);var B=Object(F.a)({onDrag:function(e){var t,n,r=e.event,l=e.first,b=e.down,f=e.delta,g=e.velocity,O=e.direction,j=e.temp,v=void 0===j?{xy:U.getValue(),laststeparea:0,deltaoffset:[0,0]}:j,y=s.current.parentElement.offsetWidth-(r.pageX?r.pageX:s.current.parentElement.offsetWidth);return(r.pageY?r.pageY:s.current.parentElement.offsetHeight)-s.current.offsetHeight/2>0?(t=Math.min(c.length-1,Math.floor((y-s.current.offsetWidth)/60+1)),n=c[t=(t=t>c.length-1?c.length:t)<0?0:t]):(t=Math.min(i.length-1,Math.floor((y-s.current.offsetWidth)/60+1)),n=i[t=(t=t>i.length-1?i.length:t)<0?0:t]),t!==v.laststeparea&&(P(n),w(p),v.laststeparea=t,v.xy=[0,0],v.deltaoffset=f),l&&D(!0),g=Math.abs(g)<.2?0:g,W({xy:Object(q.add)(Object(q.scale)(Object(q.add)(Object(q.sub)(f,v.deltaoffset),u.current),1),v.xy),immediate:b,config:{velocity:Object(q.scale)(O,1*g),decay:!0},onFrame:function(){var e=new Date(E.getTime()-U.getValue()[1]*A);a(e),m(e),h(e),d.current=e},onRest:function(){if(!b){D(!1);var e=new Date(E.getTime()-U.getValue()[1]*A);o(e),u.current=[0,0]}}}),v}});return Object(n.useEffect)(function(){T||(u.current[1]-=(t.getTime()-j.getTime())/A,m(t),h(t),a(t))},[t]),r.a.createElement(_.a.div,Object.assign({},B(),{className:"DateSelector",ref:s}),r.a.createElement("div",{className:"Mask"},r.a.createElement(z,{className:"scale",date:p,zoomfactor:A,immediate:T}),r.a.createElement("div",{className:"TriangleContainer"},r.a.createElement("svg",{height:"40",width:"20",className:"Triangle"},r.a.createElement("polygon",{points:"20,5 20,35 12,20"})))))};var Y=function(e){var t=e.startdate,a=e.onDateChange,o=e.onFinalDateChange,c=e.searching,i=Object(n.useState)(t),s=Object(l.a)(i,2),u=s[0],d=s[1],b=Object(n.useState)(t),f=Object(l.a)(b,2),p=f[0],m=f[1],g=Object(n.useState)(t),O=Object(l.a)(g,2),j=O[0],h=O[1];return Object(n.useEffect)(function(){d(t)},[t]),r.a.createElement("div",null,r.a.createElement(B,{startdate:p,onDateChange:function(e){d(e)}}),r.a.createElement(W,{date:j,highlight:"none",animated:c}),r.a.createElement(H,{startdate:u,onDateChange:function(e){h(e),a(e)},onFinalDateChange:function(e){m(e),o(e)}}))};a(129);var J=function(){var e=Object(u.useGlobal)("debug"),t=Object(l.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),i=Object(l.a)(c,2),s=i[0],d=i[1],f=Object(n.useState)([]),p=Object(l.a)(f,2),m=p[0],g=p[1];return Object(b.a)("d",function(){d(function(e){return!e})}),Object(n.useEffect)(function(){console.log("Debug Overlay Key: d")},[]),Object(n.useEffect)(function(){if(s){console.log("debug txt: "),console.log(a);var e=m;e[a[1]]=a[0],g(e),console.log(e)}},[a]),Object(n.useEffect)(function(){o(["Hi",0])},[]),r.a.createElement("div",{className:"Debug",style:{display:s?"inline":"none",width:"100%",height:"100%"}},r.a.createElement("div",{className:"DebugBox1"},r.a.createElement("ul",null,m.map(function(e){return r.a.createElement("li",{key:e?e[1]:""},e||"free")}))))};a(130);function V(e){var t=Object(u.useGlobal)("debug"),a=Object(l.a)(t,2)[1],o=Object(n.useState)(!0),c=Object(l.a)(o,2),i=c[0],s=c[1],d=Object(_.b)(function(){return{xy:[0,0]}}),b=Object(l.a)(d,2),f=b[0].xy,p=b[1],m=Object(n.useRef)(),g=function(){a(["toggle from: "+i+" "+m.current.offsetWidth,2]),p({xy:i?[m.current.offsetWidth,0]:[0,0],immediate:!1}),s(function(e){return!e})};Object(n.useEffect)(function(){a(["visible: "+i,1])},[i]),Object(n.useEffect)(function(){setTimeout(g,1e3)},[]);var O=Object(F.a)({onDrag:function(e){var t=e.first,n=e.event,r=e.direction,o=e.velocity,c=e.down,l=e.delta,u=e.vxvy,d=e.temp,b=void 0===d?{initTarget:"",xy:f.getValue()}:d;if(t&&(b.initTarget=n.target.getAttribute("class")),"ControlPanel"==b.initTarget){if(c)p({xy:Object(q.add)(b.xy,l),immediate:!0});else if(u[0]>.2){Object(q.scale)(r,o);a(["visible: "+i,1]),p({xy:[m.current.offsetWidth,0],immediate:!1}),s(!1)}else p({xy:b.xy,immediate:!1});return b}}},{event:{passive:!1}});return r.a.createElement("div",null,r.a.createElement("img",{className:"Logo",draggable:"false",src:e.imageSrc,alt:"",onClick:g}),r.a.createElement(_.a.div,Object.assign({},O(),{ref:m,className:"ControlPanel",style:{transform:f.interpolate(function(e,t){return"translate3d(".concat(e,"px,0,0)")})}}),e.children))}var X=a(110);a(293);var Q=function(){var e=Object(u.useGlobal)("appcolor"),t=Object(l.a)(e,2),a=t[0];return t[1],r.a.createElement("div",{className:"ColorSelector"},r.a.createElement(X.HuePicker,{color:a,onChangeComplete:function(e){document.documentElement.style.setProperty("--color",e.hex)}}))},Z=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],o=t[1],c=new Date,d=Object(n.useState)(c),f=Object(l.a)(d,1)[0],p=Object(u.useGlobal)("searching"),m=Object(l.a)(p,1)[0],g=Object(u.useGlobal)("appdate"),O=Object(l.a)(g,2),j=(O[0],O[1]),h=Object(u.useGlobal)("searchepoch"),v=Object(l.a)(h,2)[1],y=Object(u.useGlobal)("mission"),E=Object(l.a)(y,2),w=E[0];E[1];Object(n.useEffect)(function(){console.log("Mission changed to: "+w)},[w]);var S=Object(n.useState)(!0),N=Object(l.a)(S,2),T=(N[0],N[1]);Object(b.a)("h",function(){T(function(e){return!e})}),Object(n.useEffect)(function(){var e=function(){return new Promise(function(e){setTimeout(function(){var t=Math.ceil(10*Math.random());console.log("mockApi done"),e(t)},2e3)})};function t(){return(t=Object(s.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=5;break}return t.next=3,e();case 3:t.sent,o(!0);case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){t.apply(this,arguments)}()},[]);var D=Object(n.useState)(!1),k=Object(l.a)(D,2),C=k[0],A=k[1],P=Object(R.a)(window.document.body),L=(P.isFullscreen,P.toggleFullscreen);return Object(b.a)("f",L),r.a.createElement("div",{className:"App"},r.a.createElement(G.a,{enabled:C,onChange:function(){C||A(!1)}},r.a.createElement("div",{className:"Globe"},r.a.createElement(M,{id:"globe",starfield:"true",atmosphere:"true",clon:"0.5",clat:"40",names:"true"})),r.a.createElement(Y,{startdate:f,searching:m,onDateChange:function(e){j(e.getTime())},onFinalDateChange:function(e){v(e.getTime())}}),r.a.createElement("div",{className:"MissionLabel"},w),r.a.createElement(U,null),r.a.createElement(V,{active:"false",imageSrc:"./images/ESA_logo_white.png"},r.a.createElement(I,null),r.a.createElement(x,null),r.a.createElement(Q,null)),r.a.createElement(J,{action:"Bonjour"})))};var K=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function $(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}console.log("init global: "+(new Date).getTime()),Object(u.setGlobal)({appdate:(new Date).getTime(),searchepoch:(new Date).getTime(),mission:"S1",searching:!1,apppolygon:"",replace:!0,startend:{start:0,end:0},apppickeditems:[]}),Object(o.render)(r.a.createElement(Z,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/reactwww",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/reactwww","/service-worker.js");K?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):$(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):$(e)})}}()},72:function(e,t,a){}},[[111,1,2]]]);
//# sourceMappingURL=main.e338af9f.chunk.js.map