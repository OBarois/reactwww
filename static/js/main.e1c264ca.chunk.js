(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,a){e.exports=a(294)},118:function(e,t,a){},119:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},293:function(e,t,a){},294:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(107),i=a(23),c=a.n(i),s=a(32),l=a(1);var u=a(2),d=a.n(u),f=a(6);var b=a(39),p=a(4),m=a.n(p),g=a(7),h=a(13),O=a(10),j=a(9),v=a(11),y=m.a.PickedObject,E=m.a.SurfacePolygon,S=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(O.a)(this,Object(j.a)(t).call(this,e))).image=null,a.step=1,a.maxImageWidth=64,a.maxImageHeight=64,a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"renderToTexture",value:function(e,t,a,n,r,o){var i,c=this.highlighted&&this.highlightAttributes||this._attributes,s=!this._isInteriorInhibited&&c.drawInterior,l=c.drawOutline&&c.outlineWidth>0;if(s||l){if(e.pickingMode&&!this.pickColor&&(this.pickColor=e.uniquePickColor()),e.pickingMode&&(i=this.pickColor.toHexString()),this.crossesAntiMeridian||this.containsPole)s&&(this.draw(this._interiorGeometry,t,a,n,r,o),t.fillStyle=e.pickingMode?i:c.interiorColor.toCssColorString(),t.fill()),l&&(this.draw(this._outlineGeometry,t,a,n,r,o),t.lineWidth=c.outlineWidth,t.strokeStyle=e.pickingMode?i:c.outlineColor.toCssColorString(),t.stroke());else{this.image&&!e.pickingMode&&t.save();var u=this._interiorGeometry[0].map(function(e){return{x:e.longitude*a+r,y:e.latitude*n+o}});this.drawPoints(u,t),s&&(this.image&&!e.pickingMode?(t.clip(),this.drawImageToPolygon(t,this.image,u),t.restore()):(t.fillStyle=e.pickingMode?i:c.interiorColor.toCssColorString(),t.fill())),l&&(t.lineWidth=c.outlineWidth,t.strokeStyle=e.pickingMode?i:c.outlineColor.toCssColorString(),t.stroke())}if(e.pickingMode){var d=new y(this.pickColor.clone(),this.pickDelegate?this.pickDelegate:this,null,this.layer,!1);e.resolvePick(d)}}}},{key:"drawPoints",value:function(e,t){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var a=1,n=e.length;a<n;a++)t.lineTo(e[a].x,e[a].y)}},{key:"drawImageToPolygon",value:function(e,a,n){var r=e.canvas.width,o=e.canvas.height,i=t.offScreenCanvas(),c=t.offScreenCtx(),s=this.getCorners(n),l=this.getAxesDimensions(s),u=Math.min(l.distX,this.maxImageWidth),d=Math.min(l.distY,this.maxImageHeight);i.width=u,i.height=d,c.drawImage(a,0,0,u,d);for(var f,b,p,m,g,h,O,j,v=this.step,y=u-1,E=d-1,S=0;S<E;S+=v){g=this.lerp(s[0],s[3],S/E),h=this.lerp(s[1],s[2],S/E),O=this.lerp(s[0],s[3],(S+v)/E),j=this.lerp(s[1],s[2],(S+v)/E);for(var w=0;w<y;w+=v){f=this.lerp(g,h,w/y),b=this.lerp(g,h,(w+v)/y),p=this.lerp(O,j,(w+v)/y),m=this.lerp(O,j,w/y);var k=Math.ceil(Math.max(v,Math.abs(b.x-f.x),Math.abs(m.x-p.x)))+1,T=Math.ceil(Math.max(v,Math.abs(f.y-m.y),Math.abs(b.y-p.y)))+1;this.isRectInsideCanvas(f,k,T,r,o)&&e.drawImage(i,w,S,v,v,f.x,f.y,k,T)}}}},{key:"getCorners",value:function(e,t){var a=this;t=t||this.getBbox(e);var n=e.filter(function(e){return a.isEdgePoint(e,t)});if(5===n.length&&this.arePointsEqual(n[0],n[n.length-1])&&(n.length=4),n.length>4){var r=n.filter(function(e){return e.x===t.minX}),o=n.filter(function(e){return e.x===t.maxX}),i=this.getTopBottom(r),c=i.top,s=i.bottom,l=this.getTopBottom(o);return[c,l.top,l.bottom,s]}var u=this.getSlope(n[0],n[2]),d=this.getSlope(n[1],n[3]),f=this.getTopLeftPoint(u,n[0],n[2])||this.getTopLeftPoint(d,n[1],n[3]);if(!f)return console.log("Could not determine top left corner with the slope method"),n;for(var b=n.findIndex(function(e){return e.x===f.x&&e.y===f.y}),p=[],m=b;m<n.length+b;m++)p.push(n[m%n.length]);return p}},{key:"getBbox",value:function(e){var t={minX:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER};return e.reduce(function(e,t){return e.minX=Math.min(e.minX,t.x),e.maxX=Math.max(e.maxX,t.x),e.minY=Math.min(e.minY,t.y),e.maxY=Math.max(e.maxY,t.y),e},t)}},{key:"getTopBottom",value:function(e){return e.reduce(function(e,t){return t.y<e.top.y&&(e.top=t),t.y>e.bottom.y&&(e.bottom=t),e},{top:e[0],bottom:e[0]})}},{key:"distance",value:function(e,t){var a=e.x-t.x,n=e.y-t.y;return Math.sqrt(a*a+n*n)}},{key:"isEdgePoint",value:function(e,t){return e.x===t.minX||e.x===t.maxX||e.y===t.minY||e.y===t.maxY}},{key:"arePointsEqual",value:function(e,t){return e.x===t.x&&e.y===t.y}},{key:"getSlope",value:function(e,t){return(e.y-t.y)/(e.x-t.x)}},{key:"getTopLeftPoint",value:function(e,t,a){return e<=0?null:t.y<a.y?t:a}},{key:"getAxesDimensions",value:function(e){var t=0,a=0;return Math.abs(e[0].x-e[1].x)>Math.abs(e[0].y-e[1].y)?(t=this.distance(e[0],e[1]),a=this.distance(e[0],e[3])):(t=this.distance(e[0],e[3]),a=this.distance(e[0],e[1])),{distX:t,distY:a}}},{key:"lerp",value:function(e,t,a){return{x:e.x+(t.x-e.x)*a,y:e.y+(t.y-e.y)*a}}},{key:"isRectInsideCanvas",value:function(e,t,a,n,r){return e.x+t>=0&&e.x<=n&&e.y+a>=0&&e.y<r}},{key:"image",get:function(){return this._image},set:function(e){this._image=e,this.stateKeyInvalid=!0,this._stateId=E.stateId++}}],[{key:"offScreenCanvas",value:function(){return t.canvas||(t.canvas=document.createElement("canvas")),t.canvas}},{key:"offScreenCtx",value:function(){if(!t.ctx){var e=t.offScreenCanvas();t.ctx=e.getContext("2d")}return t.ctx}}]),t}(m.a.SurfaceShape),w=m.a.SurfacePolygon,k=function(e){function t(e,a){var n;if(Object(g.a)(this,t),n=Object(O.a)(this,Object(j.a)(t).call(this,a)),!Array.isArray(e))throw new Error("TexturedSurfacePolygon - constructor - The specified boundary is not an array.");return n.boundaries=e,n._stateId=w.stateId++,n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"computeStateKey",value:function(){return t.staticStateKey(this)}},{key:"computeBoundaries",value:function(e){}},{key:"boundaries",get:function(){return this._boundaries},set:function(e){if(!Array.isArray(e))throw new Error("TexturedSurfacePolygon - set boundaries - The specified boundary is not an array.");this.resetBoundaries(),this._boundaries=e,this._stateId=w.stateId++,this.stateKeyInvalid=!0}}],[{key:"staticStateKey",value:function(e){return w.staticStateKey(e)+" pg "+e._stateId}}]),t}(S);function T(e){var t=e.id,a=e.clon,r=e.clat,o=e.alt,i=e.starfield,c=e.atmosphere,s=e.names,u=Object(n.useRef)(null),d=Object(n.useState)("3D"),f=Object(l.a)(d,2),p=(f[0],f[1]),g=Object(n.useState)(""),h=Object(l.a)(g,2),O=(h[0],h[1],Object(n.useState)({latitude:r,longitude:a,altitude:o,aoi:"",pickedItems:[]})),j=Object(l.a)(O,2),v=j[0],y=j[1],E=Object(n.useRef)([]),S=Object(n.useRef)([]),w=Object(n.useRef)([]),T=Object(n.useState)([]),N=Object(l.a)(T,2),x=N[0],C=N[1],D=Object(n.useState)([]),A=Object(l.a)(D,2),M=A[0],I=A[1];function P(e){for(var t=0;t<u.current.layers.length;t++)if(console.log("display name: "+u.current.layers[t].displayName),u.current.layers[t].displayName===e)return u.current.layers[t];return null}function _(e){for(var t=0;t<E.current.length;t++)E.current[t].renderable.enabled=E.current[t].start>=e-54e5&&E.current[t].start<=e+54e5}function R(e){var t,a;(t=e.userProperties.quicklookUrl,a=!0,new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=function(e){n(e)},r.crossOrigin=a?"Use-Credentials":"Anonymous",r.src=t,console.log(" adding QL")})).then(function(t){var a=P("Quicklooks");L(),console.log(e.boundaries),console.log(e.boundingSector);var n=[e.boundaries[0][0],e.boundaries[0][3],e.boundaries[0][2],e.boundaries[0][1]];console.log(n);var r=new k(n,e.attributes);r.maxImageWidth=256,r.maxImageHeight=256,r.image=t,L(),a.addRenderable(r),u.current.redraw()})}function L(){P("Quicklooks").removeAllRenderables(),u.current.redraw()}var G=function(){var e=u.current.navigator.lookAtLocation.longitude,t=u.current.navigator.lookAtLocation.latitude,a=u.current.navigator.range,n=a<2e6?function(){var e,t,a=u.current.viewport,n="";try{(e=u.current.pickTerrain(u.current.canvasCoordinates(a.x,a.y+a.height)).terrainObject().position).latitude=Math.round(1e4*e.latitude)/1e4,e.longitude=Math.round(1e4*e.longitude)/1e4}catch(r){e=null}try{(t=u.current.pickTerrain(u.current.canvasCoordinates(a.x+a.width,a.y)).terrainObject().position).latitude=Math.round(1e4*t.latitude)/1e4,t.longitude=Math.round(1e4*t.longitude)/1e4}catch(r){t=null}return null==e||null==t?n="":(e.longitude,e.latitude,t.longitude,t.latitude,n="POLYGON(("+e.longitude+" "+e.latitude+","+t.longitude+" "+e.latitude+","+t.longitude+" "+t.latitude+","+e.longitude+" "+t.latitude+","+e.longitude+" "+e.latitude+"))"),n}():"";y(function(r){return Object(b.a)({},r,{longitude:e,latitude:t,altitude:a,viewpolygon:n})})},q=function(e){var t=e.clientX,a=e.clientY,n=u.current.pick(u.current.canvasCoordinates(t,a));if(console.log(n),!n.terrainObject())return console.log("No position !"),void L();for(var r=0;r<u.current.layers.length;r++)if(u.current.layers[r].displayName.includes("Products:"))for(var o=0;o<u.current.layers[r].renderables.length;o++){u.current.layers[r].renderables[o].highlighted=!1}for(var i=[],c=0;c<n.objects.length;c++)n.objects[c].userObject instanceof m.a.SurfaceShape&&(i.push(n.objects[c].userObject),n.objects[c].userObject.highlighted=!n.objects[c].userObject.highlighted,L(),R(n.objects[c].userObject));console.log(i),y(function(e){return Object(b.a)({},e,{pickedItems:i})}),u.current.redraw()},F=function(e){console.log("double click");var t,a=e.clientX,n=e.clientY,r=u.current.pick(u.current.canvasCoordinates(a,n));if(r.terrainObject()){var o="POINT("+(t=r.terrainObject().position).longitude+" "+t.latitude+")";y(function(e){return Object(b.a)({},e,{aoi:o})})}else console.log("No position !"),y(function(e){return Object(b.a)({},e,{aoi:""})})};return Object(n.useEffect)(function(){console.log("useEffect (mount) in Eww  star/atmo: "+i+"/"+c),u.current=new m.a.WorldWindow(t),u.current.redrawCallbacks.push(G),m.a.BasicWorldWindowController.prototype.applyLimits=function(){u.current.navigator.range=m.a.WWMath.clamp(u.current.navigator.range,2e3,3e8)};var e=new m.a.ClickRecognizer(u.current,q);e.numberOfClicks=1;var n=new m.a.ClickRecognizer(u.current,F);n.numberOfClicks=2,n.recognizeSimultaneouslyWith(e),n.maxClickInterval=200;var l=new m.a.TapRecognizer(u.current,q);l.numberOfTaps=1;var d=new m.a.TapRecognizer(u.current,F);d.numberOfTaps=2,d.recognizeSimultaneouslyWith(l),d.maxTapInterval=200;var f={service:"https://tiles.maps.eox.at/wms",layerNames:"s2cloudless-2018",title:"s2cloudless-2018",numLevels:19,format:"image/png",size:256,sector:m.a.Sector.FULL_SPHERE,levelZeroDelta:new m.a.Location(90,90)},b={service:"https://tiles.maps.eox.at/wms",layerNames:"overlay_bright",title:"overlay_bright",numLevels:19,format:"image/png",size:256,sector:m.a.Sector.FULL_SPHERE,levelZeroDelta:new m.a.Location(90,90)};m.a.configuration.baseUrl=m.a.configuration.baseUrl.slice(0,-3);for(var p=new m.a.StarFieldLayer,g=new m.a.AtmosphereLayer("images/BlackMarble_2016_01deg.jpg"),h=new m.a.RenderableLayer("Quicklooks"),O=[{layer:new m.a.WmsLayer(f,""),enabled:!0},{layer:new m.a.WmsLayer(b,"Names"),enabled:s},{layer:p,enabled:i},{layer:g,enabled:c},{layer:h,enabled:!0}],j=0;j<O.length;j++)O[j].layer.enabled=O[j].enabled,u.current.addLayer(O[j].layer);C(p),I(g),p.time=new Date,g.time=new Date,setTimeout(function(){u.current.goToAnimator.travelTime=1e3,u.current.goTo(new m.a.Position(r,a,o)),u.current.redraw()},2e3),u.current.redraw(),u.current.deepPicking=!0},[]),{ewwstate:v,removeGeojson:function(){console.log("removing geojson layers:");for(var e=0;e<w.current.length;e++)w.current[e].removeAllRenderables(),u.current.removeLayer(w.current[e]),console.log(w.current[e]);w.current=[],E.current=[],S.current=[],u.current.removeLayer(P("quicklook")),u.current.redraw()},removeQuicklooks:L,addGeojson:function(e,t){var a=new m.a.RenderableLayer("Products: "+e.properties.updated+Math.ceil(1e4*Math.random()));u.current.addLayer(a),new m.a.GeoJSONParser(e).load(function(){console.log(a),w.current.push(a);for(var e=E.current,n=0;n<a.renderables.length;n++)e.push({start:a.renderables[n].userProperties.earthObservation.acquisitionInformation[0].acquisitionParameter.acquisitionStartTime.getTime(),stop:a.renderables[n].userProperties.earthObservation.acquisitionInformation[0].acquisitionParameter.acquisitionStopTime.getTime(),renderable:a.renderables[n]}),a.renderables[n].enabled=!0;e.sort(function(e,t){return e.start-t.start}),E.current=e,console.log(e),_(t),u.current.redraw()},function(e,t){var a={};a.userProperties=t;var n=t.name||t.Name||t.NAME;n&&(a.name=n);var r=new m.a.PlacemarkAttributes(null);return r.imageScale=10,r.imageColor=new m.a.Color(0,1,1,.2),r.labelAttributes.offset=new m.a.Offset(m.a.OFFSET_FRACTION,5,m.a.OFFSET_FRACTION,5),e.isPointType()||e.isMultiPointType()?a.attributes=new m.a.PlacemarkAttributes(r):e.isLineStringType()||e.isMultiLineStringType()?(a.attributes.drawOutline=!0,a.attributes.outlineColor=new m.a.Color(.1*a.attributes.interiorColor.red,.3*a.attributes.interiorColor.green,.7*a.attributes.interiorColor.blue,1),a.attributes.outlineWidth=1):(e.isPolygonType()||e.isMultiPolygonType())&&(a.attributes=new m.a.ShapeAttributes(null),a.attributes.interiorColor=new m.a.Color(1,0,0,.2),a.attributes.outlineColor=new m.a.Color(1,0,0,.3),a.highlightAttributes=new m.a.ShapeAttributes(a.attributes),a.highlightAttributes.outlineColor=new m.a.Color(1,0,0,.4),a.highlightAttributes.interiorColor=new m.a.Color(1,0,0,0)),a},a)},addWMS:function(){},toggleStarfield:function(){console.log("toggleStarfield"),x.enabled=!x.enabled,u.current.redraw()},toggleAtmosphere:function(){console.log("toggleAtmosphere"),M.enabled=!M.enabled,u.current.redraw()},setTime:function(e){x.time=new Date(e),M.time=new Date(e),_(e),u.current.redraw()},toggleProjection:function(){p(function(e){console.log("prevProjection: "+e);var t=["3D","Equirectangular","Mercator"],a=(t.indexOf(e)+1)%t.length;switch(console.log("newProjection: "+t[a]),t[a]){case"3D":u.current.globe.projection=new m.a.ProjectionWgs84;break;case"Equirectangular":u.current.globe.projection=new m.a.ProjectionEquirectangular;break;case"Mercator":u.current.globe.projection=new m.a.ProjectionMercator;break;case"North Polar":u.current.globe.projection=new m.a.ProjectionPolarEquidistant("North");break;case"South Polar":u.current.globe.projection=new m.a.ProjectionPolarEquidistant("South");break;default:u.current.globe.projection=new m.a.ProjectionWgs84}return u.current.redraw(),t[a]})},toggleNames:function(){console.log("toggleNames");var e=P("overlay_bright");e.enabled=!e.enabled,u.current.redraw()}}}var N=a(69),x=a.n(N);function C(e){function t(e){function t(e){for(var t={},a=0;a<e.length;a++)t[e[a].name]=e[a].content;return t}try{var a={};e.date&&Object.assign(a,t(e.date)),e.int&&Object.assign(a,t(e.int)),e.double&&Object.assign(a,t(e.double)),e.str&&Object.assign(a,t(e.str));var n,r=a.size.split(" ");switch(r[1]){case"B":n=Math.round(parseFloat(r[0]));break;case"MB":n=Math.round(1024*parseFloat(r[0]));break;case"GB":n=Math.round(1024*parseFloat(r[0])*1024);break;case"TB":n=Math.round(1024*parseFloat(r[0])*1024*1024);break;default:n=Math.round(parseFloat(r[0]))}return{id:e.title,geometry:x()(a.footprint),type:"Feature",properties:{updated:new Date(a.ingestiondate),title:e.title,name:e.title,uuid:e.id,date:a.beginposition+"/"+a.endposition,downloadUrl:e.link[0].href,quicklookUrl:e.link.length>=2?e.link[2].href:null,earthObservation:{parentIdentifier:"",status:"ARCHIVED",acquisitionInformation:[{platform:{platformShortName:a.platformname,platformSerialIdentifier:a.platformserialidentifier},sensor:{instrument:a.instrumentshortname,operationalMode:a.sensoroperationalmode},acquisitionParameter:{acquisitionStartTime:new Date(a.beginposition),acquisitionStopTime:new Date(a.endposition),relativePassNumber:parseInt(a.relativeorbitnumber),orbitNumber:parseInt(a.orbitnumber),startTimeFromAscendingNode:null,stopTimeFromAscendingNode:null,orbitDirection:a.orbitdirection}}],productInformation:{productType:a.producttype,size:n}}}}}catch(o){return console.log("error parsing item from dhus: "+o.message),{}}}var a=[];try{e.feed.entry?Array.isArray(e.feed.entry)?(console.log("entry is an  array"),a=e.feed.entry.map(function(e){return t(e)}).filter(function(e){return e!=={}})):a=[t(e.feed.entry)]:a=[]}catch(n){console.log(e),console.log("Error: "),console.log(n),a=[]}return{type:"FeatureCollection",id:"search",properties:{totalResults:e.feed["opensearch:totalResults"],startIndex:e.feed["opensearch:startIndex"]?e.feed["opensearch:startIndex"]:1,itemsPerPage:e.feed["opensearch:itemsPerPage"],title:"DHuS search response",updated:new Date},features:a}}function D(e){var t=[];try{e.features?Array.isArray(e.features)&&(console.log("features is an  array"),t=e.features.map(function(e){return function(e){try{for(var t=null,a=null,n=0;n<e.properties.link.length;n++)"Download"==e.properties.link[n]["@"].title&&(t=e.properties.link[n]["@"].href),"Quicklook"==e.properties.link[n]["@"].title&&(a=e.properties.link[n]["@"].href);return{id:e.id,geometry:e.geometry,type:"Feature",properties:{updated:e.properties.updated,title:e.properties.title,name:e.title,uuid:e.properties.identifier,date:e.properties.date,downloadUrl:t,quicklookUrl:a,earthObservation:{parentIdentifier:e.properties.EarthObservation.metaDataProperty.EarthObservationMetaData.parentIdentifier,status:"ARCHIVED",acquisitionInformation:[{platform:{platformShortName:e.properties.EarthObservation.procedure.EarthObservationEquipment.platform.Platform.shortName,platformSerialIdentifier:null},sensor:{instrument:e.properties.EarthObservation.procedure.EarthObservationEquipment.instrument.Instrument.shortName,operationalMode:e.properties.EarthObservation.procedure.EarthObservationEquipment.sensor.Sensor.operationalMode},acquisitionParameter:{acquisitionStartTime:new Date(e.properties.EarthObservation.phenomenonTime.TimePeriod.beginPosition),acquisitionStopTime:new Date(e.properties.EarthObservation.phenomenonTime.TimePeriod.endPosition),relativePassNumber:null,orbitNumber:e.properties.EarthObservation.procedure.EarthObservationEquipment.acquisitionParameters.Acquisition.orbitNumber,startTimeFromAscendingNode:null,stopTimeFromAscendingNode:null,orbitDirection:e.properties.EarthObservation.procedure.EarthObservationEquipment.acquisitionParameters.Acquisition.orbitDirection}}],productInformation:{productType:e.properties.EarthObservation.metaDataProperty.EarthObservationMetaData.productType,downloadUrl:t,quicklookUrl:a,size:null}}}}}catch(r){return console.log("error parsing item from dhus: "+r.message),{}}}(e)}).filter(function(e){return e!=={}})):t=[]}catch(a){console.log(e),console.log("Error: "),console.log(a),t=[]}return{type:"FeatureCollection",id:"search",properties:{totalResults:e.properties.totalResults,startIndex:e.properties.startIndex,itemsPerPage:e.properties.itemsPerPage,title:e.properties.title,updated:e.properties.updated},features:t}}var A=a(27),M=a.n(A);function I(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(null),i=Object(l.a)(o,2),d=i[0],b=i[1],p=Object(n.useState)(!1),m=Object(l.a)(p,2),g=m[0],h=m[1],O=Object(n.useState)(!1),j=Object(l.a)(O,2),v=j[0],y=j[1],E=Object(u.useGlobal)("searchepoch"),S=Object(l.a)(E,1)[0],w=Object(u.useGlobal)("startend"),k=Object(l.a)(w,1)[0],T=Object(u.useGlobal)("mission"),N=Object(l.a)(T,1)[0],x=Object(u.useGlobal)("apppolygon"),A=Object(l.a)(x,1)[0],M=function(){var e=Object(u.useGlobal)("searchepoch"),t=Object(l.a)(e,1)[0],a=Object(u.useGlobal)("startend"),r=Object(l.a)(a,2),o=r[0],i=r[1],c=Object(u.useGlobal)("apppolygon"),s=Object(l.a)(c,1)[0],d=Object(u.useGlobal)("mission"),b=Object(l.a)(d,1)[0],p=Object(u.useGlobal)("replace"),m=Object(l.a)(p,2),g=(m[0],m[1]),h=Object(u.useGlobal)("gosearch"),O=Object(l.a)(h,2),j=(O[0],O[1]),v=Object(n.useState)(864e5),y=Object(l.a)(v,2),E=y[0],S=(y[1],Object(n.useState)([])),w=Object(l.a)(S,2),k=w[0],T=w[1],N=Object(n.useState)(0),x=Object(l.a)(N,2),C=x[0],D=x[1];return Object(f.a)("z",function(){return D(function(e){return e+1})}),Object(n.useEffect)(function(){console.log("apppolygon: "+s),D(function(e){return e+1})},[s,b]),Object(n.useEffect)(function(){console.log("cleaning searches: "+C),C&&(g(!0),T([]),j(Math.random))},[C]),Object(n.useEffect)(function(){var e=new Date(t);console.log("searchepoch: "+e.toJSON());var a=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())),n=new Date(a.getTime()).toJSON(),r=new Date(a.getTime()+E-1e3).toJSON();console.log("new start/end: "+n+"/ "+r);var o=k;o.indexOf(n),o.push(n),o.length>5&&console.log("should now remove geojson layer"),T(o),i({start:n,end:r}),j(Math.random)},[t]),[o]}(),I=(Object(l.a)(M,1)[0],Object(n.useState)(null)),P=Object(l.a)(I,2),_=P[0],R=P[1];return Object(n.useEffect)(function(){var e=function(){var t=Object(s.a)(c.a.mark(function t(a,n){var r,o,i,s,l;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return h(!0),r=(r=a).replace("{startindex}",n),console.log("Search: "+r),o={totalresults:0,startindex:0,itemsperpage:0},t.prev=5,t.next=8,fetch(r,{mode:"cors",credentials:"include"});case 8:return i=t.sent,t.prev=9,t.next=12,i.json();case 12:s=t.sent,l="ENVISAT"===N?D(s):C(s),o={totalresults:null==l.properties.totalResults?0:Number(l.properties.totalResults),startindex:Number(l.properties.startIndex),itemsperpage:Number(l.properties.itemsPerPage)},console.log(o),o.totalresults>0&&b(l),o.startindex+o.itemsperpage<Math.min(o.totalresults,13e3)?(console.log("There's More..."),y(!1),e(a,o.startindex+o.itemsperpage)):h(!1),t.next=25;break;case 20:t.prev=20,t.t0=t.catch(9),console.log("Didn't recieve a json !"),console.log(t.t0),h(!1);case 25:t.next=32;break;case 27:t.prev=27,t.t1=t.catch(5),console.log("Error contacting server..."),console.log(t.t1),h(!1);case 32:case"end":return t.stop()}},t,null,[[5,27],[9,20]])}));return function(e,a){return t.apply(this,arguments)}}();_&&e(_,a[N].startIndexOrigin)},[_]),Object(n.useEffect)(function(){console.log("DataHub ready. "+N);var e=[];[{code:"S1",templateUrl:'https://scihub.copernicus.eu/apihub/search?q=( footprint:"Intersects({polygon})" AND beginposition:[{start} TO {end}] AND platformname:Sentinel-1 AND producttype:GRD)&start={startindex}&rows=100&sortedby=beginposition&order=desc&format=json',name:"Sentinel-1 A/B GRD",startIndexOrigin:0,dateOff:" beginposition:[{start} TO {end}] AND",areaOff:' footprint:"Intersects({polygon})" AND'},{code:"S2A",templateUrl:'https://scihub.copernicus.eu/apihub/search?q=( footprint:"Intersects({polygon})" AND beginposition:[{start} TO {end}] AND platformname:Sentinel-2 AND filename:S2A_MSIL1C*)&start={startindex}&rows=100&sortedby=beginposition&order=desc&format=json',name:"Sentinel-2 A/B Level 1C",startIndexOrigin:0,dateOff:" beginposition:[{start} TO {end}] AND",areaOff:' footprint:"Intersects({polygon})" AND'},{code:"S2B",templateUrl:'https://scihub.copernicus.eu/apihub/search?q=( footprint:"Intersects({polygon})" AND beginposition:[{start} TO {end}] AND platformname:Sentinel-2 AND filename:S2B_MSIL1C*)&start={startindex}&rows=100&sortedby=beginposition&order=desc&format=json',name:"Sentinel-2 A/B Level 1C",startIndexOrigin:0,dateOff:" beginposition:[{start} TO {end}] AND",areaOff:' footprint:"Intersects({polygon})" AND'},{code:"S3",templateUrl:'https://scihub.copernicus.eu/apihub/search?q=( footprint:"Intersects({polygon})" AND beginposition:[{start} TO {end}] AND platformname:Sentinel-3 AND (producttype:OL_1_ERR___ OR producttype:SL_1_RBT___ OR producttype:SR_1_SRA___))&start={startindex}&rows=100&sortedby=beginposition&order=desc&format=json',name:"Sentinel-3 A/B, OLCI/SLSTR/SRAL",startIndexOrigin:0,dateOff:" beginposition:[{start} TO {end}] AND",areaOff:' footprint:"Intersects({polygon})" AND'},{code:"S5P",templateUrl:'https://scihub.copernicus.eu/apihub/search?q=( footprint:"Intersects({polygon})" AND beginposition:[{start} TO {end}] AND platformname:Sentinel-5 precursor AND (producttype:L1B_RA_BD1 OR (producttype:L2__NO2___ AND processingmode:Near real time)))&start={startindex}&rows=100&sortedby=beginposition&order=desc&format=json',name:"Sentinel-1 A/B",startIndexOrigin:0,dateOff:" beginposition:[{start} TO {end}] AND",areaOff:' footprint:"Intersects({polygon})" AND'},{code:"ENVISAT",templateUrl:"https://eocat.esa.int/api/catalogue/EOCAT-ENVISAT.ASA.IMP_1P/search?start={start}&stop={end}&format=json&count=50&startIndex={startindex}",startIndexOrigin:1,name:"Envisat",dateOff:" beginposition:[{start} TO {end}]",areaOff:' footprint:"Intersects({polygon})"'}].map(function(t){e[t.code]=t}),r(e)},[]),Object(n.useEffect)(function(){if(console.log("mission: "+N),console.log("mission: "+N+" start/end: "+k.start+"/"+k.end+" apppolygon: "+A),N&&S)try{var e=function(e){var t=e.code,n=e.polygon,r=e.start,o=e.end,i=(e.startindex,a[t]),c=i.templateUrl;return c=n.length>0?(c=c.replace("{polygon}",n)).replace(i.dateOff,""):(c=(c=c.replace(i.areaOff,"")).replace("{start}",r)).replace("{end}",o)}({code:N,polygon:A,start:k.start,end:k.end});y(!0),R(e)}catch(t){console.log("Not a JULIAN date !"),console.log(t)}},[N,A,k.start]),{geojsonResults:d,loading:g,firstpage:v}}function P(e){var t=e.id,a=e.clat,n=e.clon,r=e.alt,o=e.starfield,i=e.atmosphere,c=e.names,s=T({id:t,clat:a,clon:n,alt:r,starfield:o,atmosphere:i,names:c}),b=s.ewwstate,p=s.addGeojson,m=s.removeGeojson,g=s.removeQuicklooks,h=(s.addWMS,s.toggleProjection),O=s.toggleAtmosphere,j=s.toggleStarfield,v=s.toggleNames,y=s.setTime;Object(f.a)("p",h),Object(f.a)("a",O),Object(f.a)("s",j),Object(f.a)("n",v),Object(f.a)("c",m),Object(f.a)("z",function(e){return M(!e)});var E=I(),S=E.geojsonResults,w=E.loading,k=E.firstpage,N=Object(u.useGlobal)("searchepoch"),x=(Object(l.a)(N,1)[0],Object(u.useGlobal)("startend")),C=(Object(l.a)(x,1)[0],Object(u.useGlobal)("replace")),D=Object(l.a)(C,2),A=D[0],M=D[1],P=Object(u.useGlobal)("appdate"),_=Object(l.a)(P,1)[0],R=Object(u.useGlobal)("appstarfield"),L=Object(l.a)(R,2),G=L[0],q=L[1],F=Object(u.useGlobal)("appatmosphere"),U=Object(l.a)(F,2),W=U[0],B=U[1],Y=Object(u.useGlobal)("appnames"),z=Object(l.a)(Y,2),H=z[0],X=z[1],J=Object(u.useGlobal)("appaltitude"),V=Object(l.a)(J,2)[1],K=Object(u.useGlobal)("applatitude"),Q=Object(l.a)(K,2)[1],Z=Object(u.useGlobal)("applongitude"),$=Object(l.a)(Z,2)[1],ee=Object(u.useGlobal)("apppolygon"),te=Object(l.a)(ee,2),ae=(te[0],te[1]),ne=Object(u.useGlobal)("apppickeditems"),re=Object(l.a)(ne,2),oe=(re[0],re[1]);Object(u.useEffect)(function(){if(S){g(),k&&m(),console.log("datahub in use"),console.log(S);try{p(S,_)}catch(e){console.log("error on geojson parsing"),console.log(e)}}},[S,k]),Object(u.useEffect)(function(){console.log("replace: "+A)},[A]),Object(u.useEffect)(function(){O(W)},[W]),Object(u.useEffect)(function(){j(G)},[G]),Object(u.useEffect)(function(){v(H)},[H]),Object(u.useEffect)(function(){M(w)},[w]),Object(u.useEffect)(function(){V(b.altitude),$(b.longitude),Q(b.latitude)},[b.longitude,b.latitude,b.altitude]),Object(u.useEffect)(function(){ae(b.aoi)},[b.aoi]),Object(u.useEffect)(function(){oe(b.pickedItems)},[b.pickedItems]),Object(u.useEffect)(function(){y(_)},[_]),Object(u.useEffect)(function(){B(i),q(o),X(c)},[]);return d.a.createElement("canvas",{id:t,style:{background:"inherit",position:"fixed",width:"inherit",height:"inherit"}})}a(118);var _=function(){var e=Object(u.useGlobal)("mission"),t=Object(l.a)(e,2),a=(t[0],t[1]);return Object(f.a)("1",function(){a("S1")}),Object(f.a)("2",function(){a("S2A")}),Object(f.a)("3",function(){a("S3")}),Object(f.a)("5",function(){a("S5P")}),Object(f.a)("6",function(){a("ENVISAT")}),r.a.createElement("div",{className:"MissionSelector"},r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s1_black.png",alt:"",onClick:function(){return a("S1")}})),r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s2_black.png",alt:"",onClick:function(){return a("S2A")}})),r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s2_black.png",alt:"",onClick:function(){return a("S2B")}})),r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s3_black.png",alt:"",onClick:function(){return a("S3")}})),r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s5p_black.png",alt:"",onClick:function(){return a("S5P")}})),r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s5p_black.png",alt:"",onClick:function(){return a("ENVISAT")}})))};a(119);var R=function(){var e=Object(u.useGlobal)("appatmosphere"),t=Object(l.a)(e,2),a=t[0],n=t[1],r=Object(u.useGlobal)("appstarfield"),o=Object(l.a)(r,2),i=o[0],c=o[1],s=Object(u.useGlobal)("appnames"),f=Object(l.a)(s,2),b=f[0],p=f[1];return d.a.createElement("div",{className:"MapSelector"},d.a.createElement("div",{className:"CircleButton"},d.a.createElement("img",{className:"MapIcon",draggable:"false",src:"./images/atmosphere.png",alt:"",onClick:function(){return n(!a)}})),d.a.createElement("div",{className:"CircleButton"},d.a.createElement("img",{className:"MapIcon",draggable:"false",src:"./images/starfield.png",alt:"",onClick:function(){return c(!i)}})),d.a.createElement("div",{className:"CircleButton"},d.a.createElement("img",{className:"MapIcon",draggable:"false",src:"./images/names.png",alt:"",onClick:function(){return p(!b)}})))},L=a(108),G=a.n(L),q=a(109),F=(a(122),a(20)),U=a(34),W=(a(123),a(14));a(124);a(125);a(126);var B=function(){var e=Object(u.useGlobal)("appaltitude"),t=Object(l.a)(e,1)[0],a=Object(u.useGlobal)("apppickeditems"),n=Object(l.a)(a,2),r=n[0],o=(n[1],Object(u.useState)([])),i=Object(l.a)(o,2),c=i[0],s=i[1],b=Object(u.useState)(!1),p=Object(l.a)(b,2),m=p[0],g=p[1];return Object(f.a)("q",function(){g(function(e){return!e})}),Object(u.useEffect)(function(){s(r)},[r]),d.a.createElement("div",{className:"MapStateLabel"},d.a.createElement("div",{style:{fontSize:10}},c.map(function(e){return d.a.createElement("div",{className:"metadata",key:e.userProperties.name},e.userProperties.name,d.a.createElement("img",{className:"Quicklook",style:{display:m?"inline":"none"},src:e.userProperties.quicklookUrl,alt:""}))})),d.a.createElement("div",null,Math.ceil(t/1e3)+" Km"))};a(127);var Y=function(e){var t=e.date,a=e.highlight,n=e.animated;return r.a.createElement("div",{className:"LabelContainer"},r.a.createElement("div",{className:"Date"},r.a.createElement("div",{className:"day"===a||"none"===a?"DayLabel":"DayLabel Greyedout",key:"day"},M()(t,"UTC:dd")),r.a.createElement("div",{className:"YearMonth"},r.a.createElement("div",{className:"month"===a||"none"===a?"MonthLabel ":"MonthLabel  Greyedout",key:"month"},M()(t,"UTC:mmm").toUpperCase()),r.a.createElement("div",{className:"year"===a||"none"===a?"YearLabel ":"YearLabel Greyedout",key:"year"},t.getUTCFullYear()))),r.a.createElement("div",{className:n?"Line  Line-active":"Line",key:"line"}),r.a.createElement("div",{className:"time"===a||"none"===a?"TimeLabel ":"TimeLabel Greyedout",key:"time"},M()(t,"UTC:HH:MM:ss")))};a(128);var z=function(e){var t=e.startdate,a=e.onDateChange,o=function(e){var t=e.autoStart,a=(e.duration,e.initdate),r=Object(n.useState)(a),o=Object(l.a)(r,2),i=o[0],c=o[1],s=Object(n.useState)(!1),u=Object(l.a)(s,2),d=u[0],f=u[1],b=Object(n.useRef)(),p=Object(n.useRef)();p.current=200;var m=Object(n.useRef)(),g=Object(n.useRef)(),h=Object(n.useRef)();function O(){console.log("start clock"),b.current||(b.current=36e5),g.current=setInterval(function(){m.current+=b.current,c(new Date(m.current))},p.current),f(!0)}function j(){console.log("stop clock"),h.current&&clearTimeout(h.current),g.current&&clearInterval(g.current),f(!1)}return Object(n.useEffect)(function(){console.log("init start useclock "+a.toJSON()),d?(j(),m.current=a.getTime(),O()):m.current=a.getTime()},[a]),Object(n.useEffect)(function(){console.log("render useclock"),m.current=(new Date).getTime(),t&&O()},[]),{date:i,playing:d,togglePause:function(){d?j():O()},reset:function(){j(),m.current=(new Date).getTime(),c(new Date(m.current))},increaseSpeed:function(){b.current=b.current>0?b.current*=2:b.current/=2,Math.abs(b.current)<p.current&&(b.current=p.current),console.log("step: "+b.current)},decreaseSpeed:function(){b.current=b.current>0?b.current/=2:b.current*=2,Math.abs(b.current)<p.current&&(b.current=-1*p.current)},forceDate:function(e){console.log("forcedate useclock: "+e.toJSON()),d?(j(),m.current=e.getTime(),O()):m.current=e.getTime()}}}({autoStart:!1,duration:6e5,initdate:t}),i=o.date,c=o.togglePause,s=o.reset,u=o.increaseSpeed,d=o.decreaseSpeed;Object(f.a)("t",c),Object(f.a)("r",function(){s()}),Object(f.a)(".",u),Object(f.a)(",",d),Object(n.useEffect)(function(){a(i)},[i]),Object(n.useEffect)(function(){},[t]);var b=Object(n.useState)(),p=Object(l.a)(b,2),m=p[0],g=p[1];return r.a.createElement("div",{className:"DateController",onClick:function(){var e=Date.now();m&&e-m<300?s():(g(e),c())}})};a(72);var H=function(e){var t=e.date,a=e.zoomfactor,o=e.immediate,i=Object(n.useRef)(),c=Object(n.useState)(t),s=Object(l.a)(c,2),u=(s[0],s[1],Object(n.useState)(!1)),d=Object(l.a)(u,2),f=(d[0],d[1],Object(n.useState)("")),b=Object(l.a)(f,2),p=b[0],m=b[1],g=function(e,t){if(i.current){for(var a,n,o,c=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],s=0,l=0,u=0,d=0,f=0,b=[],p=t<2592e7,m=t<432e6,g=t<72e5,h=t<12e5,O=t<48e4,j=0;j<i.current.offsetHeight;j+=1){var v=new Date((j-i.current.offsetHeight/2)*t+e.getTime());a=v.getUTCDate(),n=c[v.getUTCMonth()],o=v.getUTCHours(),s=v.getUTCFullYear(),h?o!=f&&(0==o||o%2!=0&&!O?0==o&&(b.push({class:"DayTic",pos:j,label:a}),b.push({class:"MonthTic",pos:j,label:n}),b.push({class:"YearTic",pos:j,label:s})):b.push({class:"HourTic",pos:j,label:o})):g?a!==l&&(1!=a?b.push({class:"DayTic",pos:j,label:a}):(b.push({class:"DayTic",pos:j,label:a}),b.push({class:"MonthTic",pos:j,label:n}),b.push({class:"YearTic",pos:j,label:s}))):m?n!==u&&0!=l&&m&&("JAN"!==n?b.push({class:"MonthTic",pos:j,label:n}):(b.push({class:"MonthTic",pos:j,label:n}),b.push({class:"YearTic",pos:j,label:s}))):p&&s!==d&&0!==u&&("JAN"!==n?b.push({class:"MonthTic",pos:j,label:n}):b.push({class:"YearTic",pos:j,label:s})),l=a,d=s,u=n,f=o}return b.map(function(e){return r.a.createElement("div",{className:e.class,key:e.class+e.pos,style:{top:e.pos}},e.label)})}},h=Object(F.b)(function(){return{dater:t.getTime(),zoomer:a}}),O=Object(l.a)(h,2),j=O[0],v=j.dater,y=j.zoomer,E=O[1];return Object(n.useLayoutEffect)(function(){E({to:{zoomer:a,dater:t.getTime()},config:{duration:400},immediate:!1,onFrame:function(){m(g(new Date(v.value),y.value))}})},[a]),Object(n.useLayoutEffect)(function(){E({to:{zoomer:a,dater:t.getTime()},config:{duration:400},immediate:o,onFrame:function(){m(g(new Date(v.value),y.value))}})},[t]),r.a.createElement(F.a.div,{ref:i,className:"DateSelectorScale"},p)};var X=function(e){var t=e.startdate,a=e.onDateChange,o=e.onFinalDateChange,i=[36e5,864e5,1296e6],c=[36e5,6e5,108e3,27e3,864e5],s=Object(n.useRef)(),u=Object(n.useRef)();u.current||(u.current=[0,0]),Object(n.useRef)();var d=Object(n.useRef)(),f=Object(n.useState)(t),b=Object(l.a)(f,2),p=b[0],m=b[1],g=Object(n.useState)(t),h=Object(l.a)(g,2),O=h[0],j=h[1],v=Object(n.useState)(t),y=Object(l.a)(v,2),E=y[0],S=y[1],w=Object(n.useState)(!1),k=Object(l.a)(w,2),T=k[0],N=k[1],x=Object(n.useState)(i[0]),C=Object(l.a)(x,2),D=C[0],A=C[1],M=Object(n.useState)(D),I=Object(l.a)(M,2),P=(I[0],I[1],Object(n.useState)(!1)),_=Object(l.a)(P,2),R=(_[0],_[1],Object(F.b)(function(){return{xy:[0,0]}})),L=Object(l.a)(R,2),G=L[0].xy,q=L[1];d.current||(d.current=t);var B=Object(U.a)({onDrag:function(e){var t,n,r=e.event,l=e.first,f=e.down,b=e.delta,g=e.velocity,h=e.direction,O=e.temp,v=void 0===O?{xy:G.getValue(),laststeparea:0,deltaoffset:[0,0]}:O,y=s.current.parentElement.offsetWidth-(r.pageX?r.pageX:s.current.parentElement.offsetWidth);return(r.pageY?r.pageY:s.current.parentElement.offsetHeight)-s.current.offsetHeight/2>0?(t=Math.min(i.length-1,Math.floor((y-s.current.offsetWidth)/60+1)),n=i[t=(t=t>i.length-1?i.length:t)<0?0:t]):(t=Math.min(c.length-1,Math.floor((y-s.current.offsetWidth)/60+1)),n=c[t=(t=t>c.length-1?c.length:t)<0?0:t]),t!==v.laststeparea&&(A(n),S(p),v.laststeparea=t,v.xy=[0,0],v.deltaoffset=b),l&&N(!0),g=Math.abs(g)<.2?0:g,q({xy:Object(W.add)(Object(W.scale)(Object(W.add)(Object(W.sub)(b,v.deltaoffset),u.current),1),v.xy),immediate:f,config:{velocity:Object(W.scale)(h,1*g),decay:!0},onFrame:function(){var e=new Date(E.getTime()-G.getValue()[1]*D);a(e),m(e),j(e),d.current=e},onRest:function(){if(!f){N(!1);var e=new Date(E.getTime()-G.getValue()[1]*D);o(e),u.current=[0,0]}}}),v}});return Object(n.useEffect)(function(){T||(u.current[1]-=(t.getTime()-O.getTime())/D,m(t),j(t),a(t))},[t]),r.a.createElement(F.a.div,Object.assign({},B(),{className:"DateSelector",ref:s}),r.a.createElement("div",{className:"Mask"},r.a.createElement(H,{className:"scale",date:p,zoomfactor:D,immediate:T}),r.a.createElement("div",{className:"TriangleContainer"},r.a.createElement("svg",{height:"40",width:"20",className:"Triangle"},r.a.createElement("polygon",{points:"20,5 20,35 12,20"})))))};var J=function(e){var t=e.startdate,a=e.onDateChange,o=e.onFinalDateChange,i=e.searching,c=Object(n.useState)(t),s=Object(l.a)(c,2),u=s[0],d=s[1],f=Object(n.useState)(t),b=Object(l.a)(f,2),p=b[0],m=b[1],g=Object(n.useState)(t),h=Object(l.a)(g,2),O=h[0],j=h[1];return Object(n.useEffect)(function(){d(t)},[t]),r.a.createElement("div",null,r.a.createElement(z,{startdate:p,onDateChange:function(e){d(e)}}),r.a.createElement(Y,{date:O,highlight:"none",animated:i}),r.a.createElement(X,{startdate:u,onDateChange:function(e){j(e),a(e)},onFinalDateChange:function(e){m(e),o(e)}}))};a(129);var V=function(){var e=Object(u.useGlobal)("debug"),t=Object(l.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),c=Object(l.a)(i,2),s=c[0],d=c[1],b=Object(n.useState)([]),p=Object(l.a)(b,2),m=p[0],g=p[1];return Object(f.a)("d",function(){d(function(e){return!e})}),Object(n.useEffect)(function(){console.log("Debug Overlay Key: d")},[]),Object(n.useEffect)(function(){if(s){console.log("debug txt: "),console.log(a);var e=m;e[a[1]]=a[0],g(e),console.log(e)}},[a]),Object(n.useEffect)(function(){o(["Hi",0])},[]),r.a.createElement("div",{className:"Debug",style:{display:s?"inline":"none",width:"100%",height:"100%"}},r.a.createElement("div",{className:"DebugBox1"},r.a.createElement("ul",null,m.map(function(e){return r.a.createElement("li",{key:e?e[1]:""},e||"free")}))))};a(130);function K(e){var t=Object(u.useGlobal)("debug"),a=Object(l.a)(t,2)[1],o=Object(n.useState)(!0),i=Object(l.a)(o,2),c=i[0],s=i[1],d=Object(F.b)(function(){return{xy:[0,0]}}),f=Object(l.a)(d,2),b=f[0].xy,p=f[1],m=Object(n.useRef)(),g=function(){a(["toggle from: "+c+" "+m.current.offsetWidth,2]),p({xy:c?[m.current.offsetWidth,0]:[0,0],immediate:!1}),s(function(e){return!e})};Object(n.useEffect)(function(){a(["visible: "+c,1])},[c]),Object(n.useEffect)(function(){setTimeout(g,1e3)},[]);var h=Object(U.a)({onDrag:function(e){var t=e.first,n=e.event,r=e.direction,o=e.velocity,i=e.down,l=e.delta,u=e.vxvy,d=e.temp,f=void 0===d?{initTarget:"",xy:b.getValue()}:d;if(t&&(f.initTarget=n.target.getAttribute("class")),"ControlPanel"==f.initTarget){if(i)p({xy:Object(W.add)(f.xy,l),immediate:!0});else if(u[0]>.2){Object(W.scale)(r,o);a(["visible: "+c,1]),p({xy:[m.current.offsetWidth,0],immediate:!1}),s(!1)}else p({xy:f.xy,immediate:!1});return f}}},{event:{passive:!1}});return r.a.createElement("div",null,r.a.createElement("img",{className:"Logo",draggable:"false",src:e.imageSrc,alt:"",onClick:g}),r.a.createElement(F.a.div,Object.assign({},h(),{ref:m,className:"ControlPanel",style:{transform:b.interpolate(function(e,t){return"translate3d(".concat(e,"px,0,0)")})}}),e.children))}var Q=a(110);a(293);var Z=function(){var e=Object(u.useGlobal)("appcolor"),t=Object(l.a)(e,2),a=t[0];return t[1],r.a.createElement("div",{className:"ColorSelector"},r.a.createElement(Q.HuePicker,{color:a,onChangeComplete:function(e){document.documentElement.style.setProperty("--color",e.hex)}}))},$=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],o=t[1],i=new Date,d=Object(n.useState)(i),b=Object(l.a)(d,1)[0],p=Object(u.useGlobal)("searching"),m=Object(l.a)(p,1)[0],g=Object(u.useGlobal)("appdate"),h=Object(l.a)(g,2),O=(h[0],h[1]),j=Object(u.useGlobal)("searchepoch"),v=Object(l.a)(j,2)[1],y=Object(u.useGlobal)("mission"),E=Object(l.a)(y,2),S=E[0];E[1];Object(n.useEffect)(function(){console.log("Mission changed to: "+S)},[S]);var w=Object(n.useState)(!0),k=Object(l.a)(w,2),T=(k[0],k[1]);Object(f.a)("h",function(){T(function(e){return!e})}),Object(n.useEffect)(function(){var e=function(){return new Promise(function(e){setTimeout(function(){var t=Math.ceil(10*Math.random());console.log("mockApi done"),e(t)},2e3)})};function t(){return(t=Object(s.a)(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=5;break}return t.next=3,e();case 3:t.sent,o(!0);case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){t.apply(this,arguments)}()},[]);var N=Object(n.useState)(!1),x=Object(l.a)(N,2),C=x[0],D=x[1],A=Object(q.a)(window.document.body),M=(A.isFullscreen,A.toggleFullscreen);return Object(f.a)("f",M),r.a.createElement("div",{className:"App"},r.a.createElement(G.a,{enabled:C,onChange:function(){C||D(!1)}},r.a.createElement("div",{className:"Globe"},r.a.createElement(P,{id:"globe",starfield:"true",atmosphere:"true",clon:"0.5",clat:"40",names:"true"})),r.a.createElement(J,{startdate:b,searching:m,onDateChange:function(e){O(e.getTime())},onFinalDateChange:function(e){v(e.getTime())}}),r.a.createElement("div",{className:"MissionLabel"},S),r.a.createElement(B,null),r.a.createElement(K,{active:"false",imageSrc:"./images/ESA_logo_white.png"},r.a.createElement(_,null),r.a.createElement(R,null),r.a.createElement(Z,null)),r.a.createElement(V,{action:"Bonjour"})))};var ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function te(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}console.log("init global: "+(new Date).getTime()),Object(u.setGlobal)({appdate:(new Date).getTime(),searchepoch:(new Date).getTime(),mission:"S1",searching:!1,apppolygon:"",replace:!0,startend:{start:0,end:0},apppickeditems:[]}),Object(o.render)(r.a.createElement($,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/reactwww",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/reactwww","/service-worker.js");ee?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):te(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):te(e)})}}()},72:function(e,t,a){}},[[111,1,2]]]);
//# sourceMappingURL=main.e1c264ca.chunk.js.map