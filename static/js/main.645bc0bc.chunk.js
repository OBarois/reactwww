(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,a){e.exports=a(284)},110:function(e,t,a){},111:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},283:function(e,t,a){},284:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(97),c=a(8),i=a.n(c),s=a(17),l=a(1);function u(e){var t=e.autoStart,a=e.duration,r=e.startdate,o=Object(n.useState)(r),c=Object(l.a)(o,2),i=c[0],s=c[1],u=Object(n.useState)(!1),d=Object(l.a)(u,2),b=d[0],f=d[1],m=Object(n.useRef)(),p=50;var g=Object(n.useRef)(),O=Object(n.useRef)(p),j=Object(n.useRef)();function h(){console.log("starting Timer... (will stop in "+a/1e3+" sec)"),g.current||(g.current=setInterval(function(){return function(e){m.current+=e,s(m.current)}(O.current)},p),f(!0)),j.current=setTimeout(function(){v()},a)}function v(){console.log("toggle clock"),j.current&&clearTimeout(j.current),g.current?(f(!1),clearInterval(g.current),g.current=void 0):h()}return Object(n.useEffect)(function(){s((new Date).getTime()),m.current=i,t&&h()},[]),{date:i,playing:b,togglePause:v,reset:function(){console.log("reset"),g.current&&(clearInterval(g.current),g.current=void 0,f(!1));var e=(new Date).getTime();O.current=p,s(e),m.current=e},increaseSpeed:function(){O.current=O.current>0?O.current*=2:O.current/=2,Math.abs(O.current)<p&&(O.current=p)},decreaseSpeed:function(){O.current=O.current>0?O.current/=2:O.current*=2,Math.abs(O.current)<p&&(O.current=-1*p)},forceDate:function(e){m.current=e}}}var d=a(2),b=a.n(d),f=a(5);var m=function(e){var t=e.duration,a=Object(d.useGlobal)("appdate"),o=Object(l.a)(a,2),c=o[0],i=o[1],s=u({autoStart:!1,duration:t,startdate:c}),b=s.date,m=(s.playing,s.togglePause),p=s.reset,g=s.increaseSpeed,O=s.decreaseSpeed,j=s.forceDate;Object(f.a)("t",m),Object(f.a)("r",p),Object(f.a)(".",g),Object(f.a)(",",O),Object(n.useEffect)(function(){i(b)},[b]),Object(n.useEffect)(function(){j(c)},[c]),Object(n.useEffect)(function(){j(c)},[]);var h=Object(n.useState)(),v=Object(l.a)(h,2),y=v[0],w=v[1];return r.a.createElement("div",{className:"ClockController",onClick:function(){console.log("pressed");var e=Date.now();y&&e-y<300?p():(w(e),m())}})},p=a(30),g=a(14),O=a(4),j=a.n(O);function h(e){var t=e.id,a=e.clon,r=e.clat,o=e.alt,c=e.starfield,u=e.atmosphere,d=e.names,b=Object(n.useRef)(null),f=Object(n.useState)("3D"),m=Object(l.a)(f,2),O=(m[0],m[1]),h=Object(n.useState)(""),v=Object(l.a)(h,2),y=(v[0],v[1],Object(n.useState)([])),w=Object(l.a)(y,2),E=w[0],S=w[1],N=Object(n.useState)({latitude:r,longitude:a,altitude:o,aoi:"",pickedItems:[]}),T=Object(l.a)(N,2),k=T[0],x=T[1];function D(e){for(var t=0;t<b.current.layers.length;t++)if(b.current.layers[t].displayName===e)return b.current.layers[t];return null}function C(e){return A.apply(this,arguments)}function A(){return(A=Object(s.a)(i.a.mark(function e(t){var a,n,r,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(108e5,a=0;a<b.current.layers.length;a++)if(b.current.layers[a].displayName.includes("Products:"))for(n=0;n<b.current.layers[a].renderables.length;n++)r=b.current.layers[a].renderables[n],0!=t?(o=new Date(r.userProperties.earthObservation.acquisitionInformation[0].acquisitionParameter.acquisitionStartTime).getTime(),c=new Date(r.userProperties.earthObservation.acquisitionInformation[0].acquisitionParameter.acquisitionStopTime).getTime(),r.enabled=o<=t+54e5&&c>=t-54e5):r.enabled=!1;case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var M=function(){var e=b.current.navigator.lookAtLocation.longitude,t=b.current.navigator.lookAtLocation.latitude,a=b.current.navigator.range,n=a<2e6?function(){var e,t,a=b.current.viewport,n="";try{(e=b.current.pickTerrain(b.current.canvasCoordinates(a.x,a.y+a.height)).terrainObject().position).latitude=Math.round(1e4*e.latitude)/1e4,e.longitude=Math.round(1e4*e.longitude)/1e4}catch(r){e=null}try{(t=b.current.pickTerrain(b.current.canvasCoordinates(a.x+a.width,a.y)).terrainObject().position).latitude=Math.round(1e4*t.latitude)/1e4,t.longitude=Math.round(1e4*t.longitude)/1e4}catch(r){t=null}return null==e||null==t?n="":(e.longitude,e.latitude,t.longitude,t.latitude,n="POLYGON(("+e.longitude+" "+e.latitude+","+t.longitude+" "+e.latitude+","+t.longitude+" "+t.latitude+","+e.longitude+" "+t.latitude+","+e.longitude+" "+e.latitude+"))"),n}():"";x(function(r){return Object(p.a)({},r,{longitude:e,latitude:t,altitude:a,viewpolygon:n})})},I=function(e){var t=e.clientX,a=e.clientY,n=b.current.pick(b.current.canvasCoordinates(t,a));if(console.log(n),n.terrainObject()){for(var r=0;r<b.current.layers.length;r++)if(b.current.layers[r].displayName.includes("Products:"))for(var o=0;o<b.current.layers[r].renderables.length;o++){b.current.layers[r].renderables[o].highlighted=!1}for(var c=[],i=0;i<n.objects.length;i++)n.objects[i].userObject instanceof j.a.SurfaceShape&&(c.push(n.objects[i].userObject),n.objects[i].userObject.highlighted=!n.objects[i].userObject.highlighted);console.log(c),x(function(e){return Object(p.a)({},e,{pickedItems:c})}),b.current.redraw()}else console.log("No position !")},G=function(e){console.log("double click");var t,a=e.clientX,n=e.clientY,r=b.current.pick(b.current.canvasCoordinates(a,n));if(r.terrainObject()){var o="POINT("+(t=r.terrainObject().position).longitude+" "+t.latitude+")";x(function(e){return Object(p.a)({},e,{aoi:o})})}else console.log("No position !"),x(function(e){return Object(p.a)({},e,{aoi:""})})};return Object(n.useEffect)(function(){console.log("useEffect (mount) in Eww  star/atmo: "+c+"/"+u),b.current=new j.a.WorldWindow(t),b.current.redrawCallbacks.push(M),j.a.BasicWorldWindowController.prototype.applyLimits=function(){b.current.navigator.range=j.a.WWMath.clamp(b.current.navigator.range,2e3,3e8)};var e=new j.a.ClickRecognizer(b.current,I);e.numberOfClicks=1;var n=new j.a.ClickRecognizer(b.current,G);n.numberOfClicks=2,n.recognizeSimultaneouslyWith(e),n.maxClickInterval=200;var i=new j.a.TapRecognizer(b.current,I);i.numberOfTaps=1;var s=new j.a.TapRecognizer(b.current,G);s.numberOfTaps=2,s.recognizeSimultaneouslyWith(i),s.maxTapInterval=200;var l={service:"https://tiles.maps.eox.at/wms",layerNames:"s2cloudless-2018",title:"s2cloudless-2018",numLevels:19,format:"image/png",size:256,sector:j.a.Sector.FULL_SPHERE,levelZeroDelta:new j.a.Location(90,90)},f={service:"https://tiles.maps.eox.at/wms",layerNames:"overlay_bright",title:"overlay_bright",numLevels:19,format:"image/png",size:256,sector:j.a.Sector.FULL_SPHERE,levelZeroDelta:new j.a.Location(90,90)};j.a.configuration.baseUrl=j.a.configuration.baseUrl.slice(0,-3);for(var m=new j.a.StarFieldLayer,p=new j.a.AtmosphereLayer("images/BlackMarble_2016_01deg.jpg"),g=[{layer:new j.a.WmsLayer(l,""),enabled:!0},{layer:new j.a.WmsLayer(f,""),enabled:d},{layer:m,enabled:c},{layer:p,enabled:u}],O=0;O<g.length;O++)g[O].layer.enabled=g[O].enabled,b.current.addLayer(g[O].layer);m.time=new Date,p.time=new Date,setTimeout(function(){b.current.goToAnimator.travelTime=1e3,b.current.goTo(new j.a.Position(r,a,o)),b.current.redraw()},2e3),b.current.redraw(),b.current.deepPicking=!0},[]),{ewwstate:k,removeGeojson:function(){for(var e=0;e<E.length;e++)b.current.removeLayer(E[e]);S(function(e){return[]}),b.current.redraw()},addGeojson:function(e,t){var a=new j.a.RenderableLayer("Products: "+e.properties.updated+Math.ceil(1e4*Math.random()));b.current.addLayer(a),new j.a.GeoJSONParser(e).load(function(){console.log(a),S(function(e){return[].concat(Object(g.a)(e),[a])}),C(t),b.current.redraw()},function(e,t){var a={};a.userProperties=t;var n=new j.a.PlacemarkAttributes(null);return n.imageScale=10,n.imageColor=new j.a.Color(0,1,1,.2),n.labelAttributes.offset=new j.a.Offset(j.a.OFFSET_FRACTION,5,j.a.OFFSET_FRACTION,5),e.isPointType()||e.isMultiPointType()?a.attributes=new j.a.PlacemarkAttributes(n):e.isLineStringType()||e.isMultiLineStringType()?(a.attributes.drawOutline=!0,a.attributes.outlineColor=new j.a.Color(.1*a.attributes.interiorColor.red,.3*a.attributes.interiorColor.green,.7*a.attributes.interiorColor.blue,1),a.attributes.outlineWidth=1):(e.isPolygonType()||e.isMultiPolygonType())&&(a.attributes=new j.a.ShapeAttributes(null),a.attributes.interiorColor=new j.a.Color(1,0,0,.2),a.attributes.outlineColor=new j.a.Color(1,0,0,.3),a.highlightAttributes=new j.a.ShapeAttributes(a.attributes),a.highlightAttributes.outlineColor=new j.a.Color(1,0,0,.4),a.highlightAttributes.interiorColor=new j.a.Color(1,0,0,.6)),a},a)},addWMS:function(e){new j.a.WmsLayer(e,"")},toggleStarfield:function(){console.log("toggleStarfield"),b.current.layers[2].enabled=!b.current.layers[2].enabled,b.current.redraw()},toggleAtmosphere:function(){console.log("toggleAtmosphere"),b.current.layers[3].enabled=!b.current.layers[3].enabled,b.current.redraw()},setTime:function(e){D("StarField").time=D("Atmosphere").time=new Date(e),C(e),b.current.redraw()},toggleProjection:function(){O(function(e){console.log("prevProjection: "+e);var t=["3D","Equirectangular","Mercator"],a=(t.indexOf(e)+1)%t.length;switch(console.log("newProjection: "+t[a]),t[a]){case"3D":b.current.globe.projection=new j.a.ProjectionWgs84;break;case"Equirectangular":b.current.globe.projection=new j.a.ProjectionEquirectangular;break;case"Mercator":b.current.globe.projection=new j.a.ProjectionMercator;break;case"North Polar":b.current.globe.projection=new j.a.ProjectionPolarEquidistant("North");break;case"South Polar":b.current.globe.projection=new j.a.ProjectionPolarEquidistant("South");break;default:b.current.globe.projection=new j.a.ProjectionWgs84}return b.current.redraw(),t[a]})},toggleNames:function(){console.log("toggleNames"),b.current.layers[1].enabled=!b.current.layers[1].enabled,b.current.redraw()}}}var v=a(98),y=a.n(v);function w(e){function t(e){function t(e){for(var t={},a=0;a<e.length;a++)t[e[a].name]=e[a].content;return t}try{var a={};e.date&&Object.assign(a,t(e.date)),e.int&&Object.assign(a,t(e.int)),e.double&&Object.assign(a,t(e.double)),e.str&&Object.assign(a,t(e.str));var n,r=a.size.split(" ");switch(r[1]){case"B":n=Math.round(parseFloat(r[0]));break;case"MB":n=Math.round(1024*parseFloat(r[0]));break;case"GB":n=Math.round(1024*parseFloat(r[0])*1024);break;case"TB":n=Math.round(1024*parseFloat(r[0])*1024*1024);break;default:n=Math.round(parseFloat(r[0]))}return{id:e.title,geometry:y()(a.footprint),type:"Feature",properties:{updated:new Date(a.ingestiondate),title:e.title,name:e.title,uuid:e.id,date:a.beginposition+"/"+a.endposition,downloadUrl:e.link[0].href,quicklookUrl:e.link.length>=2?e.link[2].href:null,earthObservation:{parentIdentifier:"",status:"ARCHIVED",acquisitionInformation:[{platform:{platformShortName:a.platformname,platformSerialIdentifier:a.platformserialidentifier},sensor:{instrument:a.instrumentshortname,operationalMode:a.sensoroperationalmode},acquisitionParameter:{acquisitionStartTime:new Date(a.beginposition),acquisitionStopTime:new Date(a.endposition),relativePassNumber:parseInt(a.relativeorbitnumber),orbitNumber:parseInt(a.orbitnumber),startTimeFromAscendingNode:null,stopTimeFromAscendingNode:null,orbitDirection:a.orbitdirection}}],productInformation:{productType:a.producttype,size:n}}}}}catch(o){return console.log("error parsing item from dhus: "+o.message),{}}}var a=[];try{e.feed.entry?Array.isArray(e.feed.entry)?(console.log("entry is an  array"),a=e.feed.entry.map(function(e){return t(e)}).filter(function(e){return e!=={}})):a=[t(e.feed.entry)]:a=[]}catch(n){console.log(e),console.log("Error: "),console.log(n),a=[]}return{type:"FeatureCollection",id:"search",properties:{totalResults:e.feed["opensearch:totalResults"],startIndex:e.feed["opensearch:startIndex"]?e.feed["opensearch:startIndex"]:1,itemsPerPage:e.feed["opensearch:itemsPerPage"],title:"DHuS search response",updated:new Date},features:a}}var E=a(29),S=a.n(E);function N(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!1),c=Object(l.a)(o,2),u=c[0],b=c[1],m=Object(d.useGlobal)("searchepoch"),p=Object(l.a)(m,1)[0],g=Object(d.useGlobal)("startend"),O=Object(l.a)(g,1)[0],j=Object(d.useGlobal)("mission"),h=Object(l.a)(j,1)[0],v=Object(d.useGlobal)("apppolygon"),y=Object(l.a)(v,1)[0],E=Object(d.useGlobal)("gosearch"),S=Object(l.a)(E,2),N=S[0],T=(S[1],function(){var e=Object(d.useGlobal)("searchepoch"),t=Object(l.a)(e,1)[0],a=Object(d.useGlobal)("startend"),r=Object(l.a)(a,2),o=r[0],c=r[1],i=Object(d.useGlobal)("apppolygon"),s=Object(l.a)(i,1)[0],u=Object(d.useGlobal)("mission"),b=Object(l.a)(u,1)[0],m=Object(d.useGlobal)("replace"),p=Object(l.a)(m,2),g=(p[0],p[1]),O=Object(d.useGlobal)("gosearch"),j=Object(l.a)(O,2),h=(j[0],j[1]),v=Object(n.useState)(864e5),y=Object(l.a)(v,2),w=y[0],E=(y[1],Object(n.useState)([])),S=Object(l.a)(E,2),N=S[0],T=S[1],k=Object(n.useState)(0),x=Object(l.a)(k,2),D=x[0],C=x[1];return Object(f.a)("z",function(){return C(function(e){return e+1})}),Object(n.useEffect)(function(){console.log("apppolygon: "+s),C(function(e){return e+1})},[s,b]),Object(n.useEffect)(function(){console.log("cleaning searches: "+D),D&&(g(function(e){return e+1}),T([]),h(Math.random))},[D]),Object(n.useEffect)(function(){var e=new Date(t);console.log("searchepoch: "+e.toJSON());var a=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())),n=new Date(a.getTime()).toJSON(),r=new Date(a.getTime()+w-1e3).toJSON();console.log("new start/end: "+n+"/ "+r);var o=N;o.indexOf(n)<0?(o.push(n),o.length>5&&console.log("should now remove geojson layer"),T(o),c({start:n,end:r}),h(Math.random)):console.log("Search already done !")},[t]),[o]}()),k=(Object(l.a)(T,1)[0],Object(n.useState)(null)),x=Object(l.a)(k,2),D=x[0],C=x[1];return Object(n.useEffect)(function(){var e=function(){var t=Object(s.a)(i.a.mark(function t(a,n){var o,c,s,l,u;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return b(!0),o=(o=a).replace("{startindex}",n),console.log("Search: "+o),c={totalresults:0,startindex:0,itemsperpage:0},t.prev=5,t.next=8,fetch(o,{mode:"cors",credentials:"include"});case 8:return s=t.sent,t.prev=9,t.next=12,s.json();case 12:l=t.sent,u="ENVISAT"===h?l:w(l),c={totalresults:null==u.properties.totalResults?0:Number(u.properties.totalResults),startindex:Number(u.properties.startIndex),itemsperpage:Number(u.properties.itemsPerPage)},console.log(c),c.totalresults>0&&r(u),c.startindex+c.itemsperpage<Math.min(c.totalresults,13e3)?(console.log("There's More..."),e(a,c.startindex+c.itemsperpage)):b(!1),t.next=25;break;case 20:t.prev=20,t.t0=t.catch(9),console.log("Didn't recieve a json !"),console.log(t.t0),b(!1);case 25:t.next=32;break;case 27:t.prev=27,t.t1=t.catch(5),console.log("Error contacting server..."),console.log(t.t1),b(!1);case 32:case"end":return t.stop()}},t,null,[[5,27],[9,20]])}));return function(e,a){return t.apply(this,arguments)}}();D&&e(D,0)},[D]),Object(n.useEffect)(function(){console.log("DataHub ready. "+h)},[]),Object(n.useEffect)(function(){if(console.log("mission: "+h+" start/end: "+O.start+"/"+O.end+" apppolygon: "+y),h&&p)try{var e=function(e){var t,a=e.code,n=e.polygon,r=e.start,o=e.end,c=e.startindex,i=(t=a,[{code:"S1",templateUrl:'https://131.176.236.55/dhus/search?q=( footprint:"Intersects({polygon})" AND beginposition:[{start} TO {end}] AND platformname:Sentinel-1 AND producttype:GRD)&start={startindex}&rows=100&sortedby=beginposition&order=desc&format=json',name:"Sentinel-1 A/B GRD",startIndexOrigin:0,dateOff:" beginposition:[{start} TO {end}] AND",areaOff:' footprint:"Intersects({polygon})" AND'},{code:"S2",templateUrl:'https://131.176.236.55/dhus/search?q=( footprint:"Intersects({polygon})" AND beginposition:[{start} TO {end}] AND platformname:Sentinel-2 AND producttype:S2MSI1C)&start={startindex}&rows=100&sortedby=beginposition&order=desc&format=json',name:"Sentinel-2 A/B Level 1C",startIndexOrigin:0,dateOff:" beginposition:[{start} TO {end}] AND",areaOff:' footprint:"Intersects({polygon})" AND'},{code:"S3",templateUrl:'https://131.176.236.55/dhus/search?q=( footprint:"Intersects({polygon})" AND beginposition:[{start} TO {end}] AND platformname:Sentinel-3 AND (producttype:OL_1_ERR___ OR producttype:SL_1_RBT___ OR producttype:SR_1_SRA___))&start={startindex}&rows=100&sortedby=beginposition&order=desc&format=json',name:"Sentinel-3 A/B, OLCI/SLSTR/SRAL",startIndexOrigin:0,dateOff:" beginposition:[{start} TO {end}] AND",areaOff:' footprint:"Intersects({polygon})" AND'},{code:"S5P",templateUrl:'https://s5phub.copernicus.eu/dhus/search?q=( footprint:"Intersects({polygon})" AND beginposition:[{start} TO {end}] AND platformname:Sentinel-5 precursor AND (producttype:L1B_RA_BD1 OR (producttype:L2__NO2___ AND processingmode:Near real time)))&start={startindex}&rows=100&sortedby=beginposition&order=desc&format=json',name:"Sentinel-1 A/B",startIndexOrigin:0,dateOff:" beginposition:[{start} TO {end}] AND",areaOff:' footprint:"Intersects({polygon})" AND'},{code:"ENVISAT",templateUrl:"https://eocat.esa.int/ngeo/catalogue/FEDEO-ENVISAT.ASA.IMP_1P/search?start={start}&stop={end}&format=json&count=50&startIndex={startindex}",startIndexOrigin:1,name:"Sentinel-1 A/B",dateOff:" beginposition:[{start} TO {end}]",areaOff:' footprint:"Intersects({polygon})"'}].find(function(e){return e.code==t})),s=i.templateUrl;return s=n.length>0?(s=s.replace("{polygon}",n)).replace(i.dateOff,""):(s=(s=s.replace(i.areaOff,"")).replace("{start}",r)).replace("{end}",o),c=i.startIndexOrigin=c+i.startIndexOrigin,s}({code:h,polygon:y,start:O.start,end:O.end});C(e)}catch(t){console.log("Not a JULIAN date !"),console.log(t)}},[N,h,y,O.start]),{geojsonResults:a,loading:u}}function T(e){var t=e.id,a=e.clat,n=e.clon,r=e.alt,o=e.starfield,c=e.atmosphere,i=e.names,s=h({id:t,clat:a,clon:n,alt:r,starfield:o,atmosphere:c,names:i}),u=s.ewwstate,m=s.addGeojson,p=s.removeGeojson,g=(s.addWMS,s.toggleProjection),O=s.toggleAtmosphere,j=s.toggleStarfield,v=s.toggleNames,y=s.setTime;Object(f.a)("p",g),Object(f.a)("a",O),Object(f.a)("s",j),Object(f.a)("n",v),Object(f.a)("c",p);var w=N(),E=w.geojsonResults,S=w.loading,T=Object(d.useGlobal)("searchepoch"),k=(Object(l.a)(T,1)[0],Object(d.useGlobal)("startend")),x=(Object(l.a)(k,1)[0],Object(d.useGlobal)("replace")),D=Object(l.a)(x,1)[0],C=Object(d.useGlobal)("mission"),A=(Object(l.a)(C,1)[0],Object(d.useGlobal)("appdate")),M=Object(l.a)(A,1)[0],I=Object(d.useGlobal)("appstarfield"),G=Object(l.a)(I,2),P=G[0],L=G[1],R=Object(d.useGlobal)("appatmosphere"),_=Object(l.a)(R,2),F=_[0],U=_[1],W=Object(d.useGlobal)("appnames"),q=Object(l.a)(W,2),B=q[0],H=q[1],z=Object(d.useGlobal)("searching"),Y=Object(l.a)(z,2)[1],J=Object(d.useGlobal)("appaltitude"),V=Object(l.a)(J,2)[1],K=Object(d.useGlobal)("applatitude"),X=Object(l.a)(K,2)[1],Z=Object(d.useGlobal)("applongitude"),Q=Object(l.a)(Z,2)[1],$=Object(d.useGlobal)("apppolygon"),ee=Object(l.a)($,2),te=(ee[0],ee[1]),ae=Object(d.useGlobal)("apppickeditems"),ne=Object(l.a)(ae,2),re=(ne[0],ne[1]);Object(d.useEffect)(function(){if(E){console.log("datahub in use"),console.log(E);try{m(E,M)}catch(e){console.log("error on geojson parsing"),console.log(e)}}},[E]),Object(d.useEffect)(function(){console.log("replace: "+D),p()},[D]),Object(d.useEffect)(function(){console.log("atmosphere"),O(F)},[F]),Object(d.useEffect)(function(){j(P)},[P]),Object(d.useEffect)(function(){v(B)},[B]),Object(d.useEffect)(function(){Y(S)},[S]),Object(d.useEffect)(function(){V(u.altitude),Q(u.longitude),X(u.latitude)},[u.longitude,u.latitude,u.altitude]),Object(d.useEffect)(function(){te(u.aoi)},[u.aoi]),Object(d.useEffect)(function(){re(u.pickedItems)},[u.pickedItems]),Object(d.useEffect)(function(){y(M)},[M]),Object(d.useEffect)(function(){U(c),L(o),H(i)},[]);return b.a.createElement("canvas",{id:t,style:{background:"inherit",position:"fixed",width:"inherit",height:"inherit"}})}a(110);var k=function(){var e=Object(d.useGlobal)("mission"),t=Object(l.a)(e,2),a=(t[0],t[1]);return Object(f.a)("1",function(){a("S1")}),Object(f.a)("2",function(){a("S2")}),Object(f.a)("3",function(){a("S3")}),Object(f.a)("5",function(){a("S5P")}),Object(f.a)("6",function(){a("ENVISAT")}),r.a.createElement("div",{className:"MissionSelector"},r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s1_black.png",alt:"",onClick:function(){return a("S1")}})),r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s2_black.png",alt:"",onClick:function(){return a("S2")}})),r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s3_black.png",alt:"",onClick:function(){return a("S3")}})),r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",draggable:"false",src:"./images/s5p_black.png",alt:"",onClick:function(){return a("S5P")}})))};a(111);var x=function(){var e=Object(d.useGlobal)("appatmosphere"),t=Object(l.a)(e,2),a=t[0],n=t[1],r=Object(d.useGlobal)("appstarfield"),o=Object(l.a)(r,2),c=o[0],i=o[1],s=Object(d.useGlobal)("appnames"),u=Object(l.a)(s,2),f=u[0],m=u[1];return b.a.createElement("div",{className:"MapSelector"},b.a.createElement("div",{className:"CircleButton"},b.a.createElement("img",{className:"MapIcon",draggable:"false",src:"./images/atmosphere.png",alt:"",onClick:function(){return n(!a)}})),b.a.createElement("div",{className:"CircleButton"},b.a.createElement("img",{className:"MapIcon",draggable:"false",src:"./images/starfield.png",alt:"",onClick:function(){return i(!c)}})),b.a.createElement("div",{className:"CircleButton"},b.a.createElement("img",{className:"MapIcon",draggable:"false",src:"./images/names.png",alt:"",onClick:function(){return m(!f)}})))},D=a(99),C=a.n(D),A=a(100),M=(a(114),a(24)),I=a(42),G=(a(115),a(19));a(116);var P=function(e){var t,a=Object(d.useGlobal)("debug"),o=Object(l.a)(a,2)[1],c=(e.max-e.min)/(40*(e.max-e.min)/864e5),i=e.min,s=i+(e.max-e.min)/c,u=0;e.vertical?(u=s-i,t=100):(t=s-i,u=100);var b=Object(d.useGlobal)("appdate"),f=Object(l.a)(b,2),m=f[0],p=f[1],g=Object(d.useGlobal)("searchepoch"),O=Object(l.a)(g,2)[1],j=Object(d.useGlobal)("highlight"),h=Object(l.a)(j,2)[1],v=Object(n.useState)(new Date),y=Object(l.a)(v,2),w=y[0],E=y[1],S=Object(n.useState)(!1),N=Object(l.a)(S,2),T=N[0],k=N[1],x=Object(n.useState)("continuous"),D=Object(l.a)(x,2),C=D[0],A=D[1],P=Object(n.useRef)();P.current=e.vertical;var L=Object(n.useRef)(),R=Object(M.b)(function(){return{xy:[0,0]}}),_=Object(l.a)(R,2),F=_[0].xy,U=_[1],W=Object(I.a)({onDrag:function(e){var t=e.down,a=e.delta,n=(e.distance,e.velocity),r=e.active,s=e.direction,l=(e.wheeling,e.time),u=e.first,d=(e.last,e.temp),b=void 0===d?{xy:F.getValue(),deltaOffset:[0,0],deltaCumul:[0,0],lastNewxy:[0,0],lastStep:1,lastIncrement:0,lastTime:l}:d;if(Object(G.scale)(s,n),n=n<.15?0:n,t||A(1),u&&k(!0),P.current){var f=L.current.parentElement.offsetHeight,m=1,p=1;a[0]<-30&&(m=864e5/c,p=10),a[0]<-80&&(m=2592e6/c,p=15),a[0]<-160&&(m=31536e6/c,p=30),m!==b.lastStep&&(o(["Step changed from: "+b.lastStep+" to: "+m,0]),A(m),b.deltaOffset=a,b.xy=b.lastNewxy),a=Object(G.sub)(a,b.deltaOffset);var g=[Math.round(a[0]/p)*m,Math.round(a[1]/p)*m];t&&(n=0);var j=Object(G.add)(Object(G.scale)(g,Math.pow(n+1,2)),b.xy);m!==b.lastStep&&(b.xy=j,b.lastStep=m),b.lastNewxy=j;var h=L.current.parentElement.offsetTop+L.current.parentElement.offsetHeight/2,v=-L.current.offsetHeight+L.current.parentElement.offsetHeight/2;j[1]=j[1]>h?h:j[1],j[1]=j[1]<v?v:j[1],U({xy:j,config:t?{mass:1,tension:1200,friction:40,precision:.01}:{mass:1,tension:200,friction:40,precision:1},immediate:t,onRest:function(e){var a=e.xy;t||r||k(!1),t||O(i+(-a[1]+f/2)*c)},onFrame:function(e){var t=e.xy;E(i+(-t[1]+f/2)*c)}})}return b},onWheel:function(e){e.down,e.delta,e.distance;var t=e.wheeling,a=e.event,n=e.temp,r=void 0===n?{xy:F.getValue()}:n;a.persist(),k(!0);var o=L.current.parentElement.offsetHeight,s=Object(G.add)([0,.2*a.deltaY],r.xy),l=L.current.parentElement.offsetTop+L.current.parentElement.offsetHeight/2,u=-L.current.offsetHeight+L.current.parentElement.offsetHeight/2;return s[1]=s[1]>l?l:s[1],s[1]=s[1]<u?u:s[1],U({xy:s,config:{tension:1200,friction:40,precision:1},immediate:!0,onRest:function(e){var a=e.xy;k(!1),t||O(i+(-a[1]+o/2)*c)},onFrame:function(e){var t=e.xy;E(i+(-t[1]+o/2)*c)}}),r}}),q=Object(n.useState)(""),B=Object(l.a)(q,2),H=B[0],z=B[1];return Object(n.useLayoutEffect)(function(){z(function(){for(var t,a,n,o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=0,s=0,l=[],u=e.vertical?"DayTic-v":"DayTic",d=e.vertical?"MonthTic-v":"MonthTic",b=e.vertical?"YearTic-v":"YearTic",f=e.min;f<=e.max;f+=36e5)t=new Date(f).getUTCDate(),a=o[new Date(f).getUTCMonth()],new Date(f).getUTCHours(),i=new Date(f).getUTCFullYear(),t!==n&&l.push({class:u,pos:(f-e.min)/c,label:t}),a!==s&&(l.push({class:d,pos:(f-e.min)/c,label:a}),l.push({class:b,pos:(f-e.min)/c,label:i})),n=t,s=a;return l.map(function(t){return r.a.createElement("div",{className:t.class,key:t.class+t.pos,style:e.vertical?{top:t.pos}:{left:t.pos}},t.label)})}(e.vertical))},[e.vertical]),Object(n.useLayoutEffect)(function(){var t=0;T||(e.vertical?(t=(i-m)/c+L.current.parentElement.offsetHeight/2,U({xy:[0,t],config:{tension:1200,friction:40},onFrame:null,onRest:null})):(t=(i-m)/c+L.current.parentElement.offsetWidth/2,U({xy:[t,0],config:{tension:1200,friction:40},onFrame:null,onRest:null})))},[m,H]),Object(n.useEffect)(function(){p(w)},[w]),Object(n.useEffect)(function(){switch(C){case 40:h("day");break;case 1200:h("month");break;case 14600:h("year");break;default:h("none")}},[C]),Object(n.useLayoutEffect)(function(){console.log("zoom changed to: "+e.zoom)},[e.zoom]),r.a.createElement("div",{className:e.vertical?"Mask-v":"Mask"},r.a.createElement("div",{className:"TriangleContainer"},r.a.createElement("svg",{height:"40",width:"20",className:"Triangle"},r.a.createElement("polygon",{points:"20,5 20,35 12,20"}))),r.a.createElement("div",{className:"TimeContainer",ref:L},r.a.createElement(M.a.div,Object.assign({className:"TimeScale"},W(),{style:{width:t,height:u,transform:F.interpolate(function(e,t){return"translate3d(0px,".concat(t,"px,0)")})}}),H)))};a(117);var L=function(){var e=Object(d.useGlobal)("appdate"),t=Object(l.a)(e,1)[0],a=Object(d.useGlobal)("highlight"),o=Object(l.a)(a,1)[0],c=Object(d.useGlobal)("searching"),i=Object(l.a)(c,1)[0],s=Object(n.useState)(""),u=Object(l.a)(s,2),b=u[0],f=u[1],m=Object(n.useState)(""),p=Object(l.a)(m,2),g=p[0],O=p[1],j=Object(n.useState)(""),h=Object(l.a)(j,2),v=h[0],y=h[1],w=Object(n.useState)(""),E=Object(l.a)(w,2),N=E[0],T=E[1];return Object(n.useLayoutEffect)(function(){var e=new Date(t);f(e.getUTCFullYear()),O(S()(e,"UTC:mmm")),y(S()(e,"UTC:dd")),T(S()(e,"UTC:HH:MM:ss"))},[t]),r.a.createElement("div",{className:"LabelContainer"},r.a.createElement("div",{className:"Date"},r.a.createElement("div",{className:"day"===o||"none"===o?"DayLabel":"DayLabel Greyedout",key:"day"},v),r.a.createElement("div",{className:"YearMonth"},r.a.createElement("div",{className:"month"===o||"none"===o?"MonthLabel ":"MonthLabel  Greyedout",key:"month"},g),r.a.createElement("div",{className:"year"===o||"none"===o?"YearLabel ":"YearLabel Greyedout",key:"year"},b))),r.a.createElement("div",{className:!0===i?"Line  Line-active":"Line",key:"line"}),r.a.createElement("div",{className:"time"===o||"none"===o?"TimeLabel ":"TimeLabel Greyedout",key:"time"},N))};a(118);var R=function(){var e=Object(d.useGlobal)("appaltitude"),t=Object(l.a)(e,1)[0],a=Object(d.useGlobal)("apppickeditems"),n=Object(l.a)(a,2),r=n[0],o=(n[1],Object(d.useState)("")),c=Object(l.a)(o,2),i=(c[0],c[1]);return Object(d.useEffect)(function(){console.log(r),0!=r.length?r.length>1?i(r.length+" items selected"):i(r[0].userProperties.name):i([])},[r]),b.a.createElement("div",{className:"MapStateLabel"},b.a.createElement("div",{style:{fontSize:10}},r.map(function(e){return b.a.createElement("div",{className:"metadata"},e.userProperties.name,b.a.createElement("img",{className:"Quicklook",src:e.userProperties.quicklookUrl,alt:""}))})),b.a.createElement("div",null,Math.ceil(t/1e3)+" Km"))};a(119);var _=function(){var e=Object(d.useGlobal)("debug"),t=Object(l.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),i=Object(l.a)(c,2),s=i[0],u=i[1],b=Object(n.useState)([]),m=Object(l.a)(b,2),p=m[0],g=m[1];return Object(f.a)("d",function(){u(function(e){return!e})}),Object(n.useEffect)(function(){console.log("Debug Overlay Key: d")},[]),Object(n.useEffect)(function(){if(s){console.log("debug txt: "),console.log(a);var e=p;e[a[1]]=a[0],g(e),console.log(e)}},[a]),Object(n.useEffect)(function(){o(["Hi",0])},[]),r.a.createElement("div",{className:"Debug",style:{display:s?"inline":"none",width:"100%",height:"100%"}},r.a.createElement("div",{className:"DebugBox1"},r.a.createElement("ul",null,p.map(function(e){return r.a.createElement("li",{key:e?e[1]:""},e||"free")}))))};a(120);function F(e){var t=Object(d.useGlobal)("debug"),a=Object(l.a)(t,2)[1],o=Object(n.useState)(!0),c=Object(l.a)(o,2),i=c[0],s=c[1],u=Object(M.b)(function(){return{xy:[0,0]}}),b=Object(l.a)(u,2),f=b[0].xy,m=b[1],p=Object(n.useRef)(),g=function(){a(["toggle from: "+i+" "+p.current.offsetWidth,2]),m({xy:i?[p.current.offsetWidth,0]:[0,0],immediate:!1}),s(function(e){return!e})};Object(n.useEffect)(function(){a(["visible: "+i,1])},[i]),Object(n.useEffect)(function(){setTimeout(g,1e3)},[]);var O=Object(I.a)({onDrag:function(e){var t=e.first,n=e.event,r=e.direction,o=e.velocity,c=e.down,l=e.delta,u=e.vxvy,d=e.temp,b=void 0===d?{initTarget:"",xy:f.getValue()}:d;if(t&&(b.initTarget=n.target.getAttribute("class")),"ControlPanel"==b.initTarget){if(c)m({xy:Object(G.add)(b.xy,l),immediate:!0});else if(u[0]>.2){Object(G.scale)(r,o);a(["visible: "+i,1]),m({xy:[p.current.offsetWidth,0],immediate:!1}),s(!1)}else m({xy:b.xy,immediate:!1});return b}}},{event:{passive:!1}});return r.a.createElement("div",null,r.a.createElement("img",{className:"Logo",draggable:"false",src:e.imageSrc,alt:"",onClick:g}),r.a.createElement(M.a.div,Object.assign({},O(),{ref:p,className:"ControlPanel",style:{transform:f.interpolate(function(e,t){return"translate3d(".concat(e,"px,0,0)")})}}),e.children))}var U=a(101);a(283);var W=function(){var e=Object(d.useGlobal)("appcolor"),t=Object(l.a)(e,2),a=t[0];return t[1],r.a.createElement("div",{className:"ColorSelector"},r.a.createElement(U.HuePicker,{color:a,onChangeComplete:function(e){document.documentElement.style.setProperty("--color",e.hex)}}))},q=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],o=t[1],c=Object(d.useGlobal)("mission"),u=Object(l.a)(c,2),b=u[0];u[1];Object(n.useEffect)(function(){console.log("Mission changed to: "+b)},[b]);var p=Object(n.useState)(new Date("2014-10-01").getTime()),g=Object(l.a)(p,2),O=g[0],j=(g[1],Object(n.useState)(new Date("2019-12-31").getTime())),h=Object(l.a)(j,2),v=h[0],y=(h[1],Object(n.useState)(!0)),w=Object(l.a)(y,2),E=w[0],S=w[1];Object(f.a)("h",function(){S(function(e){return!e})}),Object(n.useEffect)(function(){var e=function(){return new Promise(function(e){setTimeout(function(){var t=Math.ceil(10*Math.random());console.log("mockApi done"),e(t)},2e3)})};function t(){return(t=Object(s.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=5;break}return t.next=3,e();case 3:t.sent,o(!0);case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){t.apply(this,arguments)}()},[]);var N=Object(n.useState)(!1),D=Object(l.a)(N,2),M=D[0],I=D[1],G=Object(A.a)(window.document.body),U=(G.isFullscreen,G.toggleFullscreen);return Object(f.a)("f",U),console.log("app renders"),r.a.createElement("div",{className:"App"},r.a.createElement(C.a,{enabled:M,onChange:function(){M||I(!1)}},r.a.createElement("div",{className:"DateTimeLabel"},r.a.createElement(L,{vertical:E})),r.a.createElement("div",{className:"ClockController"},r.a.createElement(m,{duration:"600000"})),r.a.createElement("div",{className:"Globe"},r.a.createElement(T,{id:"globe",starfield:"true",atmosphere:"true",clon:"0.5",clat:"40",names:"true"})),r.a.createElement("div",{className:E?"TimeSelectorv":"TimeSelectorh"},r.a.createElement(P,{min:O,max:v,vertical:E})),r.a.createElement("div",{className:"MissionLabel"},b),r.a.createElement(R,null),r.a.createElement(F,{active:"false",imageSrc:"./images/ESA_logo_white.png"},r.a.createElement(k,null),r.a.createElement(x,null),r.a.createElement(W,null)),r.a.createElement(_,{action:"Bonjour"})))};var B=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function H(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}console.log("init global: "+(new Date).getTime()),Object(d.setGlobal)({appdate:(new Date).getTime(),searchepoch:(new Date).getTime(),mission:"S1",searching:!1,apppolygon:"",replace:!0,startend:{start:0,end:0},apppickeditems:[]}),Object(o.render)(r.a.createElement(q,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/reactwww",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/reactwww","/service-worker.js");B?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):H(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):H(e)})}}()}},[[102,1,2]]]);
//# sourceMappingURL=main.645bc0bc.chunk.js.map