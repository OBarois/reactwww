(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){e.exports=a(232)},108:function(e,t){},109:function(e,t){},110:function(e,t){},114:function(e,t){},116:function(e,t){},151:function(e,t){},152:function(e,t){},207:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=207},208:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){},218:function(e,t,a){},219:function(e,t,a){},232:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(53),c=a(16),i=a.n(c),s=a(22),l=a(1);function u(e){var t=e.autoStart,a=e.duration,r=e.startdate,o=Object(n.useState)(r),c=Object(l.a)(o,2),i=c[0],s=c[1],u=Object(n.useState)(!1),d=Object(l.a)(u,2),b=d[0],f=d[1],m=Object(n.useRef)(),g=50;var p=Object(n.useRef)(),j=Object(n.useRef)(g),O=Object(n.useRef)();function v(){console.log("starting Timer... (will stop in "+a/1e3+" sec)"),p.current||(p.current=setInterval(function(){return function(e){m.current+=e,s(m.current)}(j.current)},g),f(!0)),O.current=setTimeout(function(){h()},a)}function h(){console.log("toggle clock"),O.current&&clearTimeout(O.current),p.current?(f(!1),clearInterval(p.current),p.current=void 0):v()}return Object(n.useEffect)(function(){s((new Date).getTime()),m.current=i,t&&v()},[]),{date:i,playing:b,togglePause:h,reset:function(){console.log("reset"),p.current&&(clearInterval(p.current),p.current=void 0,f(!1));var e=(new Date).getTime();j.current=g,s(e),m.current=e},increaseSpeed:function(){j.current=j.current>0?j.current*=2:j.current/=2,Math.abs(j.current)<g&&(j.current=g)},decreaseSpeed:function(){j.current=j.current>0?j.current/=2:j.current*=2,Math.abs(j.current)<g&&(j.current=-1*g)},forceDate:function(e){m.current=e}}}var d=a(3),b=a.n(d),f=a(7);var m=function(e){var t=e.duration,a=Object(d.useGlobal)("appdate"),o=Object(l.a)(a,2),c=o[0],i=o[1],s=u({autoStart:!1,duration:t,startdate:c}),b=s.date,m=(s.playing,s.togglePause),g=s.reset,p=s.increaseSpeed,j=s.decreaseSpeed,O=s.forceDate;Object(f.a)("t",m),Object(f.a)("r",g),Object(f.a)(".",p),Object(f.a)(",",j),Object(n.useEffect)(function(){i(b)},[b]),Object(n.useEffect)(function(){O(c)},[c]),Object(n.useEffect)(function(){O(c)},[]);var v=Object(n.useState)(),h=Object(l.a)(v,2),y=h[0],w=h[1];return r.a.createElement("div",{className:"ClockController",onClick:function(){console.log("pressed");var e=Date.now();y&&e-y<300?g():(w(e),m())}})},g=a(11),p=a(2),j=a.n(p),O=a(95),v=a.n(O);function h(e){var t=[];try{t=e.feed.entry?e.feed.entry.map(function(e){return function(e){function t(e){for(var t={},a=0;a<e.length;a++)t[e[a].name]=e[a].content;return t}try{var a={};e.date&&Object.assign(a,t(e.date)),e.int&&Object.assign(a,t(e.int)),e.double&&Object.assign(a,t(e.double)),e.str&&Object.assign(a,t(e.str));var n,r=a.size.split(" ");switch(r[1]){case"B":n=Math.round(parseFloat(r[0]));break;case"MB":n=Math.round(1024*parseFloat(r[0]));break;case"GB":n=Math.round(1024*parseFloat(r[0])*1024);break;case"TB":n=Math.round(1024*parseFloat(r[0])*1024*1024);break;default:n=Math.round(parseFloat(r[0]))}return{id:e.title,geometry:v()(a.footprint),type:"Feature",properties:{updated:new Date(a.ingestiondate),title:e.title,name:e.title,date:a.beginposition+"/"+a.endposition,links:{data:[{href:e.link[0].href}]},earthObservation:{parentIdentifier:"",status:"ARCHIVED",acquisitionInformation:[{platform:{platformShortName:a.platformname,platformSerialIdentifier:a.platformserialidentifier},sensor:{instrument:a.instrumentshortname,operationalMode:a.sensoroperationalmode},acquisitionParameter:{acquisitionStartTime:new Date(a.beginposition),acquisitionStopTime:new Date(a.endposition),relativePassNumber:parseInt(a.relativeorbitnumber),orbitNumber:parseInt(a.orbitnumber),startTimeFromAscendingNode:null,stopTimeFromAscendingNode:null,orbitDirection:a.orbitdirection}}],productInformation:{productType:a.producttype,size:n}}}}}catch(o){return console.log("error parsing item from dhus: "+o.message),{}}}(e)}).filter(function(e){return e!=={}}):[]}catch(a){console.log(e),console.log("Error: "),console.log(a),t=[]}return{type:"FeatureCollection",id:"search",properties:{totalResults:e.feed["opensearch:totalResults"],startIndex:e.feed["opensearch:startIndex"]?e.feed["opensearch:startIndex"]:1,itemsPerPage:e.feed["opensearch:itemsPerPage"],title:"DHuS search response",updated:new Date},features:t}}var y=a(19),w=a.n(y);a(107);function E(){var e=[];e.S1="https://131.176.236.55/dhus/search?q=({polygon}%20beginposition:[{start}%20TO%20{end}]%20AND%20platformname:Sentinel-1%20AND%20producttype:GRD)&start={startindex}&rows=100&sortedby=ingestiondate&order=desc&format=json",e.S2="https://131.176.236.55/dhus/search?q=(%20beginposition:[{start}%20TO%20{end}]%20AND%20platformname:Sentinel-2%20AND%20producttype:S2MSI1C)&start={startindex}&rows=100&sortedby=ingestiondate&order=desc&format=json",e.S3="https://131.176.236.55/dhus/search?q=(%20beginposition:[{start}%20TO%20{end}]%20AND%20platformname:Sentinel-3%20AND%20(producttype:OL_1_ERR___%20OR%20producttype:SL_1_RBT___%20OR%20producttype:SR_1_SRA___))&start={startindex}&rows=100&sortedby=ingestiondate&order=desc&format=json",e.S5P="https://s5phub.copernicus.eu/search?q=(%20beginposition:[{start}%20TO%20{end}]%20AND%20platformname:Sentinel-5 precursor%20AND%20(producttype:L1B_RA_BD1%20OR%20(producttype:L2__NO2___%20AND%20processingmode:Near real time)))&start={startindex}&rows=100&sortedby=ingestiondate&order=desc&format=json",e.ENVISAT="https://eocat.esa.int/ngeo/catalogue/FEDEO-ENVISAT.ASA.IMP_1P/search?start={start}&stop={end}&format=json&count=50&startIndex={startindex}";var t=Object(n.useState)(null),a=Object(l.a)(t,2),r=a[0],o=a[1],c=Object(n.useState)(!1),u=Object(l.a)(c,2),b=u[0],f=u[1],m=Object(n.useState)(!0),g=Object(l.a)(m,2),p=g[0],j=g[1],O=Object(d.useGlobal)("searchdate"),v=Object(l.a)(O,1)[0],y=Object(d.useGlobal)("mission"),E=Object(l.a)(y,1)[0],S=Object(d.useGlobal)("apppolygon"),N=Object(l.a)(S,1)[0],T=Object(n.useState)(null),D=Object(l.a)(T,2),k=D[0],M=D[1],C=Object(n.useState)({totalresults:0,startindex:0,itemsperpage:0}),x=Object(l.a)(C,2),L=x[0],P=x[1];return Object(n.useEffect)(function(){k&&function(){var e=Object(s.a)(i.a.mark(function e(t){var a,n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Search: "+t),e.prev=1,e.next=4,fetch(t,{mode:"cors",credentials:"include"});case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,r="ENVISAT"===E?n:h(n),console.log("totalResults: "+r.properties.totalResults),P({totalresults:Number(r.properties.totalResults),startindex:Number(r.properties.startIndex),itemsperpage:Number(r.properties.itemsPerPage)}),Number(r.properties.totalResults>0)&&o(r),j(L.startindex+L.itemsperpage<L.totalresults),console.log("true"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.log("Didn't recieve a json !"),f(!1);case 20:case"end":return e.stop()}},e,null,[[1,16]])}));return function(t){return e.apply(this,arguments)}}()(k)},[k]),Object(n.useEffect)(function(){if(console.log(L),L.startindex+L.itemsperpage<L.totalresults){var t=e[E];console.log("There's More...");try{t=(t=(t=(t=t.replace("{polygon}",""!==N?'%20footprint:"Intersects('+N+')"':"")).replace("{start}",w()(new Date(v-54e5),"isoUtcDateTime"))).replace("{end}",w()(new Date(v+54e5),"isoUtcDateTime"))).replace("{startindex}",L.startindex+L.itemsperpage),M(t)}catch(a){console.log("Not a JULIAN date !"),f(!1)}}else f(!1)},[L]),Object(n.useEffect)(function(){console.log("DataHub ready. "+E)},[]),Object(n.useEffect)(function(){console.log("apppolygon: "+N)},[N]),Object(n.useEffect)(function(){if(console.log("mission "+E),console.log("searchdate "+v),E&&v){var t=e[E];try{console.log(!!N),t=(t=(t=(t=t.replace("{polygon}",""!==N?'%20footprint:"Intersects('+N+')"':"")).replace("{start}",w()(new Date(v-54e5),"isoUtcDateTime"))).replace("{end}",w()(new Date(v+54e5),"isoUtcDateTime"))).replace("{startindex}",0),f(!0),M(t)}catch(a){console.log("Not a JULIAN date !")}}},[v,E]),{geojsonResults:r,loading:b,isfirstpage:p}}function S(e){var t=e.id,a=e.clon,r=e.clat,o=e.alt,c=e.starfield,i=e.atmosphere,s=e.names,u=Object(n.useRef)(null),d=Object(n.useState)("3D"),b=Object(l.a)(d,2),f=(b[0],b[1]),m=Object(n.useState)([]),p=Object(l.a)(m,2),O=p[0],v=p[1],h=Object(n.useState)({latitude:r,longitude:a,altitude:o}),y=Object(l.a)(h,2),w=y[0],E=y[1];var S=function(){var e=u.current.navigator.lookAtLocation.longitude,t=u.current.navigator.lookAtLocation.latitude,a=u.current.navigator.range,n=function(){var e,t,a=u.current.viewport,n="";try{(e=u.current.pickTerrain(u.current.canvasCoordinates(a.x,a.y+a.height)).terrainObject().position).latitude=Math.round(1e4*e.latitude)/1e4,e.longitude=Math.round(1e4*e.longitude)/1e4}catch(r){e=null}try{(t=u.current.pickTerrain(u.current.canvasCoordinates(a.x+a.width,a.y)).terrainObject().position).latitude=Math.round(1e4*t.latitude)/1e4,t.longitude=Math.round(1e4*t.longitude)/1e4}catch(r){t=null}return null==e||null==t?n="":(e.longitude,e.latitude,t.longitude,t.latitude,n="POLYGON(("+e.longitude+" "+e.latitude+","+t.longitude+" "+e.latitude+","+t.longitude+" "+t.latitude+","+e.longitude+" "+t.latitude+","+e.longitude+" "+e.latitude+"))"),n}();E({longitude:e,latitude:t,altitude:a,viewpolygon:n})},N=function(){console.log("click")},T=function(){console.log("double click")};return Object(n.useEffect)(function(){console.log("useEffect (mount) in Eww  star/atmo: "+c+"/"+i),u.current=new j.a.WorldWindow(t),u.current.redrawCallbacks.push(S),j.a.BasicWorldWindowController.prototype.applyLimits=function(){this.wwd.navigator.range=j.a.WWMath.clamp(u.current.navigator.range,2e3,3e8)};var e=new j.a.TapRecognizer(u.current,N);e.numberOfTaps=1;var n=new j.a.TapRecognizer(u.current,T);n.numberOfTaps=2,n.recognizeSimultaneouslyWith(e);var l={service:"https://tiles.maps.eox.at/wms",layerNames:"s2cloudless-2018",numLevels:19,format:"image/png",size:256,sector:j.a.Sector.FULL_SPHERE,levelZeroDelta:new j.a.Location(90,90)},d={service:"https://tiles.maps.eox.at/wms",layerNames:"overlay_bright",numLevels:19,format:"image/png",size:256,sector:j.a.Sector.FULL_SPHERE,levelZeroDelta:new j.a.Location(90,90)};j.a.configuration.baseUrl=j.a.configuration.baseUrl.slice(0,-3);for(var b=new j.a.StarFieldLayer,f=new j.a.AtmosphereLayer("images/BlackMarble_2016_01deg.jpg"),m=[{layer:new j.a.WmsLayer(l,""),enabled:!0},{layer:new j.a.WmsLayer(d,""),enabled:s},{layer:b,enabled:c},{layer:f,enabled:i}],g=0;g<m.length;g++)m[g].layer.enabled=m[g].enabled,u.current.addLayer(m[g].layer);b.time=new Date,f.time=new Date,setTimeout(function(){u.current.goToAnimator.travelTime=1e3,u.current.goTo(new j.a.Position(r,a,o)),u.current.redraw()},2e3),u.current.redraw(),u.current.deepPicking=!0},[]),{ewwstate:w,removeGeojson:function(){for(var e=0;e<O.length;e++)u.current.removeLayer(O[e]);v([]),u.current.redraw()},addGeojson:function(e){var t=new j.a.RenderableLayer(e.properties.updated+Math.ceil(1e4*Math.random()));u.current.addLayer(t),new j.a.GeoJSONParser(e).load(function(){console.log(t),v(function(e){return[].concat(Object(g.a)(e),[t])}),u.current.redraw()},function(e,t){var a={};a.userProperties=t;var n=new j.a.PlacemarkAttributes(null);return n.imageScale=10,n.imageColor=new j.a.Color(0,1,1,.2),n.labelAttributes.offset=new j.a.Offset(j.a.OFFSET_FRACTION,5,j.a.OFFSET_FRACTION,5),e.isPointType()||e.isMultiPointType()?a.attributes=new j.a.PlacemarkAttributes(n):e.isLineStringType()||e.isMultiLineStringType()?(a.attributes.drawOutline=!0,a.attributes.outlineColor=new j.a.Color(.1*a.attributes.interiorColor.red,.3*a.attributes.interiorColor.green,.7*a.attributes.interiorColor.blue,1),a.attributes.outlineWidth=1):(e.isPolygonType()||e.isMultiPolygonType())&&(a.attributes=new j.a.ShapeAttributes(null),a.attributes.interiorColor=new j.a.Color(1,0,0,.2),a.attributes.outlineColor=new j.a.Color(1,0,0,.3)),a},t)},addWMS:function(e){new j.a.WmsLayer(e,"")},toggleStarfield:function(){console.log("toggleStarfield"),u.current.layers[2].enabled=!u.current.layers[2].enabled,u.current.redraw()},toggleAtmosphere:function(){console.log("toggleAtmosphere"),u.current.layers[3].enabled=!u.current.layers[3].enabled,u.current.redraw()},setTime:function(e){u.current.layers[2].time=u.current.layers[3].time=new Date(e),u.current.redraw()},toggleProjection:function(){f(function(e){console.log("prevProjection: "+e);var t=["3D","Equirectangular","Mercator"],a=(t.indexOf(e)+1)%t.length;switch(console.log("newProjection: "+t[a]),t[a]){case"3D":u.current.globe.projection=new j.a.ProjectionWgs84;break;case"Equirectangular":u.current.globe.projection=new j.a.ProjectionEquirectangular;break;case"Mercator":u.current.globe.projection=new j.a.ProjectionMercator;break;case"North Polar":u.current.globe.projection=new j.a.ProjectionPolarEquidistant("North");break;case"South Polar":u.current.globe.projection=new j.a.ProjectionPolarEquidistant("South");break;default:u.current.globe.projection=new j.a.ProjectionWgs84}return u.current.redraw(),t[a]})},toggleNames:function(){console.log("toggleNames"),u.current.layers[1].enabled=!u.current.layers[1].enabled,u.current.redraw()}}}function N(e){var t=e.id,a=e.clat,n=e.clon,r=e.alt,o=e.starfield,c=e.atmosphere,i=e.names,s=S({id:t,clat:a,clon:n,alt:r,starfield:o,atmosphere:c,names:i}),u=s.ewwstate,m=s.addGeojson,g=s.removeGeojson,p=(s.addWMS,s.toggleProjection),j=s.toggleAtmosphere,O=s.toggleStarfield,v=s.toggleNames,h=s.setTime;Object(f.a)("p",p),Object(f.a)("a",j),Object(f.a)("s",O),Object(f.a)("n",v),Object(f.a)("c",g);var y=E(),w=y.geojsonResults,N=y.loading,T=Object(d.useGlobal)("searchdate"),D=Object(l.a)(T,1)[0],k=Object(d.useGlobal)("mission"),M=Object(l.a)(k,1)[0],C=Object(d.useGlobal)("appdate"),x=Object(l.a)(C,1)[0],L=Object(d.useGlobal)("appstarfield"),P=Object(l.a)(L,2),A=P[0],G=P[1],_=Object(d.useGlobal)("appatmosphere"),R=Object(l.a)(_,2),I=R[0],F=R[1],U=Object(d.useGlobal)("appnames"),W=Object(l.a)(U,2),B=W[0],H=W[1],q=Object(d.useGlobal)("searching"),z=Object(l.a)(q,2)[1],J=Object(d.useGlobal)("appaltitude"),Y=Object(l.a)(J,2)[1],V=Object(d.useGlobal)("applatitude"),Z=Object(l.a)(V,2)[1],K=Object(d.useGlobal)("applongitude"),$=Object(l.a)(K,2)[1],Q=Object(d.useGlobal)("apppolygon"),X=Object(l.a)(Q,2)[1];Object(d.useEffect)(function(){if(w){console.log("datahub in use"),console.log(w);try{m(w)}catch(e){console.log("error on geojson parsing"),console.log(e)}}},[w]),Object(d.useEffect)(function(){console.log("reacting to searchdate or mission"),g()},[D,M]),Object(d.useEffect)(function(){console.log("atmosphere"),j(I)},[I]),Object(d.useEffect)(function(){O(A)},[A]),Object(d.useEffect)(function(){v(B)},[B]),Object(d.useEffect)(function(){z(N)},[N]),Object(d.useEffect)(function(){Y(u.altitude),$(u.longitude),Z(u.latitude)},[u.longitude,u.latitude,u.altitude]),Object(d.useEffect)(function(){X(u.viewpolygon),X("")},[u.viewpolygon]),Object(d.useEffect)(function(){h(x)},[x]),Object(d.useEffect)(function(){F(c),G(o),H(i)},[]);return b.a.createElement("canvas",{id:t,style:{background:"inherit",position:"fixed",width:"inherit",height:"inherit"}})}a(208);var T=function(){var e=Object(d.useGlobal)("mission"),t=Object(l.a)(e,2),a=(t[0],t[1]);return Object(f.a)("1",function(){a("S1")}),Object(f.a)("2",function(){a("S2")}),Object(f.a)("3",function(){a("S3")}),Object(f.a)("5",function(){a("S5P")}),Object(f.a)("6",function(){a("ENVISAT")}),r.a.createElement("div",{className:"MissionSelector"},r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",src:"./images/s1_black.png",alt:"",onClick:function(){return a("S1")}})),r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",src:"./images/s2_black.png",alt:"",onClick:function(){return a("S2")}})),r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",src:"./images/s3_black.png",alt:"",onClick:function(){return a("S3")}})),r.a.createElement("div",{className:"Circle"},r.a.createElement("img",{className:"MissionIcon",src:"./images/s5p_black.png",alt:"",onClick:function(){return a("S5P")}})))},D=a(96),k=a.n(D),M=a(97),C=(a(212),a(39)),x=a(98),L=(a(213),a(33));a(214);var P=function(e){var t=e.action,a=Object(n.useState)(t),o=Object(l.a)(a,2),c=o[0],i=o[1];return Object(f.a)("m",function(){i(function(e){return!e})}),Object(n.useEffect)(function(){console.log("Debug Overlay: press D "),console.log("action (use): "+t)},[]),Object(n.useEffect)(function(){console.log("active: "+c)},[c]),console.log("active rendered"),r.a.createElement("div",{className:"StepMask",style:{display:c?"inline":"none"}},r.a.createElement("div",{className:"DayMask",style:{display:c?"inline":"none"}}),r.a.createElement("div",{className:"MonthMask",style:{display:c?"inline":"none"}}),r.a.createElement("div",{className:"YearMask",style:{display:c?"inline":"none"}}))};var A=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),o=a[0],c=a[1];Object(n.useEffect)(function(){console.log("debug: "+o)},[o]);var i,s=(e.max-e.min)/(40*(e.max-e.min)/864e5),u=e.min,b=u+(e.max-e.min)/s,f=0;e.vertical?(f=b-u,i=100):(i=b-u,f=100);var m=Object(d.useGlobal)("appdate"),g=Object(l.a)(m,2),p=g[0],j=g[1],O=Object(d.useGlobal)("searchdate"),v=Object(l.a)(O,2)[1],h=Object(d.useGlobal)("highlight"),y=Object(l.a)(h,2)[1],w=Object(n.useState)(new Date),E=Object(l.a)(w,2),S=E[0],N=E[1],T=Object(n.useState)(!1),D=Object(l.a)(T,2),k=D[0],M=D[1],A=Object(n.useState)("continuous"),G=Object(l.a)(A,2),_=G[0],R=G[1],I=Object(n.useRef)();I.current=e.vertical;var F=Object(n.useRef)(),U=Object(C.b)(function(){return{xy:[0,0]}}),W=Object(l.a)(U,2),B=W[0].xy,H=W[1],q=Object(x.a)({onDrag:function(e){var t=e.down,a=e.delta,n=(e.distance,e.velocity),r=e.active,o=e.direction,c=(e.wheeling,e.time),i=(e.first,e.last,e.temp),l=void 0===i?{xy:B.getValue(),deltaOffset:[0,0],deltaCumul:[0,0],lastNewxy:[0,0],lastStep:1,lastIncrement:0,lastDown:!1,lastTime:c}:i;if(Object(L.scale)(o,n),n=n<.15?0:n,c-l.lastTime>1e3&&(console.log("deltaCumul..."),console.log(l.deltaCumul),l.deltaCumul<.01&&console.log("STABLE !!"),l.lastTime=c,l.deltaCumul=0),l.deltaCumul+=n,t||R(1),t!=l.lastDown&&M(!0),l.lastDown=t,I.current){var d=F.current.parentElement.offsetHeight,b=1,f=1;a[0]<-30&&(b=864e5/s,f=10),a[0]<-80&&(b=2592e6/s,f=15),a[0]<-160&&(b=31536e6/s,f=30),b!==l.lastStep&&(R(b),l.deltaOffset=a,l.xy=l.lastNewxy),a=Object(L.sub)(a,l.deltaOffset);var m=[Math.round(a[0]/f)*b,Math.round(a[1]/f)*b];t&&(n=0);var g=Object(L.add)(Object(L.scale)(m,Math.pow(n+1,2.5)),l.xy);b!==l.lastStep&&(l.xy=g,l.lastStep=b),l.lastNewxy=g;var p=F.current.parentElement.offsetTop+F.current.parentElement.offsetHeight/2,j=-F.current.offsetHeight+F.current.parentElement.offsetHeight/2;g[1]=g[1]>p?p:g[1],g[1]=g[1]<j?j:g[1],H({xy:g,config:t?{mass:1,tension:1200,friction:40,precision:.01}:{mass:1,tension:200,friction:40,precision:1},immediate:t,onRest:function(e){var a=e.xy;t||r||M(!1),t||v(u+(-a[1]+d/2)*s)},onFrame:function(e){var t=e.xy;N(u+(-t[1]+d/2)*s)}})}return l}}),z=Object(n.useState)(""),J=Object(l.a)(z,2),Y=J[0],V=J[1];return Object(n.useLayoutEffect)(function(){V(function(){for(var t,a,n,o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=0,i=0,l=[],u=e.vertical?"DayTic-v":"DayTic",d=e.vertical?"MonthTic-v":"MonthTic",b=e.vertical?"YearTic-v":"YearTic",f=e.min;f<=e.max;f+=36e5)t=new Date(f).getUTCDate(),a=o[new Date(f).getUTCMonth()],new Date(f).getUTCHours(),c=new Date(f).getUTCFullYear(),t!==n&&l.push({class:u,pos:(f-e.min)/s,label:t}),a!==i&&(l.push({class:d,pos:(f-e.min)/s,label:a}),l.push({class:b,pos:(f-e.min)/s,label:c})),n=t,i=a;return l.map(function(t){return r.a.createElement("div",{className:t.class,key:t.class+t.pos,style:e.vertical?{top:t.pos}:{left:t.pos}},t.label)})}(e.vertical))},[e.vertical]),Object(n.useLayoutEffect)(function(){var t=0;k||(e.vertical?(t=(u-p)/s+F.current.parentElement.offsetHeight/2,H({xy:[0,t],config:{tension:1200,friction:40},onFrame:null,onRest:null})):(t=(u-p)/s+F.current.parentElement.offsetWidth/2,H({xy:[t,0],config:{tension:1200,friction:40},onFrame:null,onRest:null})))},[p,Y]),Object(n.useEffect)(function(){j(S)},[S]),Object(n.useEffect)(function(){switch(console.log("Step changed to: "+_),c("Step changed to: "+_),_){case 40:y("day");break;case 1200:y("month");break;case 14600:y("year");break;default:y("none")}},[_]),Object(n.useLayoutEffect)(function(){console.log("zoom changed to: "+e.zoom)},[e.zoom]),r.a.createElement("div",{className:e.vertical?"Mask-v":"Mask"},r.a.createElement("div",{className:"TriangleContainer"},r.a.createElement("svg",{height:"40",width:"20",className:"Triangle"},r.a.createElement("polygon",{points:"20,5 20,35 12,20"}))),r.a.createElement("div",{className:"TimeContainer",ref:F},r.a.createElement(C.a.div,Object.assign({className:"TimeScale"},q(),{style:{width:i,height:f,transform:B.interpolate(function(e,t){return"translate3d(0px,".concat(t,"px,0)")})}}),Y)),r.a.createElement(P,null))};a(215);var G=function(){var e=Object(d.useGlobal)("appdate"),t=Object(l.a)(e,1)[0],a=Object(d.useGlobal)("highlight"),o=Object(l.a)(a,1)[0],c=Object(d.useGlobal)("searching"),i=Object(l.a)(c,1)[0],s=Object(n.useState)(""),u=Object(l.a)(s,2),b=u[0],f=u[1],m=Object(n.useState)(""),g=Object(l.a)(m,2),p=g[0],j=g[1],O=Object(n.useState)(""),v=Object(l.a)(O,2),h=v[0],y=v[1],E=Object(n.useState)(""),S=Object(l.a)(E,2),N=S[0],T=S[1];return Object(n.useLayoutEffect)(function(){var e=new Date(t);f(e.getUTCFullYear()),j(w()(e,"UTC:mmm")),y(w()(e,"UTC:dd")),T(w()(e,"UTC:HH:MM:ss"))},[t]),Object(n.useLayoutEffect)(function(){console.log("Searching: "+i)},[i]),r.a.createElement("div",{className:"LabelCountainer"},r.a.createElement("div",{className:!0===i?"Line  Line-active":"Line",key:"line"},"____"),r.a.createElement("div",{className:"day"===o?"DayLabel  Highlighted":"DayLabel",key:"day"},h),r.a.createElement("div",{className:"year"===o?"YearLabel  Highlighted":"YearLabel",key:"year"},b),r.a.createElement("div",{className:"month"===o?"MonthLabel  Highlighted":"MonthLabel",key:"month"},p),r.a.createElement("div",{className:"TimeLabel",key:"time"},N))};a(216);var _=function(){var e=Object(d.useGlobal)("appaltitude"),t=Object(l.a)(e,1)[0];return r.a.createElement("div",{className:"MapStateLabel"},r.a.createElement("div",null,Math.ceil(t/1e3)+" Km"))};a(217);var R=function(e){var t=e.action,a=Object(n.useState)(!1),o=Object(l.a)(a,2),c=o[0],i=o[1];return Object(f.a)("d",function(){i(function(e){return!e})}),Object(n.useEffect)(function(){console.log("Debug Overlay: press D "),console.log("action (use): "+t)},[]),Object(n.useEffect)(function(){console.log("debug: "+c)},[c]),console.log("debug rendered"),r.a.createElement("div",{className:"Debug",style:{display:c?"inline":"none",width:"100%",height:"100%"}})},I=a(99);a(218),a(219);var F=function(){var e=Object(d.useGlobal)("appatmosphere"),t=Object(l.a)(e,2),a=t[0],n=t[1],r=Object(d.useGlobal)("appstarfield"),o=Object(l.a)(r,2),c=o[0],i=o[1],s=Object(d.useGlobal)("appnames"),u=Object(l.a)(s,2),f=u[0],m=u[1];return b.a.createElement("div",{className:"MapSelector"},b.a.createElement("div",{className:"CircleButton"},b.a.createElement("img",{className:"MapIcon",src:"./images/atmosphere.png",alt:"",onClick:function(){return n(!a)}})),b.a.createElement("div",{className:"CircleButton"},b.a.createElement("img",{className:"MapIcon",src:"./images/starfield.png",alt:"",onClick:function(){return i(!c)}})),b.a.createElement("div",{className:"CircleButton"},b.a.createElement("img",{className:"MapIcon",src:"./images/names.png",alt:"",onClick:function(){return m(!f)}})))};var U=function(e){var t=e.active,a={opacity:1,marginRight:0},n={opacity:0,marginRight:-500};return r.a.createElement(I.Spring,{from:t?n:a,to:t?a:n},function(e){return r.a.createElement("div",{className:"ControlPanel",style:e},r.a.createElement(T,null),r.a.createElement(F,null))})},W=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],o=t[1],c=Object(d.useGlobal)("mission"),u=Object(l.a)(c,2),b=u[0];u[1];Object(n.useEffect)(function(){console.log("Mission changed to: "+b)},[b]);var g=Object(n.useState)(new Date("2015-04-10").getTime()),p=Object(l.a)(g,2),j=p[0],O=(p[1],Object(n.useState)(new Date("2019-12-31").getTime())),v=Object(l.a)(O,2),h=v[0],y=(v[1],Object(n.useState)(!0)),w=Object(l.a)(y,2),E=w[0],S=w[1];Object(f.a)("h",function(){S(function(e){return!e})}),Object(n.useEffect)(function(){var e=function(){return new Promise(function(e){setTimeout(function(){var t=Math.ceil(10*Math.random());console.log("mockApi done"),e(t)},2e3)})};function t(){return(t=Object(s.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=5;break}return t.next=3,e();case 3:t.sent,o(!0);case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){t.apply(this,arguments)}()},[]);var T=Object(n.useState)(!1),D=Object(l.a)(T,2),C=D[0],x=D[1],L=Object(M.a)(window.document.body),I=(L.isFullscreen,L.toggleFullscreen),F=Object(n.useState)(!1),W=Object(l.a)(F,2),B=W[0],H=W[1];return Object(f.a)("f",I),console.log("app renders"),r.a.createElement("div",{className:"App"},r.a.createElement(k.a,{enabled:C,onChange:function(){C||x(!1)}},r.a.createElement("div",{className:"DateTimeLabel"},r.a.createElement(G,{vertical:E})),r.a.createElement("div",{className:"ClockController"},r.a.createElement(m,{duration:"600000"})),r.a.createElement("div",{className:"Globe"},r.a.createElement(N,{id:"globe",starfield:"true",atmosphere:"true",clon:"0.5",clat:"40",names:"true"})),r.a.createElement("div",{className:E?"TimeSelectorv":"TimeSelectorh"},r.a.createElement(A,{min:j,max:h,vertical:E})),r.a.createElement("img",{className:"Logo",src:"./images/EOi_logo.png",alt:"",onClick:function(){return H(function(e){return!e})}}),r.a.createElement("div",{className:"MissionLabel"},b),r.a.createElement(_,null),r.a.createElement(U,{active:B}),r.a.createElement(R,{action:"Bonjour"}),r.a.createElement(P,null)))};var B=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function H(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}console.log("init global: "+(new Date).getTime()),Object(d.setGlobal)({appdate:(new Date).getTime()}),Object(d.setGlobal)({searchdate:(new Date).getTime()}),Object(d.setGlobal)({mission:"S1"}),Object(d.setGlobal)({searching:!1}),Object(d.setGlobal)({apppolygon:""}),Object(o.render)(r.a.createElement(W,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/reactwww",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/reactwww","/service-worker.js");B?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):H(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):H(e)})}}()}},[[100,1,2]]]);
//# sourceMappingURL=main.1d232773.chunk.js.map