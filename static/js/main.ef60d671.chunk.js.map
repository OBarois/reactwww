{"version":3,"sources":["useClock.js","clockController.js","dhusToGeojson.js","map.js","useDatahub.js","missionselector.js","timeselector.js","timelabel2.js","debug.js","app.js","registerServiceWorker.js","initglobalstates.js","index.js"],"names":["useClock","_ref","autoStart","duration","initDate","startdate","_useState","useState","_useState2","Object","slicedToArray","date","setDate","_useState3","_useState4","playing","setPlaying","ldate","useRef","refreshRate","intervalRef","step","timeoutRef","start","current","setInterval","incrementDate","setTimeout","togglePause","console","log","clearTimeout","clearInterval","undefined","useEffect","Date","getTime","reset","increaseSpeed","Math","abs","decreaseSpeed","forceDate","newdate","ClockController","_useGlobal","useGlobal","_useGlobal2","appdate","setAppdate","_useClock","useHotkeys","lastTap","setLasttap","react_default","a","createElement","className","onClick","now","dhusToGeojson","response","features","feed","entry","map","item","reshuffle","array","json","i","length","name","content","hubItem","assign","int","double","str","sizeInBytes","sizeArray","size","split","round","parseFloat","id","title","geometry","wellknown","footprint","type","properties","updated","ingestiondate","beginposition","endposition","links","data","href","link","earthObservation","parentIdentifier","status","acquisitionInformation","platform","platformShortName","platformname","platformSerialIdentifier","platformserialidentifier","sensor","instrument","instrumentshortname","operationalMode","sensoroperationalmode","acquisitionParameter","acquisitionStartTime","acquisitionStopTime","relativePassNumber","parseInt","relativeorbitnumber","orbitNumber","orbitnumber","startTimeFromAscendingNode","stopTimeFromAscendingNode","orbitDirection","orbitdirection","productInformation","productType","producttype","err","message","mapFromHubOpenSearch","filter","totalResults","startIndex","itemsPerPage","Map","props","clon","clat","alt","wwd","setProjection","prevProj","supportedProjections","newProj","indexOf","globe","projection","WorldWind","ProjectionWgs84","ProjectionEquirectangular","ProjectionMercator","ProjectionPolarEquidistant","redraw","removeGeoJson","geojsonlayers","setGeojsonlayers","removeLayer","layers","enabled","WorldWindow","wmsConfigBg","service","layerNames","numLevels","format","sector","Sector","FULL_SPHERE","levelZeroDelta","Location","wmsConfigNames","configuration","baseUrl","slice","starFieldLayer","StarFieldLayer","atmosphereLayer","AtmosphereLayer","minActiveAltitude","layer","WmsLayer","starfield","atmosphere","l","addLayer","time","goToAnimator","travelTime","goTo","Position","deepPicking","geojsonResults","searchURLs","setGeojsonResults","loading","setLoading","searchdate","_useGlobal3","mission","_useState5","_useState6","searchUrl","setSearchurl","asyncToGenerator","regenerator_default","mark","_callee","geoJson","wrap","_context","prev","next","fetch","mode","credentials","sent","t0","stop","apply","this","arguments","fetchURL","url","replace","dateFormat","windowSize","_unused2","useDatahub","renderableLayer","RenderableLayer","GeoJSONParser","load","concat","toConsumableArray","placemarkAttributes","PlacemarkAttributes","imageScale","imageColor","Color","labelAttributes","offset","Offset","OFFSET_FRACTION","isPointType","isMultiPointType","attributes","isLineStringType","isMultiLineStringType","drawOutline","outlineColor","interiorColor","red","green","blue","outlineWidth","isPolygonType","isMultiPolygonType","ShapeAttributes","addGeoJson","style","background","position","width","height","MissionSelector","setMission","src","TimeSelector","wid","zoomfactor","max","min","hei","vertical","setSearchdate","livePosition","setLiveposition","active","setActive","myvertical","timecontainer","_useSpring","useSpring","xy","_useSpring2","set","bind","useGesture","onDrag","down","delta","velocity","direction","_ref$temp","wheeling","first","last","temp","getValue","deltaOffset","lastNewxy","deltaFactor","lastStep","lastIncrement","lastDown","scale","parentElement","offsetHeight","div","sub","newxy","add","pow","minX","offsetTop","maxX","config","mass","tension","friction","precision","immediate","onRest","_ref3","onFrame","_ref2","timescale","setTimescale","useLayoutEffect","day","month","lastday","monthcode","year","lastmonth","tics","dayclass","monthclass","yearclass","getUTCDate","getUTCMonth","getUTCHours","getUTCFullYear","push","class","pos","label","key","top","left","scaleText","offsetWidth","zoom","points","ref","web","transform","interpolate","x","y","TimeLabel","highlight","Debug","action","debug","setDebug","display","right","App","hasFetched","setFetch","_useState7","_useState8","setVertical","prevVertical","mockApi","Promise","resolve","randomInt","ceil","random","_doFetch","doFetch","_useState9","_useState10","isFull","setIsfull","_useFullscreen","useFullscreen","window","document","body","toggleFullscreen","isFullscreen","dist_default","onChange","timelabel2","clockController","astmosphere","src_timeselector","src_missionselector","src_debug","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","catch","error","setGlobal","render","app","getElementById","URL","process","origin","addEventListener","headers","get","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"kRAGO,SAASA,EAATC,GAAsD,IAAlCC,EAAkCD,EAAlCC,UAAWC,EAAuBF,EAAvBE,SAI9BC,EAJqDH,EAAbI,UAAaC,EAKjCC,mBAASH,GALwBI,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAKlDK,EALkDH,EAAA,GAK5CI,EAL4CJ,EAAA,GAAAK,EAM3BN,oBAAS,GANkBO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAMlDE,EANkDD,EAAA,GAMzCE,EANyCF,EAAA,GAOnDG,EAAQC,mBAGRC,EAAc,GAWpB,IAAMC,EAAcF,mBACdG,EAAOH,iBAAOC,GACdG,EAAaJ,mBAYnB,SAASK,IACAH,EAAYI,UACbJ,EAAYI,QAAUC,YAAY,kBAzB1C,SAAuBJ,GAEnBJ,EAAMO,SAAWH,EAEjBT,EAAQK,EAAMO,SAqB8BE,CAAcL,EAAKG,UAAUL,GACrEH,GAAW,IAEfM,EAAWE,QAAUG,WAAW,WAC5BC,KAECzB,GAGT,SAASyB,IACLC,QAAQC,IAAI,gBACTR,EAAWE,SAASO,aAAaT,EAAWE,SAC3CJ,EAAYI,SACZR,GAAW,GACXgB,cAAcZ,EAAYI,SAC1BJ,EAAYI,aAAUS,GACnBV,IAoCb,OAbEW,oBAAU,WACNtB,GAAS,IAAIuB,MAAQC,WACrBP,QAAQC,IAAI,uBAAuBnB,GACnCM,EAAMO,QAAUb,EAChBkB,QAAQC,IAAI,iBAAiBb,EAAMO,SAC/BtB,IACA2B,QAAQC,IAAI,sBAAsB3B,EAAS,IAAK,SAChDoB,MAGL,IAGE,CAAEZ,OAAMI,UAASa,cAAaS,MAjCnC,WACIR,QAAQC,IAAI,SACRV,EAAYI,UACZQ,cAAcZ,EAAYI,SAC1BJ,EAAYI,aAAUS,EACtBjB,GAAW,IAEf,IAAIZ,GAAY,IAAI+B,MAAQC,UAC5Bf,EAAKG,QAAUL,EACfP,EAAQR,GACRa,EAAMO,QAAUpB,GAuBsBkC,cA/D1C,WACIjB,EAAKG,QAAWH,EAAKG,QAAU,EAAIH,EAAKG,SAAW,EAAEH,EAAKG,SAAW,EAClEe,KAAKC,IAAInB,EAAKG,SAAWL,IAAaE,EAAKG,QAAUL,IA6DHsB,cA3DzD,WACIpB,EAAKG,QAAWH,EAAKG,QAAU,EAAIH,EAAKG,SAAW,EAAEH,EAAKG,SAAW,EAClEe,KAAKC,IAAInB,EAAKG,SAAWL,IAAaE,EAAKG,SAAW,EAAIL,IAyDOuB,UAnBxE,SAAmBC,GACf1B,EAAMO,QAAUmB,sBCQTC,MAzEf,SAAA3C,GAAuC,IAAZE,EAAYF,EAAZE,SAAY0C,EAEHC,oBAAU,WAFPC,EAAAtC,OAAAC,EAAA,EAAAD,CAAAoC,EAAA,GAE3BG,EAF2BD,EAAA,GAElBE,EAFkBF,EAAA,GAAAG,EAY/BlD,EAAS,CACTE,WAAW,EACXC,SAAUA,EACVE,UAAW2C,IAVXrC,EAL+BuC,EAK/BvC,KAEAiB,GAP+BsB,EAM/BnC,QAN+BmC,EAO/BtB,aACAS,EAR+Ba,EAQ/Bb,MACAC,EAT+BY,EAS/BZ,cACAG,EAV+BS,EAU/BT,cACAC,EAX+BQ,EAW/BR,UAQJS,YAAW,IAAIvB,GACfuB,YAAW,IAAId,GACfc,YAAW,IAAIb,GACfa,YAAW,IAAIV,GAMfP,oBAAU,WAENe,EAAWtC,IAGb,CAACA,IAEHuB,oBAAU,WAGNQ,EAAUM,IAEZ,CAACA,IAEHd,oBAAU,WAGNQ,EAAUM,IACZ,IA9CiC,IAAA1C,EAgDLC,qBAhDKC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAgD5B8C,EAhD4B5C,EAAA,GAgDnB6C,EAhDmB7C,EAAA,GA4DnC,OASA8C,EAAAC,EAAAC,cAAA,OAAKC,UAAW,kBAAkBC,QApBV,WACpB7B,QAAQC,IAAI,WACZ,IAAM6B,EAAMxB,KAAKwB,MACbP,GAAYO,EAAMP,EAAW,IAC/Bf,KAEEgB,EAAWM,GACX/B,iDC/DG,SAASgC,EAAcC,GA+FlC,IAAIC,EAAW,GACf,IACIA,EAAWD,EAASE,KAAKC,MAAMC,IAAK,SAAAC,GAAI,OA9F5C,SAA8BA,GAC1B,SAASC,EAAUC,GAEf,IADA,IAAIC,EAAO,GACHC,EAAE,EAAGA,EAAIF,EAAMG,OAAQD,IAC3BD,EAAKD,EAAME,GAAGE,MAASJ,EAAME,GAAGG,QAEpC,OAAOJ,EAGX,IACI,IAAIK,EAAU,GACXR,EAAKvD,MAAMF,OAAOkE,OAAOD,EAAQP,EAAUD,EAAKvD,OAChDuD,EAAKU,KAAKnE,OAAOkE,OAAOD,EAAQP,EAAUD,EAAKU,MAC/CV,EAAKW,QAAQpE,OAAOkE,OAAOD,EAAQP,EAAUD,EAAKW,SAClDX,EAAKY,KAAKrE,OAAOkE,OAAOD,EAAQP,EAAUD,EAAKY,MAGlD,IACIC,EADAC,EAAYN,EAAQO,KAAKC,MAAM,KAEnC,OAAQF,EAAU,IACd,IAAK,IACDD,EAAcxC,KAAK4C,MAAMC,WAAWJ,EAAU,KAC9C,MACJ,IAAK,KACDD,EAAcxC,KAAK4C,MAA+B,KAAzBC,WAAWJ,EAAU,KAC9C,MACJ,IAAK,KACDD,EAAcxC,KAAK4C,MAA+B,KAAzBC,WAAWJ,EAAU,IAAS,MACvD,MACJ,IAAK,KACDD,EAAcxC,KAAK4C,MAA+B,KAAzBC,WAAWJ,EAAU,IAAS,KAAK,MAC5D,MACJ,QACID,EAAcxC,KAAK4C,MAAMC,WAAWJ,EAAU,KAoDtD,MA9Cc,CACVK,GAAInB,EAAKoB,MACTC,SAAUC,IAAUd,EAAQe,WAC5BC,KAAM,UACNC,WAAY,CACRC,QAAS,IAAIzD,KAAKuC,EAAQmB,eAC1BP,MAAOpB,EAAKoB,MACZd,KAAMN,EAAKoB,MACX3E,KAAM+D,EAAQoB,cAAgB,IAAMpB,EAAQqB,YAC5CC,MAAO,CACHC,KAAM,CAAC,CACHC,KAAMhC,EAAKiC,KAAK,GAAGD,QAG3BE,iBAAkB,CACdC,iBAAkB,GAClBC,OAAQ,WACRC,uBAAwB,CAAC,CACrBC,SAAU,CACNC,kBAAmB/B,EAAQgC,aAC3BC,yBAA0BjC,EAAQkC,0BAEtCC,OAAQ,CACJC,WAAYpC,EAAQqC,oBACpBC,gBAAiBtC,EAAQuC,uBAE7BC,qBAAsB,CAClBC,qBAAsB,IAAIhF,KAAKuC,EAAQoB,eACvCsB,oBAAqB,IAAIjF,KAAKuC,EAAQqB,aACtCsB,mBAAoBC,SAAS5C,EAAQ6C,qBACrCC,YAAaF,SAAS5C,EAAQ+C,aAC9BC,2BAA4B,KAC5BC,0BAA2B,KAC3BC,eAAgBlD,EAAQmD,kBAIhCC,mBAAoB,CAChBC,YAAarD,EAAQsD,YAErB/C,KAAMF,MAOxB,MAAOkD,GAEL,OADApG,QAAQC,IAAI,iCAAiCmG,EAAIC,SAC1C,IAMkCC,CAAqBjE,KAAOkE,OAAO,SAAAlE,GAAI,OAAIA,IAAS,KACnG,MAAO+D,GACLpG,QAAQC,IAAI+B,GACZhC,QAAQC,IAAI,WACZD,QAAQC,IAAImG,GACZnE,EAAW,GAgBf,MAbc,CACN4B,KAAM,oBACNL,GAAI,SACJM,WAAY,CACR0C,aAAcxE,EAASE,KAAK,2BAC5BuE,WAAazE,EAASE,KAAK,yBAA0BF,EAASE,KAAK,yBAAyB,EAC5FwE,aAAc1E,EAASE,KAAK,2BAC5BuB,MAAO,uBACPM,QAAS,IAAIzD,MAEjB2B,SAAUA,uBC5GP,SAAS0E,EAAIC,GAC1B,IAAIC,EAAQD,EAAMC,KAAMD,EAAMC,KAAK,KAC/BC,EAAQF,EAAME,KAAMF,EAAME,KAAK,GAC/BC,EAAOH,EAAMG,IAAKH,EAAMG,IAAI,IAG1BC,EAAM3H,iBAAO,MAInBiC,YAAW,IAaX,WACE2F,EAAe,SAAAC,GACblH,QAAQC,IAAI,mBAAmBiH,GAC/B,IAAIC,EAAuB,CAAE,KAAM,kBAAmB,YAClDC,GAAWD,EAAqBE,QAAQH,GAAY,GAAGC,EAAqBzE,OAEhF,OADA1C,QAAQC,IAAI,kBAAkBkH,EAAqBC,IAC3CD,EAAqBC,IAC3B,IAAK,KACDJ,EAAIrH,QAAQ2H,MAAMC,WAAa,IAAIC,IAAUC,gBAC7C,MACJ,IAAK,kBACDT,EAAIrH,QAAQ2H,MAAMC,WAAa,IAAIC,IAAUE,0BAC7C,MACJ,IAAK,WACDV,EAAIrH,QAAQ2H,MAAMC,WAAa,IAAIC,IAAUG,mBAC7C,MACJ,IAAK,cACDX,EAAIrH,QAAQ2H,MAAMC,WAAa,IAAIC,IAAUI,2BAA2B,SACxE,MACJ,IAAK,cACDZ,EAAIrH,QAAQ2H,MAAMC,WAAa,IAAIC,IAAUI,2BAA2B,SACxE,MACJ,QACAZ,EAAIrH,QAAQ2H,MAAMC,WAAa,IAAIC,IAAUC,gBAG/C,OADAT,EAAIrH,QAAQkI,SACLV,EAAqBC,OAjDC,IAAA3I,EAWPC,mBAAS,MAA1BuI,EAXwBrI,OAAAC,EAAA,EAAAD,CAAAH,EAAA,MAcjC6C,YAAW,IAAIwG,GAdkB,IAAA9I,EAeSN,mBAAS,IAflBO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAe1B+I,EAf0B9I,EAAA,GAeX+I,EAfW/I,EAAA,GA4HjC,SAAS6I,IAGP,IAAI,IAAIrF,EAAE,EAAEA,EAAEsF,EAAcrF,OAAOD,IACjCuE,EAAIrH,QAAQsI,YAAYF,EAActF,IACtCzC,QAAQC,IAAI,0BACZD,QAAQC,IAAI8H,EAActF,IAE5BuF,EAAiB,IACjBhI,QAAQC,IAAI8H,GACZf,EAAIrH,QAAQkI,SAtHdxH,oBAAU,WACRL,QAAQC,IAAI,mBACZD,QAAQC,IAAI8H,IACZ,CAACA,IAmCHzG,YAAW,IACX,WACE0F,EAAIrH,QAAQuI,OAAO,GAAGC,SAAWnB,EAAIrH,QAAQuI,OAAO,GAAGC,QACvDnB,EAAIrH,QAAQkI,WAGdvG,YAAW,IACX,WACE0F,EAAIrH,QAAQuI,OAAO,GAAGC,SAAWnB,EAAIrH,QAAQuI,OAAO,GAAGC,QACvDnB,EAAIrH,QAAQkI,WAIdvG,YAAW,IACX,WACE0F,EAAIrH,QAAQuI,OAAO,GAAGC,SAAWnB,EAAIrH,QAAQuI,OAAO,GAAGC,QACvDnB,EAAIrH,QAAQkI,WAmEdxH,oBAAU,WACRL,QAAQC,IAAI,4BAEZ+G,EAAIrH,QAAU,IAAI6H,IAAUY,YAAYxB,EAAMpD,IAE9C,IAAI6E,EAAc,CAChBC,QAAS,gCACTC,WAAY,mBACZC,UAAW,GACXC,OAAQ,YACRrF,KAAM,IACNsF,OAAQlB,IAAUmB,OAAOC,YACzBC,eAAgB,IAAIrB,IAAUsB,SAAS,GAAI,KAGzCC,EAAiB,CACnBT,QAAS,gCACTC,WAAY,iBACZC,UAAW,GACXC,OAAQ,YACRrF,KAAM,IACNsF,OAAQlB,IAAUmB,OAAOC,YACzBC,eAAgB,IAAIrB,IAAUsB,SAAS,GAAI,KAE7CtB,IAAUwB,cAAcC,QAAUzB,IAAUwB,cAAcC,QAAQC,MAAM,GAAG,GAC3E,IAAIC,EAAiB,IAAI3B,IAAU4B,eAC/BC,EAAkB,IAAI7B,IAAU8B,gBAAgB,qCACpDD,EAAgBE,kBAAoB,IASpC,IAPA,IAAIrB,EAAS,CACX,CAAEsB,MAAO,IAAIhC,IAAUiC,SAASpB,EAAa,IAAKF,SAAS,GAC3D,CAAEqB,MAAO,IAAIhC,IAAUiC,SAASV,EAAgB,IAAKZ,SAAS,GAC9D,CAAEqB,MAAOL,EAAgBhB,QAASvB,EAAM8C,WACxC,CAAEF,MAAOH,EAAiBlB,QAASvB,EAAM+C,aAGlCC,EAAI,EAAGA,EAAI1B,EAAOxF,OAAQkH,IACjC1B,EAAO0B,GAAGJ,MAAMrB,QAAUD,EAAO0B,GAAGzB,QACpCnB,EAAIrH,QAAQkK,SAAS3B,EAAO0B,GAAGJ,OAGjCL,EAAeW,KAAO,IAAIxJ,KAAKa,GAC/BkI,EAAgBS,KAAO,IAAIxJ,KAAKa,GAChCrB,WAAW,WACTkH,EAAIrH,QAAQoK,aAAaC,WAAa,IACtChD,EAAIrH,QAAQsK,KAAK,IAAIzC,IAAU0C,SAASpD,EAAMD,EAAME,IACpDC,EAAIrH,QAAQkI,UACT,KAELb,EAAIrH,QAAQkI,SACZb,EAAIrH,QAAQwK,aAAc,GACvB,IA5L4B,IAAAnJ,EA+LZC,oBAAU,WAAxBE,EA/L0BvC,OAAAC,EAAA,EAAAD,CAAAoC,EAAA,MAgMjCX,oBAAU,WAER2G,EAAIrH,QAAQuI,OAAO,GAAG4B,KAAO9C,EAAIrH,QAAQuI,OAAO,GAAG4B,KAAO,IAAIxJ,KAAKa,GACnE6F,EAAIrH,QAAQkI,UACZ,CAAC1G,IApM8B,IAuMzBiJ,ECzMK,WAEX,IAAIC,EAAa,GAGjBA,EAAU,GAAS,wMACnBA,EAAU,GAAS,4MACnBA,EAAU,GAAS,gRACnBA,EAAU,IAAU,kSACpBA,EAAU,QAAc,kIAGxB,IAZiC5L,EAcWC,mBAAS,IAdpBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAc1B2L,EAd0BzL,EAAA,GAcV2L,EAdU3L,EAAA,GAAAK,EAeHN,oBAAS,GAfNO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAe1BuL,EAf0BtL,EAAA,GAejBuL,EAfiBvL,EAAA,GAAA+B,EAiBRC,oBAAU,cAA3BwJ,EAjByB7L,OAAAC,EAAA,EAAAD,CAAAoC,EAAA,MAAA0J,EAkBXzJ,oBAAU,WAAxB0J,EAlByB/L,OAAAC,EAAA,EAAAD,CAAA8L,EAAA,MAAAE,EAmBIlM,mBAAS,IAnBbmM,EAAAjM,OAAAC,EAAA,EAAAD,CAAAgM,EAAA,GAmBzBE,EAnByBD,EAAA,GAmBdE,EAnBcF,EAAA,GAmEjC,OA9CAxK,oBAAU,YACQ,eAAAjC,EAAAQ,OAAAoM,EAAA,EAAApM,CAAAqM,EAAAvJ,EAAAwJ,KAAG,SAAAC,IAAA,IAAAnJ,EAAAQ,EAAA4I,EAAA,OAAAH,EAAAvJ,EAAA2J,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACbhB,GAAW,GACXxK,QAAQC,IAAI,WAAY6K,GAFXQ,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAIcC,MAAMX,EAAW,CAACY,KAAM,OAAQC,YAAa,YAJ3D,cAIH3J,EAJGsJ,EAAAM,KAAAN,EAAAE,KAAA,EAKUxJ,EAASQ,OALnB,OAKHA,EALG8I,EAAAM,KAMHR,EAAuB,YAAZT,EAAwBnI,EAAOT,EAAcS,GAC9DxC,QAAQC,IAAI,iBAAmBmL,EAAQtH,WAAW0C,cAClD8D,EAAkBc,GAClBZ,GAAW,GATFc,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAO,GAAAP,EAAA,SAWTtL,QAAQC,IAAI,2BAEZuK,GAAW,GAbF,yBAAAc,EAAAQ,SAAAX,EAAA,kBAAH,yBAAA/M,EAAA2N,MAAAC,KAAAC,YAAA,EAiBdC,CAASpB,IACV,CAACA,IAEJzK,oBAAU,WACNL,QAAQC,IAAI,kBAAkB0K,IAC/B,IAEHtK,oBAAU,WACNL,QAAQC,IAAI,4BAA4B0K,GACxC,IAAIwB,EAAM9B,EAAWM,GAErB,IAEIwB,GADAA,EAAMA,EAAIC,QAAQ,UAAWC,IAAW,IAAI/L,KAAKmK,EAAa6B,MAAc,oBAClEF,QAAQ,QAASC,IAAW,IAAI/L,KAAKmK,EAAa6B,MAAc,mBAC1EvB,EAAaoB,GAEf,MAAAI,GACEvM,QAAQC,IAAI,yBAGjB,CAACwK,EAAYE,IAQT,CAACP,iBAAgBG,WDsIGiC,GAArBpC,eACR/J,oBAAU,WACRL,QAAQC,IAAI,kBACVD,QAAQC,IAAImK,GACZ,KAlIJ,SAAoB+B,GAyClB,IAAIM,EAAkB,IAAIjF,IAAUkF,gBAAgB,WAAY,IAAIpM,MACpEwH,IACAd,EAAIrH,QAAQkK,SAAS4C,GAGP,IAAIjF,IAAUmF,cAAcR,GAClCS,KAZR,WACE5E,EAAiB,SAACD,GAAD,SAAA8E,OAAAjO,OAAAkO,EAAA,EAAAlO,CAAqBmJ,GAArB,CAAmC0E,MAClDzF,EAAIrH,QAAQkI,UApChB,SAAoCnE,EAAUI,GAC1C,IAAIkF,EAAgB,GAEhB+D,EAAsB,IAAIvF,IAAUwF,oBAAoB,MA4B5D,OA3BAD,EAAoBE,WAAa,GACjCF,EAAoBG,WAAa,IAAI1F,IAAU2F,MAAM,EAAG,EAAG,EAAG,IAC9DJ,EAAoBK,gBAAgBC,OAAS,IAAI7F,IAAU8F,OACvD9F,IAAU+F,gBAAiB,EAC3B/F,IAAU+F,gBAAiB,GAI3B7J,EAAS8J,eAAiB9J,EAAS+J,mBACnCzE,EAAc0E,WAAa,IAAIlG,IAAUwF,oBAAoBD,GAEtDrJ,EAASiK,oBAAsBjK,EAASkK,yBAC/C5E,EAAc0E,WAAWG,aAAc,EACvC7E,EAAc0E,WAAWI,aAAe,IAAItG,IAAU2F,MACpD,GAAMnE,EAAc0E,WAAWK,cAAcC,IAC7C,GAAMhF,EAAc0E,WAAWK,cAAcE,MAC7C,GAAMjF,EAAc0E,WAAWK,cAAcG,KAC7C,GAEFlF,EAAc0E,WAAWS,aAAe,IACjCzK,EAAS0K,iBAAmB1K,EAAS2K,wBAC5CrF,EAAc0E,WAAa,IAAIlG,IAAU8G,gBAAgB,MACzDtF,EAAc0E,WAAWK,cAAgB,IAAIvG,IAAU2F,MAAM,EAAG,EAAG,EAAG,IACtEnE,EAAc0E,WAAWI,aAAe,IAAItG,IAAU2F,MAAM,EAAG,EAAG,EAAG,KAIlEnE,GAeoDyD,GAoF3D8B,CAAWnE,GACX,MAAOhE,GACPpG,QAAQC,IAAI,4BACZD,QAAQC,IAAImG,KAGhB,CAACgE,IAaH,OACI3I,EAAAC,EAAAC,cAAA,UAAQ6B,GAAIoD,EAAMpD,GAAIgL,MAXT,CAEfC,WAAY,UACZC,SAAU,QAGVC,MAAO,UACPC,OAAQ,mBEnMGC,MA1Bf,WAA2B,IAAA7N,EAGSC,oBAAU,WAHnBC,EAAAtC,OAAAC,EAAA,EAAAD,CAAAoC,EAAA,GAGf2J,EAHezJ,EAAA,GAGN4N,EAHM5N,EAAA,GAcvB,OAVAI,YAAW,IAAI,WAAKwN,EAAW,QAC/BxN,YAAW,IAAI,WAAKwN,EAAW,QAC/BxN,YAAW,IAAI,WAAKwN,EAAW,QAC/BxN,YAAW,IAAI,WAAKwN,EAAW,SAC/BxN,YAAW,IAAI,WAAKwN,EAAW,aAE/BzO,oBAAU,WACNL,QAAQC,IAAI,uBAAwB0K,IACrC,CAACA,IAGAlJ,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBACXH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UAASH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cAAcmN,IAAI,wBAAwBhI,IAAI,GAAGlF,QAAS,kBAAMiN,EAAW,UAClHrN,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UAASH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cAAcmN,IAAI,wBAAwBhI,IAAI,GAAGlF,QAAS,kBAAMiN,EAAW,UAClHrN,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UAASH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cAAcmN,IAAI,wBAAwBhI,IAAI,GAAGlF,QAAS,kBAAMiN,EAAW,UAClHrN,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UAASH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cAAcmN,IAAI,yBAAyBhI,IAAI,GAAGlF,QAAS,kBAAMiN,EAAW,WACnHrN,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBAAgB+I,sECqK5BqE,MApLf,SAAsBpI,GAElB,IAOIqI,EANEC,GAActI,EAAMuI,IAAIvI,EAAMwI,MADnB,IACmCxI,EAAMuI,IAAIvI,EAAMwI,KAA1B,OACpCA,EAAMxI,EAAMwI,IACZD,EAAMC,GAAOxI,EAAMuI,IAAMvI,EAAMwI,KAAOF,EAInCG,EAAM,EACZzI,EAAM0I,UACLD,EAAMF,EAAMC,EACZH,EAAM,MAENA,EAAME,EAAMC,EACZC,EAAM,KAfgB,IAAArO,EAmBIC,oBAAU,WAnBdC,EAAAtC,OAAAC,EAAA,EAAAD,CAAAoC,EAAA,GAmBnBG,EAnBmBD,EAAA,GAmBVE,EAnBUF,EAAA,GAAAwJ,EAoBAzJ,oBAAU,cAA3BsO,EApBiB3Q,OAAAC,EAAA,EAAAD,CAAA8L,EAAA,MAAAjM,EAqBcC,mBAAS,IAAI4B,MArB3B3B,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAqBnB+Q,EArBmB7Q,EAAA,GAqBL8Q,EArBK9Q,EAAA,GAAAK,EAuBEN,oBAAS,GAvBXO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAuBnB0Q,EAvBmBzQ,EAAA,GAuBX0Q,EAvBW1Q,EAAA,GA2BpB2Q,EAAavQ,mBACnBuQ,EAAWjQ,QAAUiH,EAAM0I,SAG3B,IAAMO,EAAgBxQ,mBA/BIyQ,EAiCJC,YAAU,iBAAO,CAAEC,GAAI,CAAC,EAAG,MAjCvBC,EAAArR,OAAAC,EAAA,EAAAD,CAAAkR,EAAA,GAiCjBE,EAjCiBC,EAAA,GAiCjBD,GAAME,EAjCWD,EAAA,GAoCpBE,EAAOC,YAAW,CACpBC,OAAQ,SAAAjS,GAAqN,IAAjNkS,EAAiNlS,EAAjNkS,KAAMC,EAA2MnS,EAA3MmS,MAAOC,EAAoMpS,EAApMoS,SAAUd,EAA0LtR,EAA1LsR,OAASe,EAAiLrS,EAAjLqS,UAAiLC,GAAAtS,EAAtKuS,SAAsKvS,EAA5J0L,KAA4J1L,EAAtJwS,MAAsJxS,EAA/IyS,KAA+IzS,EAAzI0S,aAAyI,IAAAJ,EAAlI,CAACV,GAAIA,EAAGe,WAAYC,YAAa,CAAC,EAAE,GAAIC,UAAW,CAAC,EAAE,GAAGC,YAAa,CAAC,EAAE,GAAIC,SAAU,EAAGC,cAAe,EAAEC,UAAU,GAAaX,EASzN,GAN0BY,gBAAMb,EAAWD,GAE3CA,EAAYA,EAAS,IAAK,EAAEA,EAEzBF,GAAQQ,EAAKO,WAAWrR,QAAQC,IAAI,YAAa0P,GAAU,IAC9DmB,EAAKO,SAAWf,EACbV,EAAWjQ,QAAS,CAEnB,IAAIiP,EAASiB,EAAclQ,QAAQ4R,cAAcC,aAG7ChS,EAAO,EACPiS,EAAM,EACNlB,EAAM,IAAI,KAAK/Q,EAAQ,MAAwB0P,EAAYuC,EAAM,IACjElB,EAAM,IAAI,KAAK/Q,EAAQ,OAA4B0P,EAAYuC,EAAM,IACrElB,EAAM,IAAI,MAAM/Q,EAAQ,QAA6B0P,EAAYuC,EAAM,IAExEjS,IAASsR,EAAKK,WACbnR,QAAQC,IAAI,sBAAsB6Q,EAAKK,SAAS,QAAS3R,GACzDsR,EAAKE,YAAcT,EACnBO,EAAKd,GAAKc,EAAKG,WAGnBV,EAAQmB,cAAInB,EAAMO,EAAKE,aACvB,IAAIE,EAAc,CAACxQ,KAAK4C,MAAMiN,EAAM,GAAGkB,GAAKjS,EAAKkB,KAAK4C,MAAMiN,EAAM,GAAGkB,GAAKjS,GACvE8Q,IAAME,EAAW,GACpB,IAAImB,EAAQC,cAAIN,gBAAMJ,EAAYxQ,KAAKmR,IAAIrB,EAAS,EAAE,MAAOM,EAAKd,IAE/DxQ,IAASsR,EAAKK,WACbL,EAAKd,GAAK2B,EACVb,EAAKK,SAAW3R,GAGpBsR,EAAKG,UAAYU,EAEjB,IAGIG,EAAOjC,EAAclQ,QAAQ4R,cAAcQ,UAAYlC,EAAclQ,QAAQ4R,cAAcC,aAAe,EAC1GQ,GAASnC,EAAclQ,QAAQ6R,aAAe3B,EAAclQ,QAAQ4R,cAAcC,aAAe,EAErGG,EAAM,GAAKA,EAAM,GAAGG,EAAOA,EAAOH,EAAM,GACxCA,EAAM,GAAKA,EAAM,GAAGK,EAAOA,EAAOL,EAAM,GAExCzB,EAAI,CAAGF,GAAI2B,EAAUM,OAAQ3B,EA7CV,CAAE4B,KAAM,EAAGC,QAAS,KAAOC,SAAU,GAAIC,UAAW,KADtD,CAAEH,KAAM,EAAGC,QAAS,IAAMC,SAAU,GAAIC,UAAW,GA8CDC,UAAWhC,EAAMiC,OAR/D,SAAAC,GAAY,IAATxC,EAASwC,EAATxC,GAAiBM,GAASZ,IAASC,GAAU,GAAO3P,QAAQC,IAAI,iBAAsBqQ,GAAQf,EAAcH,IAAMY,EAAG,GAAGpB,EAAO,GAAGM,IAQhDuD,QATtF,SAAAC,GAAY,IAAT1C,EAAS0C,EAAT1C,GAAWP,EAAgBL,IAAMY,EAAG,GAAGpB,EAAO,GAAGM,MAa5E,OAAO4B,KAxFWlG,EA4HQlM,mBAAS,IA5HjBmM,EAAAjM,OAAAC,EAAA,EAAAD,CAAAgM,EAAA,GA4HnB+H,EA5HmB9H,EAAA,GA4HR+H,EA5HQ/H,EAAA,GAkK1B,OApCAgI,0BAAgB,WAEZD,EAlCc,WAWd,IATA,IACIE,EAAKC,EACLC,EAFAC,EAAY,CAAC,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAC7DC,EAAO,EAChBC,EAAY,EACrBC,EAAO,GACLC,EAAazM,EAAM0I,SAAmB,WAAT,SAC7BgE,EAAe1M,EAAM0I,SAAqB,aAAX,WAC/BiE,EAAc3M,EAAM0I,SAAoB,YAAV,UAG3B7M,EAAEmE,EAAMwI,IAAI3M,GAAGmE,EAAMuI,IAAI1M,GAAG,KACjCqQ,EAAO,IAAIxS,KAAKmC,GAAI+Q,aACpBT,EAAQE,EAAW,IAAI3S,KAAKmC,GAAIgR,eACxB,IAAInT,KAAKmC,GAAIiR,cACrBR,EAAQ,IAAI5S,KAAKmC,GAAIkR,iBAClBb,IAAQE,GAASI,EAAKQ,KAAK,CAACC,MAAMR,EAAUS,KAAMrR,EAAEmE,EAAMwI,KAAKF,EAAY6E,MAAOjB,IAClFC,IAAUI,IACTC,EAAKQ,KAAK,CAACC,MAAMP,EAAYQ,KAAMrR,EAAEmE,EAAMwI,KAAKF,EAAY6E,MAAOhB,IACnEK,EAAKQ,KAAK,CAACC,MAAMN,EAAWO,KAAMrR,EAAEmE,EAAMwI,KAAKF,EAAY6E,MAAOb,KAItEF,EAAUF,EACVK,EAAYJ,EAGZ,OAAOK,EAAKhR,IAAI,SAAAC,GAAI,OAAiBZ,EAAAC,EAAAC,cAAA,OAAKC,UAAWS,EAAKwR,MAAOG,IAAK3R,EAAKwR,MAAMxR,EAAKyR,IAAKtF,MAAS5H,EAAM0I,SAA0B,CAAC2E,IAAI5R,EAAKyR,KAA1B,CAACI,KAAK7R,EAAKyR,MAAsBzR,EAAK0R,SAOjJI,CAAUvN,EAAM0I,YAE/B,CAAC1I,EAAM0I,WAMTuD,0BAAgB,WACZ,IAAIxF,EAAQ,EAERqC,IACG9I,EAAM0I,UACLjC,GAAW+B,EAAMjO,GAAS+N,EAAYW,EAAclQ,QAAQ4R,cAAcC,aAAa,EACvFtB,EAAI,CAAEF,GAAI,CAAC,EAAE3C,GAAS4E,OAAQ,CAAEE,QAAS,KAAMC,SAAU,IAAMK,QAAS,KAAMF,OAAQ,SAEtFlF,GAAW+B,EAAMjO,GAAS+N,EAAYW,EAAclQ,QAAQ4R,cAAc6C,YAAY,EACtFlE,EAAI,CAAEF,GAAI,CAAC3C,EAAO,GAAI4E,OAAQ,CAAEE,QAAS,KAAMC,SAAU,IAAMK,QAAS,KAAMF,OAAQ,UAMhG,CAACpR,EAAQwR,IAEXtS,oBAAU,WACNe,EAAWoO,IACb,CAACA,IAGHqD,0BAAgB,WACZ7S,QAAQC,IAAI,oBAAoB2G,EAAMyN,OACxC,CAACzN,EAAMyN,OAGL5S,EAAAC,EAAAC,cAAA,OAAKC,UAAWgF,EAAM0I,SAAS,SAAS,QAEpC7N,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBACXH,EAAAC,EAAAC,cAAA,OAAKiN,OAAO,KAAKD,MAAM,KAAK/M,UAAU,YAClCH,EAAAC,EAAAC,cAAA,WAAS2S,OAAO,uBAGxB7S,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBAAgB2S,IAAK1E,GAEhCpO,EAAAC,EAAAC,cAAC6S,EAAA,EAAS/C,IAAV7S,OAAAkE,OAAA,CAAclB,UAAU,aAAgBuO,IAAxC,CAAgD3B,MAAO,CAAEG,MAAOM,EAAIL,OAAQS,EAAKoF,UAAWzE,EAAG0E,YAAY,SAACC,EAAGC,GAAJ,yBAAA/H,OAA6B+H,EAA7B,cACtGjC,YClKNkC,MAjBf,SAAAzW,GAAqCA,EAAjB0W,UAAiB,IAAPhW,EAAOV,EAAPU,KAG1B,OACI2C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBACXH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OAAOoS,IAAI,QAA1B,QACAvS,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WAAWoS,IAAI,OAAQ3H,IAAWvN,EAAK,WACtD2C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,YAAYoS,IAAI,QAAS3H,IAAWvN,EAAK,aACxD2C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aAAaoS,IAAI,SAAU3H,IAAWvN,EAAK,YAC1D2C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,YAAYoS,IAAI,QAAS3H,IAAWvN,EAAK,mBCWrDiW,MApBf,SAAA3W,GAAyB,IAAT4W,EAAS5W,EAAT4W,OAASvW,EAGOC,oBAAS,GAHhBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAGbwW,EAHatW,EAAA,GAGNuW,EAHMvW,EAAA,GAarB,OATA2C,YAAW,IAAI,WAAK4T,EAAS,SAAAF,GAAM,OAAKA,MAExC3U,oBAAU,WACNL,QAAQC,IAAI,2BACZD,QAAQC,IAAI,WAAW+U,IACxB,IAKCvT,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QAAQ4M,MAAO,CAAC2G,QAAUF,EAAO,SAAS,SAAUtG,MAAO,GAAIC,OAAO,SACjFnN,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBAAmB4M,MAAO,CAACyF,IAAK,MAAOmB,MAAM,EAAGzG,MAAO,GAAIC,OAAO,OAAQH,WAAa,8BCyEnG4G,EA/EH,WAAM,IAAA5W,EAEeC,oBAAS,GAFxBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAET6W,EAFS3W,EAAA,GAEG4W,EAFH5W,EAAA,GAAAqC,EAMMC,oBAAU,WAAxBE,EANQvC,OAAAC,EAAA,EAAAD,CAAAoC,EAAA,MAAA0J,EAOSzJ,oBAAU,cAPnBjC,GAAAJ,OAAAC,EAAA,EAAAD,CAAA8L,EAAA,MAUMhM,mBAAU,IAAI4B,KAAK,cAAeC,YAVxCtB,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAUToQ,EAVSnQ,EAAA,GAAA2L,GAAA3L,EAAA,GAWMP,mBAAU,IAAI4B,KAAK,cAAeC,YAXxCsK,EAAAjM,OAAAC,EAAA,EAAAD,CAAAgM,EAAA,GAWTuE,EAXStE,EAAA,GAAA2K,GAAA3K,EAAA,GAagBnM,oBAAS,IAbzB+W,EAAA7W,OAAAC,EAAA,EAAAD,CAAA4W,EAAA,GAaTlG,EAbSmG,EAAA,GAaCC,EAbDD,EAAA,GAehBnU,YAAW,IAAI,WACboU,EAAY,SAAAC,GACR,OAASA,MAKftV,oBAAU,WAER,IAAMuV,EAAU,WACd,OAAO,IAAIC,QAAQ,SAAAC,GACjBhW,WAAW,WACT,IAAMiW,EAAYrV,KAAKsV,KAAqB,GAAhBtV,KAAKuV,UACjCjW,QAAQC,IAAI,gBACZ6V,EAAQC,IACP,QARO,SAAAG,IAAA,OAAAA,EAAAtX,OAAAoM,EAAA,EAAApM,CAAAqM,EAAAvJ,EAAAwJ,KAYd,SAAAC,IAAA,OAAAF,EAAAvJ,EAAA2J,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACO8J,EADP,CAAAhK,EAAAE,KAAA,eAAAF,EAAAE,KAAA,EAE8BoK,IAF9B,OAAAtK,EAAAM,KAGI2J,GAAS,GAHb,wBAAAjK,EAAAQ,SAAAX,OAZcY,MAAAC,KAAAC,YAAA,WAAAiK,EAAAnK,MAAAC,KAAAC,WAmBdkK,IACC,IA1Ca,IAAAC,EA+CW1X,oBAAS,GA/CpB2X,EAAAzX,OAAAC,EAAA,EAAAD,CAAAwX,EAAA,GA+CTE,EA/CSD,EAAA,GA+CFE,EA/CEF,EAAA,GAAAG,EAgD2BC,YAAcC,OAAOC,SAASC,MAAnDC,GAhDNL,EAgDRM,aAhDQN,EAgDMK,kBAMtB,OAJAvV,YAAW,IAAIuV,GAKbpV,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACbH,EAAAC,EAAAC,cAACoV,EAAArV,EAAD,CAAYyG,QAASmO,EAAQU,SAAU,WAAYV,GAAQC,GAAU,KAEnE9U,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBACbH,EAAAC,EAAAC,cAACsV,EAAD,CAAW3H,SAAUA,EAAUxQ,KAAMqC,KAGvCM,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBACbH,EAAAC,EAAAC,cAACuV,EAAD,CAAiB5Y,SAAS,YAG5BmD,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACbH,EAAAC,EAAAC,cAACgF,EAAD,CAAKnD,GAAG,QAAQkG,UAAU,OAAOyN,YAAY,WAE/C1V,EAAAC,EAAAC,cAAA,OAAKC,UAAW0N,EAAS,gBAAgB,iBACvC7N,EAAAC,EAAAC,cAACyV,EAAD,CAAchI,IAAKA,EAAKD,IAAKA,EAAKG,SAAUA,KAE9C7N,EAAAC,EAAAC,cAAC0V,EAAD,CAAiB1M,QAAQ,OACzBlJ,EAAAC,EAAAC,cAAC2V,EAAD,CAAOtC,OAAO,eC/EtB,IAAMuC,EAAcC,QACa,cAA7Bd,OAAOe,SAASC,UAEe,UAA7BhB,OAAOe,SAASC,UAEhBhB,OAAOe,SAASC,SAASC,MACvB,2DA6BN,SAASC,EAAgBC,GACvBC,UAAUC,cACPC,SAASH,GACTI,KAAK,SAAAC,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACtCD,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBG,QACfT,UAAUC,cAAcS,WAK1BxY,QAAQC,IAAI,6CAKZD,QAAQC,IAAI,2CAMrBwY,MAAM,SAAAC,GACL1Y,QAAQ0Y,MAAM,4CAA6CA,KClE/D1Y,QAAQC,IAAI,iBAAiB,IAAIK,MAAQC,WAGzCoY,oBAAU,CAACxX,SAAW,IAAIb,MAAQC,YAClCoY,oBAAU,CAAClO,YAAc,IAAInK,MAAQC,YACrCoY,oBAAU,CAAChO,QAAS,OCExBiO,iBACEnX,EAAAC,EAAAC,cAACkX,EAAD,MAIAlC,SAASmC,eAAe,SFIT,WACb,GAA6C,kBAAmBhB,UAAW,CAGzE,GADkB,IAAIiB,IAAIC,YAAwBtC,OAAOe,UAC3CwB,SAAWvC,OAAOe,SAASwB,OAIvC,OAGFvC,OAAOwC,iBAAiB,OAAQ,WAC9B,IAAMrB,EAAK,GAAAhL,OAAMmM,YAAN,sBAEPzB,EAwCV,SAAiCM,GAE/BpM,MAAMoM,GACHI,KAAK,SAAAjW,GAGkB,MAApBA,EAASyC,SACuD,IAAhEzC,EAASmX,QAAQC,IAAI,gBAAgB/R,QAAQ,cAG7CyQ,UAAUC,cAAcsB,MAAMpB,KAAK,SAAAC,GACjCA,EAAaoB,aAAarB,KAAK,WAC7BvB,OAAOe,SAAS8B,aAKpB3B,EAAgBC,KAGnBY,MAAM,WACLzY,QAAQC,IACN,mEA5DAuZ,CAAwB3B,GAGxBD,EAAgBC,MErB1B4B","file":"static/js/main.ef60d671.chunk.js","sourcesContent":["import { useState, useEffect, useRef } from \"react\";\n\n\nexport function useClock({ autoStart, duration, startdate }) {\n    //console.log('useClock renders')\n    //const { autoStart, duration } = settings || {};\n  \n    let initDate = startdate\n    const [date, setDate] = useState(initDate)\n    const [playing, setPlaying] = useState(false)\n    const ldate = useRef();\n\n    // refresh rate in msec\n    const refreshRate = 50\n\n    function incrementDate(step) {\n        //setDate(prevDate => { return prevDate + step  });\n        ldate.current += step \n        //setDate((new Date(ldate.current)).getTime());\n        setDate(ldate.current);\n    }\n      \n\n      // Control functions\n    const intervalRef = useRef();\n    const step = useRef(refreshRate);\n    const timeoutRef = useRef();\n    \n\n    function increaseSpeed() {\n        step.current = (step.current > 0)? step.current *= 2:step.current /= 2\n        if(Math.abs(step.current) < refreshRate) step.current = refreshRate\n    }\n    function decreaseSpeed() {\n        step.current = (step.current > 0)? step.current /= 2:step.current *= 2\n        if(Math.abs(step.current) < refreshRate) step.current = -1 * refreshRate\n     }\n\n    function start() {\n        if (!intervalRef.current) {\n            intervalRef.current = setInterval(() => incrementDate(step.current), refreshRate);\n            setPlaying(true)\n        }\n        timeoutRef.current = setTimeout(() => {\n            togglePause()\n            //start()\n          }, duration);\n    }\n\n    function togglePause() {\n        console.log('toggle clock')\n        if(timeoutRef.current) clearTimeout(timeoutRef.current)\n        if (intervalRef.current) {\n            setPlaying(false)\n            clearInterval(intervalRef.current)\n            intervalRef.current = undefined\n        } else start()\n    }\n\n    function reset() {\n        console.log('reset')\n        if (intervalRef.current) {\n            clearInterval(intervalRef.current)\n            intervalRef.current = undefined\n            setPlaying(false)\n        }\n        let initDate = (new Date()).getTime()\n        step.current = refreshRate\n        setDate(initDate)\n        ldate.current = initDate\n    }\n\n     \n    function forceDate(newdate) {\n        ldate.current = newdate\n    }\n\n\n    // didMount effect\n    useEffect(() => {\n        setDate((new Date()).getTime())\n        console.log('date after setting: '+date)\n        ldate.current = date\n        console.log('init date to: '+ldate.current)\n        if (autoStart) {\n            console.log(\"starting Timer... (\"+duration/1000+\" sec)\")\n            start();\n        }\n        //return reset;\n    }, []);\n\n  \n  return { date, playing, togglePause, reset, increaseSpeed, decreaseSpeed, forceDate };\n}\n","import React, { useState, useEffect } from \"react\"\nimport { useClock } from \"./useClock\";\nimport { useGlobal } from 'reactn';\nimport { useHotkeys } from 'react-hotkeys-hook';\n\n\n\n\n\nfunction ClockController({ duration }) {\n\n    const [ appdate, setAppdate ] = useGlobal('appdate');\n\n    const {\n        date,\n        playing,\n        togglePause,\n        reset,\n        increaseSpeed,\n        decreaseSpeed,\n        forceDate\n    } = useClock({\n        autoStart: false,\n        duration: duration,\n        startdate: appdate\n    })\n\n\n    useHotkeys(\"t\",togglePause)\n    useHotkeys(\"r\",reset)\n    useHotkeys(\".\",increaseSpeed)\n    useHotkeys(\",\",decreaseSpeed)\n\n    //const dateLabel = (new Date(date) ).toUTCString()\n\n\n\n    useEffect(() => {\n        //console.log(\"useEffect (date) in ClockController\")\n        setAppdate(date)\n        //forceDate(date)\n        //setAppdate({appdate: new Date(date)})\n    },[date]);\n\n    useEffect(() => {\n        //console.log(\"useEffect (appdate) in ClockController\")\n        //setAppdate(date)\n        forceDate(appdate)\n        //setAppdate({appdate: new Date(date)})\n    },[appdate]);\n\n    useEffect(() => {\n        //console.log(\"useEffect (init) in ClockController\")\n        //console.log(\"appdate changed\")\n        forceDate(appdate)\n    },[]);\n\n    const [lastTap, setLasttap] = useState()\n    const handleDoubleTap = () => {\n        console.log('pressed')\n        const now = Date.now();\n        if (lastTap && (now - lastTap) < 300) {\n          reset();\n        } else {\n            setLasttap(now)\n            togglePause()\n        }\n      }\n    \n    return (\n/*\n        <div {...handlers} style={{display: \"flex\", justifyContent: \"center\", alignItems: \"center\", width:\"100%\", height: \"100%\"}}>\n            {(new Date(date) ).toUTCString()}\n        </div>\n\n<div onClick={togglePause}><img className='Buttons' src={playing?pauseImage:playImage} alt=''/></div>\n*/\n\n    <div className= 'ClockController' onClick={handleDoubleTap} ></div>\n    );\n}\n\nexport default ClockController;\n","import wellknown from 'wellknown';\n\nexport default function dhusToGeojson(response) {\n\n    \n    function mapFromHubOpenSearch(item) {    \n        function reshuffle(array) {\n            let json = {};\n            for(let i=0; i < array.length; i++) {\n                json[array[i].name] =  array[i].content;\n            }\n            return json;\n        }\n\n        try {\n            let hubItem = {};\n            if(item.date) Object.assign(hubItem,reshuffle(item.date));\n            if(item.int) Object.assign(hubItem,reshuffle(item.int));\n            if(item.double) Object.assign(hubItem,reshuffle(item.double));\n            if(item.str) Object.assign(hubItem,reshuffle(item.str));\n\n\n            var sizeArray = hubItem.size.split(\" \");\n            var sizeInBytes;\n            switch (sizeArray[1]) {\n                case \"B\":\n                    sizeInBytes = Math.round(parseFloat(sizeArray[0]));\n                    break;\n                case \"MB\":\n                    sizeInBytes = Math.round(parseFloat(sizeArray[0])*1024);\n                    break;\n                case \"GB\":\n                    sizeInBytes = Math.round(parseFloat(sizeArray[0])*1024*1024);\n                    break;\n                case \"TB\":\n                    sizeInBytes = Math.round(parseFloat(sizeArray[0])*1024*1024*1024);\n                    break;\n                default: \n                    sizeInBytes = Math.round(parseFloat(sizeArray[0]));\n                    break;\n\n            }\n            \n\n            var newItem = {\n                id: item.title,\n                geometry: wellknown(hubItem.footprint),\n                type: \"Feature\",\n                properties: {\n                    updated: new Date(hubItem.ingestiondate),\n                    title: item.title,\n                    name: item.title,\n                    date: hubItem.beginposition  +'/'+  hubItem.endposition,\n                    links: {\n                        data: [{\n                            href: item.link[0].href,\n                        }]\n                    },\n                    earthObservation: {\n                        parentIdentifier: \"\",\n                        status: \"ARCHIVED\",\n                        acquisitionInformation: [{\n                            platform: {\n                                platformShortName: hubItem.platformname,\n                                platformSerialIdentifier: hubItem.platformserialidentifier\n                            },\n                            sensor: {\n                                instrument: hubItem.instrumentshortname,\n                                operationalMode: hubItem.sensoroperationalmode\n                            },\n                            acquisitionParameter: {\n                                acquisitionStartTime: new Date(hubItem.beginposition),\n                                acquisitionStopTime: new Date(hubItem.endposition),\n                                relativePassNumber: parseInt(hubItem.relativeorbitnumber),\n                                orbitNumber: parseInt(hubItem.orbitnumber),\n                                startTimeFromAscendingNode: null,\n                                stopTimeFromAscendingNode: null,\n                                orbitDirection: hubItem.orbitdirection\n\n                            }\n                        }],\n                        productInformation: {\n                            productType: hubItem.producttype,\n                            //timeliness: indexes[\"product\"][\"Timeliness Category\"],\n                            size: sizeInBytes\n                        }\n                    }\n                }\n            }\n        \n            return newItem;\n        } catch (err) {\n            console.log(\"error parsing item from dhus: \"+err.message);\n            return {};\n        }\n    }\n\n    let features = [];\n    try {\n        features = response.feed.entry.map( item =>  mapFromHubOpenSearch(item)).filter(item => item !== {});\n    } catch (err) {\n        console.log(response);\n        console.log(\"Error: \");\n        console.log(err);\n        features = []\n    }\n    //console.log(JSON.stringify(features));\n    let geojson = {   \n            type: \"FeatureCollection\",\n            id: \"search\",\n            properties: {\n                totalResults: response.feed[\"opensearch:totalResults\"],\n                startIndex: (response.feed[\"opensearch:startIndex\"])?response.feed[\"opensearch:startIndex\"]:1,\n                itemsPerPage: response.feed[\"opensearch:itemsPerPage\"],\n                title: \"DHuS search response\",\n                updated: new Date()\n            },\n            features: features\n        };\n\n    return geojson\n\n}\n","import React, { useState, useEffect, useRef } from \"react\";\nimport WorldWind from \"webworldwind-esa\";\n//import { useClock } from \"./useClock\";\nimport { useGlobal } from 'reactn';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport useDatahub from \"./useDatahub\";\n\n\n\nexport default function Map(props) {\n  let clon = (props.clon)?props.clon:15.5\n  let clat = (props.clat)?props.clat:48\n  let alt = (props.alt)?props.alt:10000000\n\n\n  const wwd = useRef(null)\n  \n  \n  // toogle projection\n  useHotkeys(\"p\",toggleProjection)  \n  const [, setProjection] = useState(\"3D\")\n\n  // remove geojson layers\n  useHotkeys(\"c\",removeGeoJson)  \n  const [geojsonlayers, setGeojsonlayers] = useState([])\n  useEffect(() => {\n    console.log('geojson changed')\n    console.log(geojsonlayers)\n  },[geojsonlayers]);\n\n\n\n  function toggleProjection() {\n    setProjection( prevProj => {\n      console.log(\"prevProjection: \"+prevProj)\n      let supportedProjections = [ \"3D\", \"Equirectangular\", \"Mercator\"];\n      let newProj = (supportedProjections.indexOf(prevProj) + 1)%supportedProjections.length\n      console.log(\"newProjection: \"+supportedProjections[newProj])\n      switch (supportedProjections[newProj]) {\n        case \"3D\":\n            wwd.current.globe.projection = new WorldWind.ProjectionWgs84();\n            break;\n        case \"Equirectangular\":\n            wwd.current.globe.projection = new WorldWind.ProjectionEquirectangular();\n            break;\n        case \"Mercator\":\n            wwd.current.globe.projection = new WorldWind.ProjectionMercator();\n            break;\n        case \"North Polar\":\n            wwd.current.globe.projection = new WorldWind.ProjectionPolarEquidistant(\"North\");\n            break;\n        case \"South Polar\":\n            wwd.current.globe.projection = new WorldWind.ProjectionPolarEquidistant(\"South\");\n            break;\n        default:\n        wwd.current.globe.projection = new WorldWind.ProjectionWgs84();\n        }\n      wwd.current.redraw();\n      return supportedProjections[newProj]\n      })      \n  }\n  \n  //toggle atmosphere\n  useHotkeys(\"a\",toggleAtmosphere)  \n  function toggleAtmosphere() {\n    wwd.current.layers[3].enabled = !wwd.current.layers[3].enabled\n    wwd.current.redraw();\n  }\n  //toggle starField\n  useHotkeys(\"s\",toggleStarField)  \n  function toggleStarField() {\n    wwd.current.layers[2].enabled = !wwd.current.layers[2].enabled\n    wwd.current.redraw();\n  }\n\n  //toggle starField\n  useHotkeys(\"n\",toggleNames)  \n  function toggleNames() {\n    wwd.current.layers[1].enabled = !wwd.current.layers[1].enabled\n    wwd.current.redraw();\n  }\n\n  function addGeoJson(url) {\n    function shapeConfigurationCallback(geometry, properties) {\n        var configuration = {};\n\n        var placemarkAttributes = new WorldWind.PlacemarkAttributes(null);\n        placemarkAttributes.imageScale = 10;\n        placemarkAttributes.imageColor = new WorldWind.Color(0, 1, 1, 0.2);\n        placemarkAttributes.labelAttributes.offset = new WorldWind.Offset(\n            WorldWind.OFFSET_FRACTION, 5,\n            WorldWind.OFFSET_FRACTION, 5);\n        //placemarkAttributes.imageSource = whiteDot;\n\n\n        if (geometry.isPointType() || geometry.isMultiPointType()) {\n            configuration.attributes = new WorldWind.PlacemarkAttributes(placemarkAttributes);\n            \n        } else if (geometry.isLineStringType() || geometry.isMultiLineStringType()) {\n            configuration.attributes.drawOutline = true;\n            configuration.attributes.outlineColor = new WorldWind.Color(\n              0.1 * configuration.attributes.interiorColor.red,\n              0.3 * configuration.attributes.interiorColor.green,\n              0.7 * configuration.attributes.interiorColor.blue,\n              1\n            );\n            configuration.attributes.outlineWidth = 1;\n        } else if (geometry.isPolygonType() || geometry.isMultiPolygonType()) {\n            configuration.attributes = new WorldWind.ShapeAttributes(null);\n            configuration.attributes.interiorColor = new WorldWind.Color(1, 0, 0, 0.2);\n            configuration.attributes.outlineColor = new WorldWind.Color(1, 0, 0, 0.3);\n        }\n\n        //console.log(configuration.attributes);\n        return configuration;\n    }\n\n    function loadCompleteCallback() {\n      setGeojsonlayers((geojsonlayers)=>[...geojsonlayers,renderableLayer])\n        wwd.current.redraw();\n    }\n\n\n    let renderableLayer = new WorldWind.RenderableLayer(\"GeoJSON_\"+(new Date()))\n    removeGeoJson()\n    wwd.current.addLayer(renderableLayer);\n    //setGeojsonlayers((geojsonlayers)=>[...geojsonlayers,renderableLayer])\n    \n    let geoJson = new WorldWind.GeoJSONParser(url);\n    geoJson.load(loadCompleteCallback, shapeConfigurationCallback, renderableLayer);\n    //setGeojsonlayers((geojsonlayers)=>[...geojsonlayers,renderableLayer])\n  }\n\n  function removeGeoJson() {\n    //console.log('removing json layers ')\n    //console.log(geojsonlayers)\n    for(let i=0;i<geojsonlayers.length;i++) {\n      wwd.current.removeLayer(geojsonlayers[i])\n      console.log('removing json layers: ')\n      console.log(geojsonlayers[i])\n    }\n    setGeojsonlayers([])\n    console.log(geojsonlayers)\n    wwd.current.redraw();\n  }\n\n  useEffect(() => {\n    console.log(\"useEffect (mount) in Map\")\n    //wwd.current = new WorldWind.WorldWindow(props.id, elevationModel);\n    wwd.current = new WorldWind.WorldWindow(props.id);\n    //setWwd(wwd);\n    var wmsConfigBg = {\n      service: \"https://tiles.maps.eox.at/wms\",\n      layerNames: \"s2cloudless-2018\",\n      numLevels: 19,\n      format: \"image/png\",\n      size: 256,\n      sector: WorldWind.Sector.FULL_SPHERE,\n      levelZeroDelta: new WorldWind.Location(90, 90)\n    }\n\n    var wmsConfigNames = {\n      service: \"https://tiles.maps.eox.at/wms\",\n      layerNames: \"overlay_bright\",\n      numLevels: 19,\n      format: \"image/png\",\n      size: 256,\n      sector: WorldWind.Sector.FULL_SPHERE,\n      levelZeroDelta: new WorldWind.Location(90, 90)\n    }\n    WorldWind.configuration.baseUrl = WorldWind.configuration.baseUrl.slice(0,-3)\n    var starFieldLayer = new WorldWind.StarFieldLayer();\n    var atmosphereLayer = new WorldWind.AtmosphereLayer('images/BlackMarble_2016_01deg.jpg');\n    atmosphereLayer.minActiveAltitude = 5000000\n\n    var layers = [\n      { layer: new WorldWind.WmsLayer(wmsConfigBg, \"\"), enabled: true },\n      { layer: new WorldWind.WmsLayer(wmsConfigNames, \"\"), enabled: false },\n      { layer: starFieldLayer, enabled: props.starfield },\n      { layer: atmosphereLayer, enabled: props.atmosphere }\n    ];\n\n    for (var l = 0; l < layers.length; l++) {\n      layers[l].layer.enabled = layers[l].enabled;\n      wwd.current.addLayer(layers[l].layer);\n    }\n    //var date = new Date();\n    starFieldLayer.time = new Date(appdate);\n    atmosphereLayer.time = new Date(appdate);\n    setTimeout(() => {\n      wwd.current.goToAnimator.travelTime = 1000;\n      wwd.current.goTo(new WorldWind.Position(clat, clon, alt));\n      wwd.current.redraw();\n      }, 2000)\n\n    wwd.current.redraw();\n    wwd.current.deepPicking = true;\n    }, []); // effect runs only once\n\n  // The Map component reacts to changes of the global state 'appdate' (in ms since Epoch)\n  const [appdate,  ] = useGlobal('appdate')\n  useEffect(() => {\n    //console.log(\"useEffect (appdate) in Map\")\n    wwd.current.layers[2].time = wwd.current.layers[3].time = new Date(appdate)\n    wwd.current.redraw();\n  },[appdate]);\n\n  // The Map component reacts to changes of geoJson data provided by the Copernicus Sentinel data hub\n  const { geojsonResults,  } = useDatahub();\n  useEffect(() => {\n    console.log('datahub in use')\n      console.log(geojsonResults)\n      try {\n        addGeoJson(geojsonResults)\n      } catch (err) {\n        console.log(\"error on geojson parsing\")\n        console.log(err)\n      }\n      \n  },[geojsonResults]);\n\n\n  var globeStyle = {\n    //background:  \"linear-gradient(rgb(67, 124, 199), #111) repeat scroll 0 0 #222\",\n    background: 'inherit',\n    position: \"fixed\",\n    //width: props.width,\n    //height: props.height\n    width: 'inherit',\n    height: 'inherit'\n  };\n\n  return (\n      <canvas id={props.id} style={globeStyle} />\n  );\n}\n","import { useState, useEffect } from \"react\";\nimport dhusToGeojson from \"./dhusToGeojson\";\nimport { useGlobal } from 'reactn';\nimport dateFormat from \"dateformat\"\n\n\n\nexport default function useDatahub() {\n\n    let searchURLs = []\n    //http://131.176.236.55/dhus/\n    //https://scihub.copernicus.eu/apihub/search?\n    searchURLs[\"S1\"] = 'https://131.176.236.55/dhus/search?q=(%20beginposition:[{start}%20TO%20{end}]%20AND%20platformname:Sentinel-1%20AND%20producttype:GRD)&start=0&rows=100&sortedby=ingestiondate&order=desc&format=json'\n    searchURLs[\"S2\"] = 'https://131.176.236.55/dhus/search?q=(%20beginposition:[{start}%20TO%20{end}]%20AND%20platformname:Sentinel-2%20AND%20producttype:S2MSI1C)&start=0&rows=100&sortedby=ingestiondate&order=desc&format=json'\n    searchURLs[\"S3\"] = 'https://131.176.236.55/dhus/search?q=(%20beginposition:[{start}%20TO%20{end}]%20AND%20platformname:Sentinel-3%20AND%20(producttype:OL_1_ERR___%20OR%20producttype:SL_1_RBT___%20OR%20producttype:SR_1_SRA___))&start=0&rows=100&sortedby=ingestiondate&order=desc&format=json'\n    searchURLs[\"S5P\"] = 'https://s5phub.copernicus.eu/search?q=(%20beginposition:[{start}%20TO%20{end}]%20AND%20platformname:Sentinel-5 precursor%20AND%20(producttype:L1B_RA_BD1%20OR%20(producttype:L2__NO2___%20AND%20processingmode:Near real time)))&start=0&rows=100&sortedby=ingestiondate&order=desc&format=json'\n    searchURLs[\"ENVISAT\"] = 'https://eocat.esa.int/ngeo/catalogue/FEDEO-ENVISAT.ASA.IMP_1P/search?start={start}&stop={end}&format=json&count=50&startIndex=1'\n    \n    // search time window size in ms\n    const windowSize = 1000 * 60 * 60 * 3\n\n    const [geojsonResults, setGeojsonResults] = useState({})\n    const [loading, setLoading] = useState(false)\n    \n    const [ searchdate,  ] = useGlobal('searchdate');\n    const [ mission,  ] = useGlobal('mission');\n    const [ searchUrl, setSearchurl  ] = useState('');\n\n    useEffect(() => {\n        const fetchURL = async () => {\n            setLoading(true)\n            console.log('Search: '+ searchUrl)\n            try {\n                const response = await fetch(searchUrl, {mode: 'cors', credentials: 'include'})\n                const json = await response.json()\n                const geoJson = (mission === 'ENVISAT')? json : dhusToGeojson(json)\n                console.log('totalResults: ' + geoJson.properties.totalResults)\n                setGeojsonResults(geoJson) \n                setLoading(false);   \n            } catch {\n                console.log(\"Didn't recieve a json !\")\n                //console.log(response)\n                setLoading(false);\n            }\n            \n        }\n        fetchURL(searchUrl);\n    }, [searchUrl]);\n    \n    useEffect(() => {\n        console.log('DataHub ready. '+mission)\n    }, []);\n\n    useEffect(() => {\n        console.log('Searching Catalogue for: '+mission)\n        let url = searchURLs[mission]\n        //if(mission in [\"S1\",\"S2\",\"S3\"]) url = searchURLs[mission]\n        try {\n            url = url.replace(\"{start}\", dateFormat(new Date(searchdate - windowSize/2),'isoUtcDateTime'));\n            url = url.replace(\"{end}\", dateFormat(new Date(searchdate + windowSize/2),'isoUtcDateTime'));\n            setSearchurl(url)\n    \n        } catch {\n            console.log('Not a JULIAN date !')\n        }\n        \n    }, [searchdate, mission]);\n/*    \n    const [ mission, setMission ] = useGlobal('mission');\n    useEffect(() => {\n        if(mission in [\"S1\",\"S2\",\"S3\"]) setUrl(searchURLs[mission])\n    }, [mission]);\n    */\n\n    return {geojsonResults, loading}\n}\n","import React, { useEffect } from \"react\";\nimport { useGlobal } from 'reactn';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport './missionselector.css'\n\n\n\n\nfunction MissionSelector() {\n\n\n    const [ mission, setMission ] = useGlobal('mission');\n    useHotkeys(\"1\",()=>{setMission('S1')}) \n    useHotkeys(\"2\",()=>{setMission('S2')}) \n    useHotkeys(\"3\",()=>{setMission('S3')}) \n    useHotkeys(\"5\",()=>{setMission('S5P')}) \n    useHotkeys(\"6\",()=>{setMission('ENVISAT')}) \n\n    useEffect(() => {\n        console.log('Mission changed to: '+ mission)\n    }, [mission]);\n\n    return (\n        <div className='MissionSelector'>\n            <div className='Circle'><img className='MissionIcon' src='./images/s1_black.png' alt='' onClick={() => setMission('S1')} /></div>\n            <div className='Circle'><img className='MissionIcon' src='./images/s2_black.png' alt='' onClick={() => setMission('S2')} /></div>\n            <div className='Circle'><img className='MissionIcon' src='./images/s3_black.png' alt='' onClick={() => setMission('S3')} /></div>\n            <div className='Circle'><img className='MissionIcon' src='./images/s5p_black.png' alt='' onClick={() => setMission('S5P')} /></div>\n            <div className='MissionLabel'>{mission}</div>\n            \n        </div>\n    )\n}\n\nexport default MissionSelector;\n","import React, { useState, useEffect, useLayoutEffect, useRef } from \"react\"\nimport {useSpring, animated, config} from 'react-spring'\nimport { useGesture } from 'react-use-gesture'\nimport './timeselector.css'\nimport { useGlobal } from 'reactn'\nimport { add, sub, scale } from 'vec-la'\n\n\n// to be split in a controller and a useTouchScale hook () => {<TouchScale>, scaleRenderer, size}\n\n\n\n\nfunction TimeSelector(props)  {\n    //console.log(\"Render TimeSelector \")\n    const dayspace = 40\n    const zoomfactor = (props.max-props.min)/(dayspace*(props.max-props.min)/(1000*60*60*24))\n    const min = props.min\n    const max = min +((props.max - props.min) / zoomfactor)\n\n    \n\n    let wid, hei = 0\n    if(props.vertical) {\n        hei = max - min\n        wid = 100\n    } else {\n        wid = max - min\n        hei = 100\n\n    }\n\n    const [appdate, setAppdate] = useGlobal('appdate')\n    const [, setSearchdate] = useGlobal('searchdate')\n    const [livePosition, setLiveposition] = useState(new Date())\n\n    const [active, setActive] = useState(false); \n\n\n\n    const myvertical = useRef()\n    myvertical.current = props.vertical\n\n\n    const timecontainer = useRef()\n\n    const [{ xy }, set] = useSpring(() => ({ xy: [0, 0] }))\n\n\n    const bind = useGesture({\n        onDrag: ({  down, delta, velocity, active , direction, wheeling, time, first, last, temp = {xy: xy.getValue(), deltaOffset: [0,0], lastNewxy: [0,0],deltaFactor: [1,1], lastStep: 1, lastIncrement: 0,lastDown: false }}) => {\n            let springConfigUp = { mass: 1, tension: 200 , friction: 40, precision: 1 }\n            let springConfigDown = { mass: 1, tension: 1200 , friction: 40, precision: 0.01 }\n            let config = {  velocity: scale(direction, velocity), decay: true, precision: 1 }\n\n            velocity = (velocity<.15)?0:velocity\n            \n            if(down != temp.lastDown) {console.log('set true'); setActive(true)}\n            temp.lastDown = down\n            if(myvertical.current) {    \n                //let pos = target.getBoundingClientRect().top\n                let height = timecontainer.current.parentElement.offsetHeight\n\n                //let followDest = (delta[0]<-200)?delta[1]*10+temp.xy[1]:delta[1]+temp.xy[1]\n                let step = 1\n                let div = 1\n                if (delta[0]<-30) {step = (1000 * 60 * 60 * 24)  / zoomfactor; div = 10}\n                if (delta[0]<-80) {step = (1000 * 60 * 60 * 24 * 30) / zoomfactor; div = 15}\n                if (delta[0]<-130) {step = (1000 * 60 * 60 * 24 * 365) / zoomfactor; div = 30}\n\n                if(step !== temp.lastStep) {\n                    console.log('Step changed from: '+temp.lastStep+' to: '+ step)\n                    temp.deltaOffset = delta\n                    temp.xy = temp.lastNewxy\n                }\n\n                delta = sub(delta,temp.deltaOffset)\n                let deltaFactor = [Math.round(delta[0]/div)*step,Math.round(delta[1]/div)*step]\n                if(down) velocity = 0\n                let newxy = add(scale(deltaFactor,Math.pow(velocity+1,2.5)), temp.xy)\n\n                if(step !== temp.lastStep) {\n                    temp.xy = newxy\n                    temp.lastStep = step\n                }\n\n                temp.lastNewxy = newxy\n                \n                const setLiveTime = ({ xy }) => { setLiveposition(min+(-xy[1]+height/2)*zoomfactor)}\n                const setFinalTime = ({ xy }) => {   if(!down && !active) {setActive(false);console.log('set to false')}; if(!down) { setSearchdate(min+(-xy[1]+height/2)*zoomfactor) }}  \n\n                let minX = timecontainer.current.parentElement.offsetTop + timecontainer.current.parentElement.offsetHeight / 2\n                let maxX = - timecontainer.current.offsetHeight + timecontainer.current.parentElement.offsetHeight / 2\n        \n                newxy[1] = newxy[1]>minX ? minX : newxy[1]\n                newxy[1] = newxy[1]<maxX ? maxX : newxy[1]\n\n                set({  xy: newxy ,   config: down?springConfigDown:springConfigUp, immediate: down, onRest: setFinalTime, onFrame: setLiveTime} )\n\n            } else {    \n            }\n            return temp\n        }\n    })\n\n    \n\n    const scaleText = () => {\n        \n        let monthcode = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']\n        let day, month, hour, year = 0\n        let lastday, lastmonth = 0\n        let tics = []\n        const dayclass = (!props.vertical)?'DayTic':'DayTic-v'\n        const monthclass = (!props.vertical)?'MonthTic':'MonthTic-v'\n        const yearclass = (!props.vertical)?'YearTic':'YearTic-v'\n        \n        \n        for (let i=props.min;i<=props.max;i+=3600000) {\n            day = (new Date(i)).getUTCDate()\n            month = monthcode[(new Date(i)).getUTCMonth()]\n            hour = (new Date(i)).getUTCHours()\n            year = (new Date(i)).getUTCFullYear()\n            if(day !== lastday) tics.push({class:dayclass, pos: (i-props.min)/zoomfactor, label: day})\n            if(month !== lastmonth ) {\n                tics.push({class:monthclass, pos: (i-props.min)/zoomfactor, label: month})\n                tics.push({class:yearclass, pos: (i-props.min)/zoomfactor, label: year})\n            }\n            //if(year != lastyear) tics.push({class:'YearTic', pos: (i-props.min)/zoomfactor, label: year})\n            //if(hour != lasthour) tics.push({class:'HourTic', pos: (i-props.min)/zoomfactor, label: '.'})\n            lastday = day\n            lastmonth = month\n        }\n\n            return tics.map(item => (            <div className={item.class} key={item.class+item.pos} style={(!props.vertical)?{left:item.pos}:{top:item.pos}}>{item.label}</div>))\n    }\n\n    const [timescale, setTimescale] = useState('')    \n    //const [vertical, setVertical] = useState(props.vertical)    \n    useLayoutEffect(() => {\n        //console.log(\"useEffect (livePosition) in TimeSelector: \"+livePosition)\n        setTimescale(scaleText(props.vertical))\n    \n    },[props.vertical])\n\n\n    \n\n\n    useLayoutEffect(() => {     \n        let offset =0\n        //console.log('Active: '+active)\n        if(!active) {\n            if(props.vertical) {\n                offset = ((min - appdate)/zoomfactor)+timecontainer.current.parentElement.offsetHeight/2\n                set({ xy: [0,offset], config: { tension: 1200, friction: 40 }, onFrame: null, onRest: null }  )\n            } else {\n                offset = ((min - appdate)/zoomfactor)+timecontainer.current.parentElement.offsetWidth/2\n                set({ xy: [offset,0], config: { tension: 1200, friction: 40 }, onFrame: null, onRest: null }  )\n\n            }\n   \n            \n        }\n    },[appdate,timescale])  \n\n    useEffect(() => {\n        setAppdate(livePosition)\n    },[livePosition])\n\n\n    useLayoutEffect(() => {\n        console.log(\"zoom changed to: \"+props.zoom)\n    },[props.zoom])\n\n    return (\n        <div className={props.vertical?\"Mask-v\":\"Mask\"} >\n            \n            <div className=\"TriangleContainer\" >\n                <svg height=\"40\" width=\"20\" className=\"Triangle\">\n                    <polygon points=\"20,5 20,35 12,20\" />   \n                </svg> \n            </div>        \n            <div className=\"TimeContainer\" ref={timecontainer}>\n                \n                <animated.div className=\"TimeScale\" {...bind()} style={{ width: wid,height: hei, transform: xy.interpolate((x, y) => `translate3d(0px,${y}px,0)`) }}>\n                    {timescale}\n                </animated.div>\n            </div>\n        </div>\n    )\n}\n\nexport default TimeSelector","import React from \"react\";\nimport dateFormat from \"dateformat\"\nimport \"./timelabel.css\"\n\n\n\n\nfunction TimeLabel({highlight,date}) {\n\n\n    return (\n        <div className='LabelCountainer' >\n            <div className='Line' key='line' >____</div>\n            <div className='DayLabel' key='day' >{dateFormat(date,'UTC:dd')}</div>\n            <div className='YearLabel' key='year' >{dateFormat(date,'UTC:yyyy')}</div>\n            <div className='MonthLabel' key='month' >{dateFormat(date,'UTC:mmm')}</div>\n            <div className='TimeLabel' key='time' >{dateFormat(date,'UTC:HH:MM:ss')}</div>\n        </div>\n    )\n\n\n    \n}\n\nexport default TimeLabel\n","import React, { useEffect, useState } from \"react\";\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport './missionselector.css'\n\n\n\n\nfunction Debug({action}) {\n\n\n    const [ debug, setDebug ] = useState(true)\n    useHotkeys(\"d\",()=>{setDebug(action => !action)}) \n\n    useEffect(() => {\n        console.log('Debug Overlay: press D ')\n        console.log('action: '+action)\n    }, []);\n\n    \n\n    return (\n        <div className='debug' style={{display: (debug)?'inline':'hidden', width: 30, height:'100%'}}>\n            <div className='ContinuousScroll' style={{top: '70%', right:0, width: 30, height:'100%', background:  'rgba(22, 22, 20, 0.74)'}}/>\n        </div>\n    )\n}\n\nexport default Debug\n","import React, { useState, useEffect } from \"react\";\nimport ClockController from \"./clockController\";\nimport Map from \"./map\";\nimport MissionSelector from \"./missionselector\";\nimport Fullscreen from \"react-full-screen\";\nimport { useFullscreen } from '@straw-hat/react-fullscreen';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { useGlobal } from 'reactn';\n\nimport \"./styles.css\"\nimport TimeSelector from \"./timeselector\";\nimport TimeLabel from \"./timelabel2\";\nimport Debug from \"./debug\";\n\n\n\nconst App = () => {\n  //const [count, setCount] = useState(1000);\n  const [hasFetched, setFetch] = useState(false)\n\n\n  \n  const [ appdate,  ] = useGlobal('appdate')\n  const [ searchdate,  ] = useGlobal('searchdate')\n\n  // Set boundaries and zoom factor of the time scale\n  const [min, setMin] = useState((new Date(\"2000-04-10\")).getTime())\n  const [max, setMax] = useState((new Date(\"2019-12-31\")).getTime())\n  \n  const [vertical, setVertical] = useState(true)\n  \n  useHotkeys(\"h\",() => {\n    setVertical(prevVertical => {\n        return (!prevVertical)\n      })\n    })\n\n\n  useEffect(() => {\n\n    const mockApi = () => {\n      return new Promise(resolve => {\n        setTimeout(() => {\n          const randomInt = Math.ceil(Math.random() * 10)\n          console.log(\"mockApi done\")\n          resolve(randomInt)\n        }, 2000)\n      })\n    }\n    \n    async function doFetch() {\n      if (!hasFetched) {\n        const apiResponse = await mockApi();\n        setFetch(true);\n      }\n    }\n\n    doFetch()\n  }, []);\n  \n\n\n\n  const [isFull,setIsfull] = useState(false)\n  const { isFullscreen, toggleFullscreen } = useFullscreen(window.document.body);\n  \n  useHotkeys(\"f\",toggleFullscreen )  \n  \n  //const [ appdate, setAppdate ] = useGlobal('appdate');\n\n  return (\n    <div className=\"App\">\n      <Fullscreen enabled={isFull} onChange={() =>  {if(!isFull) setIsfull(false)} }>\n      \n        <div className=\"DateTimeLabel\" >\n          <TimeLabel vertical={vertical} date={appdate}/>\n        </div>\n        \n        <div className=\"ClockController\">\n          <ClockController duration=\"600000\"/>\n        </div> \n\n        <div className=\"Globe\">\n          <Map id=\"globe\" starfield=\"true\" astmosphere='false'/>\n        </div>\n        <div className={vertical?\"TimeSelectorv\":\"TimeSelectorh\"}>\n          <TimeSelector min={min} max={max} vertical={vertical}/>\n        </div>\n        <MissionSelector mission='S1'/>\n        <Debug action='Bonjour'/>\n      </Fullscreen>\n   </div>\n  );\n}\n\nexport default App\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n      // [::1] is the IPv6 localhost address.\n      window.location.hostname === '[::1]' ||\n      // 127.0.0.1/8 is considered localhost for IPv4.\n      window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n      )\n  );\n  \n  export default function register() {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n      // The URL constructor is available in all browsers that support SW.\n      const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n      if (publicUrl.origin !== window.location.origin) {\n        // Our service worker won't work if PUBLIC_URL is on a different origin\n        // from what our page is served on. This might happen if a CDN is used to\n        // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n        return;\n      }\n  \n      window.addEventListener('load', () => {\n        const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n  \n        if (isLocalhost) {\n          // This is running on localhost. Lets check if a service worker still exists or not.\n          checkValidServiceWorker(swUrl);\n        } else {\n          // Is not local host. Just register service worker\n          registerValidSW(swUrl);\n        }\n      });\n    }\n  }\n  \n  function registerValidSW(swUrl) {\n    navigator.serviceWorker\n      .register(swUrl)\n      .then(registration => {\n        registration.onupdatefound = () => {\n          const installingWorker = registration.installing;\n          installingWorker.onstatechange = () => {\n            if (installingWorker.state === 'installed') {\n              if (navigator.serviceWorker.controller) {\n                // At this point, the old content will have been purged and\n                // the fresh content will have been added to the cache.\n                // It's the perfect time to display a \"New content is\n                // available; please refresh.\" message in your web app.\n                console.log('New content is available; please refresh.');\n              } else {\n                // At this point, everything has been precached.\n                // It's the perfect time to display a\n                // \"Content is cached for offline use.\" message.\n                console.log('Content is cached for offline use.');\n              }\n            }\n          };\n        };\n      })\n      .catch(error => {\n        console.error('Error during service worker registration:', error);\n      });\n  }\n  \n  function checkValidServiceWorker(swUrl) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl)\n      .then(response => {\n        // Ensure service worker exists, and that we really are getting a JS file.\n        if (\n          response.status === 404 ||\n          response.headers.get('content-type').indexOf('javascript') === -1\n        ) {\n          // No service worker found. Probably a different app. Reload the page.\n          navigator.serviceWorker.ready.then(registration => {\n            registration.unregister().then(() => {\n              window.location.reload();\n            });\n          });\n        } else {\n          // Service worker found. Proceed as normal.\n          registerValidSW(swUrl);\n        }\n      })\n      .catch(() => {\n        console.log(\n          'No internet connection found. App is running in offline mode.'\n        );\n      });\n  }\n  \n  export function unregister() {\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.ready.then(registration => {\n        registration.unregister();\n      });\n    }\n  }\n  ","import { setGlobal } from 'reactn';\n\n\nexport  function initGlobalStates() {\n    console.log(\"init global: \"+(new Date()).getTime())\n\n    // Set current time as global state\n    setGlobal({appdate: ((new Date()).getTime())})\n    setGlobal({searchdate: ((new Date()).getTime())})\n    setGlobal({mission: 'S1'})\n}","import React from \"react\";\nimport { render } from \"react-dom\";\nimport App from \"./app\";\nimport {initGlobalStates} from \"./initglobalstates\"\nimport registerServiceWorker from './registerServiceWorker';\n\n// if you're in create-react-app import the files as:\n// import store from \"./js/store/index\";\n// import App from \"./js/components/App.jsx\";\ninitGlobalStates()\n\nrender(\n  <App />,\n  // The target element might be either root or app,\n  // depending on your development environment\n  // document.getElementById(\"app\")\n  document.getElementById(\"root\")\n);\nregisterServiceWorker();"],"sourceRoot":""}